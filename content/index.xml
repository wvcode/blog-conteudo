<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>WV Code - Educação e Consultoria</title>
<link>https://blog.wvcode.com.br/</link>
<atom:link href="https://blog.wvcode.com.br/index.xml" rel="self" type="application/rss+xml"/>
<description></description>
<generator>quarto-1.5.57</generator>
<lastBuildDate>Fri, 16 Jun 2023 00:00:00 GMT</lastBuildDate>
<item>
  <title>AI na Análise de Dados - 1 - Classificação de Texto com a API da OpenAI</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/p0004-classif-texto/</link>
  <description><![CDATA[ 





<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Olá, tudo bem?</p>
<p>A esta altura do ano de 2023, é quase impossível que você não tenha ouvido falar sobre o ChatGPT. E verdade seja dita, o ChatGPT é uma aplicação incrível, que permite sermos mais eficientes em diversas tarefas do dia dia-a-dia! Mas é importante salientar que ele é apenas uma aplicação, o que está por trás do ChatGPT e que chamamos de um LLM (Large Language Model) é o que realmente faz toda a mágica acontecer. Não iremos entrar em detalhes de como o modelo GPT (Generative Pretrained Transformer) funciona (veja os links no final do post), mas vamos explicar como podemos trazer todo esse poder para dentro de nossos códigos Python e criar scripts e aplicações que vão aumentar ainda mais nossa produtividade.</p>
<p>Este será o primeiro de uma série de artigos que visam auxiliar na compreensão de como as IAs podem ser assistentes poderosos para o Analista de Dados.</p>
</section>
<section id="classificação-de-dados" class="level2">
<h2 class="anchored" data-anchor-id="classificação-de-dados">Classificação de Dados</h2>
<p>Classificação de dados é uma tarefa de aprendizado supervisionado que envolve a categorização de uma determinada amostra de dados em uma das várias classes predefinidas. Cada amostra é atribuída a uma e somente uma classe, baseando-se nas características dessa amostra.</p>
<p>Por exemplo, imagine que você tem um conjunto de emails e você quer classificá-los como “spam” ou “não spam”. Nesse caso, “spam” e “não spam” são as classes, e cada email é uma amostra que será classificada em uma dessas classes.</p>
<p>A classificação é geralmente realizada utilizando algoritmos de aprendizado de máquina. Esses algoritmos aprendem a classificar novas amostras baseando-se em um conjunto de treinamento. O conjunto de treinamento é um conjunto de amostras para as quais as classes verdadeiras são conhecidas.</p>
<p>Os algoritmos de classificação incluem árvores de decisão, regressão logística, máquinas de vetores de suporte, redes neurais e muitos outros. A escolha do algoritmo depende de vários fatores, como a natureza dos dados, o número de classes, a necessidade de interpretabilidade e outros.</p>
<section id="mas-e-se-não-temos-conjuntos-de-dados-de-treinamento" class="level3">
<h3 class="anchored" data-anchor-id="mas-e-se-não-temos-conjuntos-de-dados-de-treinamento">Mas e se não temos conjuntos de dados de treinamento?</h3>
<p>Se você não tem um conjunto de dados de treinamento rotulado, ainda existem várias abordagens que você pode usar, tais como:</p>
<ol type="1">
<li><strong>Aprendizado não supervisionado</strong></li>
<li><strong>Aprendizado semi-supervisionado</strong></li>
<li><strong>Aprendizado por reforço</strong></li>
<li><strong>Rotulagem manual</strong></li>
<li><strong>Geração de rótulos sintéticos</strong></li>
<li><strong>Processamento de Linguagem Natural</strong></li>
</ol>
<p>E é nesta última opção que podemos utilizar o GPT para nos ajudar, pois o modelo do GPT é gigantesco, tendo sido treinado com conteúdo de toda a internet.</p>
</section>
<section id="gpt-versus-métodos-mais-tradicionais-de-classificação" class="level3">
<h3 class="anchored" data-anchor-id="gpt-versus-métodos-mais-tradicionais-de-classificação">GPT versus métodos mais tradicionais de classificação</h3>
<p>Os modelos de linguagem como o GPT (Generative Pretrained Transformer) têm várias vantagens e desvantagens, especialmente quando comparados a outros métodos de análise de texto. Aqui estão algumas delas:</p>
<p><strong>Vantagens:</strong></p>
<ol type="1">
<li><p><strong>Compreensão Profunda da Linguagem</strong>: O GPT é treinado em enormes quantidades de texto, o que lhe permite aprender uma rica compreensão da linguagem natural. Isso inclui uma compreensão de sintaxe, semântica, e até mesmo alguns elementos de conhecimento do mundo real.</p></li>
<li><p><strong>Versatilidade</strong>: O GPT pode ser usado para uma ampla gama de tarefas de processamento de linguagem natural, incluindo tradução de texto, geração de texto, resumo de texto, análise de sentimento, resposta a perguntas e muito mais.</p></li>
<li><p><strong>Aprendizado Transferível</strong>: O GPT utiliza o aprendizado transferível, o que significa que o conhecimento aprendido durante o treinamento em um grande conjunto de dados pode ser aplicado a tarefas específicas com relativamente poucos dados de treinamento adicionais. Isso permite ao GPT se adaptar a uma ampla gama de tarefas com um desempenho impressionante.</p></li>
<li><p><strong>Modelagem de Contexto</strong>: A arquitetura do Transformer, utilizada pelo GPT, é especialmente boa para entender o contexto em uma sequência de texto, o que é crucial para muitas tarefas de processamento de linguagem natural.</p></li>
</ol>
<p><strong>Desvantagens:</strong></p>
<ol type="1">
<li><p><strong>Necessidade de Grandes Quantidades de Dados de Treinamento</strong>: O GPT precisa de grandes quantidades de dados de treinamento para aprender efetivamente. Isso pode tornar o treinamento do modelo do zero proibitivamente caro em termos de tempo e recursos computacionais.</p></li>
<li><p><strong>Dificuldade de Interpretação</strong>: O GPT, como muitos modelos de aprendizado profundo, pode ser difícil de interpretar. Ele pode produzir resultados impressionantes, mas pode ser difícil entender por que fez uma determinada previsão.</p></li>
<li><p><strong>Sensibilidade ao Ruído e Erros</strong>: Embora o GPT seja robusto em muitos aspectos, ele pode ser sensível a ruído e erros no texto de entrada. Pequenas mudanças no texto de entrada podem às vezes levar a grandes mudanças nas previsões do modelo.</p></li>
<li><p><strong>Potencial de Viés</strong>: O GPT aprende com os dados em que é treinado, e se esses dados contêm viés, o modelo também pode exibir viés. Isso pode ser um problema significativo quando o modelo é usado em contextos sensíveis.</p></li>
</ol>
</section>
</section>
<section id="ok-o-gpt-é-legal-e-tudo-o-mais-mas-e-daí" class="level2">
<h2 class="anchored" data-anchor-id="ok-o-gpt-é-legal-e-tudo-o-mais-mas-e-daí">Ok, o GPT é legal e tudo o mais… Mas e daí?</h2>
<p>E daí que, graças ao modelo GPT, podemos ter um classificador de texto super calibrado para nos ajudar em nossas tarefas, sem o ônus de treinar tal modelo. E podemos utilizar o GPT a partir da API da OpenAI, de maneira muito simples! Outra vantagem que vale ressaltar é que, ao contrário de modelos tradicionais de classificação, podemos atribuir múltiplas categorias ao nosso texto.</p>
<p>Vamos ver um exemplo?</p>
</section>
<section id="organizando-um-catálogo-de-artigos" class="level2">
<h2 class="anchored" data-anchor-id="organizando-um-catálogo-de-artigos">Organizando um catálogo de artigos</h2>
<p>Imagine o seguinte cenário: temos uma lista de todos os artigos que salvamos no site Medium. O problema desta lista é que o Medium não oferece nenhum tipo de categorização dos artigos. A única maneira de fazer isso é separando em várias listas, o que dificulta principalmente o processo de busca dos artigos. Além, é claro, de pressupor a classificação antes de ler o artigo.</p>
<p>Essa tarefa realmente não é trivial, e seria muito útil poder fazer isso de forma automatizada. E o primeiro problema que temos é que nossa lista tem apenas o título e a url dos artigos. Para que a classificação seja mais precisa, precisamos de pelo menos algum texto que nos ajude a ter mais contexto a respeito do artigo.</p>
<p>Então, vamos criar o nosso script classificador? Esse script vai executar as seguintes tarefas:</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  A[Carregar Lista de Arquivos] --&gt; B
  B[Buscar Título e Resumo&lt;br&gt;dos Artigos] --&gt; C
  C[Classificar Artigos] --&gt; D[Salvar Lista de Artigos]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<section id="inicializando-o-ambiente" class="level3">
<h3 class="anchored" data-anchor-id="inicializando-o-ambiente">Inicializando o ambiente</h3>
<p>Vamos utilizar as seguintes bibliotecas: - beautifulsoup4 - biblioteca para extrair a informação do HTML que contém a lista de artigos - openai - biblioteca para utilizar a API da openAI - requests - bibliotea para buscar informações da internet</p>
<div id="cell-16" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> openai</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> bs4</span>
<span id="cb1-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> json</span>
<span id="cb1-5"></span>
<span id="cb1-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb1-7"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> requests_html <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> HTMLSession <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># importando o objeto de sessão do html requests</span></span></code></pre></div>
</div>
<p>A próxima etapa é carregar variáveis de ambiente. Lembrando que é necessário ter uma API key para usar a API da OpenAI.</p>
<div id="cell-18" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1">load_dotenv()</span>
<span id="cb2-2"></span>
<span id="cb2-3">openai.api_key <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENAI_API_KEY"</span>)</span></code></pre></div>
</div>
<p>Agora, precisamos carregar nossa lista de artigos, que está em um arquivo HTML, que podemos baixar lá no site do Medium. Vamos criar uma função, de forma que poderemos re-utilizar essa parte da rotina sempre que for necessário.</p>
<div id="cell-20" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> retorna_lista(nomearquivo: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>):</span>
<span id="cb3-2">  html_artigos <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> bs4.BeautifulSoup(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(nomearquivo, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"r"</span>))</span>
<span id="cb3-3">  list_artigos <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> html_artigos.find_all(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"li"</span>)</span>
<span id="cb3-4"></span>
<span id="cb3-5">  artigos <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb3-6">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> list_artigos:</span>
<span id="cb3-7">    record <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {}</span>
<span id="cb3-8">    record <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb3-9">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"titulo"</span>: item.a.text,</span>
<span id="cb3-10">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"link"</span>: item.a[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"href"</span>],</span>
<span id="cb3-11">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"autores"</span>: <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>,</span>
<span id="cb3-12">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"resumo"</span>: <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>,</span>
<span id="cb3-13">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"categorias"</span>: <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb3-14">    }</span>
<span id="cb3-15">    artigos.append(record)</span>
<span id="cb3-16">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> artigos</span></code></pre></div>
</div>
<p>Este código define uma função chamada “retorna_lista” que recebe um único parâmetro chamado “nomearquivo” do tipo string. A função primeiro abre o arquivo especificado pela string “nomearquivo” usando a função “open”, lê o conteúdo e usa o método “find_all” do Beautiful Soup para procurar todos os elementos de lista no documento HTML e armazená-los na variável “list_artigos”. A função, então, inicializa uma lista vazia chamada “artigos”. Em um loop, ela itera sobre cada item da lista na variável “list_artigos” e cria um dicionário chamado “record” com três chaves: “titulo”, “link”, “autores”, “resumo” e “categorias”. Os valores para “titulo” e “link” são extraídos do texto da tag “a” e do atributo “href”, respectivamente. O valor das chaves “autores”, “resumo” e “categorias” são uma string vazia. O dicionário “record” completo é então adicionado à lista “artigos”. Depois que todos os itens da lista são processados, a função retorna a lista “artigos”.</p>
<p>Então, podemos utilizar essa função conforme abaixo:</p>
<div id="cell-23" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">artigos <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> retorna_lista(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"reading-list-medium.html"</span>)</span>
<span id="cb4-2"></span>
<span id="cb4-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f" Número de Artigos: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(artigos)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">."</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Número de Artigos: 1865.</code></pre>
</div>
</div>
<p>Vamos ver como ficou um registro:</p>
<div id="cell-25" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(json.dumps(artigos[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>], indent<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{
    "titulo": "Prompting ChatGPT for Python Code Generation: An Effective Framework",
    "link": "https://medium.com/p/e323b2d24987",
    "autores": null,
    "resumo": null,
    "categorias": null
}</code></pre>
</div>
</div>
<p>Perfeito! Estamos com os artigos preparados para buscarmos os dados extra que nos darão mais contexto para a categorização.</p>
<p>Para fazer isso, vamos utilizar a biblioteca requests-html. Novamente, criaremos uma função para reutilizar depois.</p>
<div id="cell-27" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> retorna_campos(registro: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">dict</span>):</span>
<span id="cb8-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Declaramos variaveis que contem seletores HTML</span></span>
<span id="cb8-3">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Esses seletores nos ajudarão a encontrar os elementos HTML que contém o </span></span>
<span id="cb8-4">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># conteúdo referente ao autor, data publicação, titulo e lead</span></span>
<span id="cb8-5">    seletor_autor <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [</span>
<span id="cb8-6">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#root &gt; div &gt; div &gt; div:nth-child(3) &gt; div &gt; article &gt; div &gt; div &gt; section &gt; div &gt; div:nth-child(3) &gt; div &gt; div &gt; div:nth-child(2) &gt; div &gt; div &gt; div &gt; div &gt; div &gt; div &gt; div &gt; span &gt; div &gt; div &gt; div &gt; div &gt; div &gt; p &gt; a"</span>, </span>
<span id="cb8-7">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#root &gt; div &gt; div &gt; div:nth-child(3) &gt; div &gt; article &gt; div &gt; div &gt; section &gt; div &gt; div:nth-child(3) &gt; div &gt; div &gt; div:nth-child(1) &gt; div &gt; div &gt; div &gt; div &gt; div &gt; div &gt; div &gt; span &gt; div &gt; div &gt; div &gt; div &gt; div &gt; p &gt; a"</span>, </span>
<span id="cb8-8">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#root &gt; div &gt; div &gt; div:nth-child(2) &gt; div &gt; article &gt; div &gt; div &gt; section &gt; div &gt; div:nth-child(2) &gt; div &gt; div &gt; div &gt; div &gt; div &gt; div &gt; div &gt; div &gt; div &gt; div &gt; span &gt; div &gt; div &gt; div &gt; div &gt; div &gt; p &gt; a"</span>, </span>
<span id="cb8-9">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#root &gt; div &gt; div &gt; div:nth-child(2) &gt; div &gt; article &gt; div &gt; div &gt; section &gt; div &gt; div:nth-child(3) &gt; div:nth-child(1) &gt; div &gt; div:nth-child(2) &gt; div &gt; div &gt; div &gt; div &gt; div &gt; div &gt; div &gt; span &gt; div &gt; div &gt; div &gt; div &gt; div &gt; p &gt; a"</span></span>
<span id="cb8-10">    ]</span>
<span id="cb8-11">    seletor_titulo_lead <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [</span>
<span id="cb8-12">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#root &gt; div &gt; div &gt; div:nth-child(3) &gt; div &gt; article &gt; div &gt; div &gt; section &gt; div &gt; div:nth-child(3) &gt; div &gt; div &gt; div:nth-child(2)"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#root &gt; div &gt; div &gt; div:nth-child(2) &gt; div &gt; article &gt; div &gt; div &gt; section &gt; div &gt; div:nth-child(3) &gt; div:nth-child(1) &gt; div &gt; div:nth-child(2)"</span></span>
<span id="cb8-13">    ]</span>
<span id="cb8-14">  </span>
<span id="cb8-15">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Inicializamos o objeto HTMLSession para fazer a coleta da informação dos artigos</span></span>
<span id="cb8-16">    request <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> HTMLSession()</span>
<span id="cb8-17">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb8-18">      <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(registro[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"link"</span>])</span>
<span id="cb8-19">      conteudo_html <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> request.get(registro[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"link"</span>])</span>
<span id="cb8-20">      autor <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Not available"</span></span>
<span id="cb8-21">      </span>
<span id="cb8-22">      <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> seletor_autor:</span>
<span id="cb8-23">        aux_autor <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb8-24">        aux_autor <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> conteudo_html.html.find(item, first<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb8-25">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> aux_autor <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">is</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>:</span>
<span id="cb8-26">          autor <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> aux_autor</span>
<span id="cb8-27">          <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">break</span></span>
<span id="cb8-28"></span>
<span id="cb8-29">      head <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Not available"</span></span>
<span id="cb8-30">      <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> seletor_titulo_lead:</span>
<span id="cb8-31">        aux_head <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb8-32">        aux_head <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> conteudo_html.html.find(item, first<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb8-33">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> aux_head:</span>
<span id="cb8-34">          aux_lead <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> aux_head.find(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'h2'</span>, first<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb8-35">          <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> aux_lead <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">is</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>:</span>
<span id="cb8-36">            head <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> aux_lead.text</span>
<span id="cb8-37">          </span>
<span id="cb8-38">      registro[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"autores"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> autor.text</span>
<span id="cb8-39">      registro[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"resumo"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> head</span>
<span id="cb8-40">        </span>
<span id="cb8-41">      <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> registro</span>
<span id="cb8-42">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span>:</span>
<span id="cb8-43">      <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'URL </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{0}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> com erro. Verifique.'</span>.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(registro[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"link"</span>]))</span>
<span id="cb8-44">      <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span></code></pre></div>
</div>
<p>A função <code>retorna_campos</code> faz o scraping de dados de páginas da web, especificamente páginas de notícias ou artigos de blog do Medium. Ele pega um dicionário de “registro” como entrada, que parece conter um “link” para uma página da web.</p>
<p>Passo-a-Passo:</p>
<ol type="1">
<li><p>Variáveis <code>seletor_autor</code> e <code>seletor_titulo_lead</code> são listas de seletores CSS. Seletores CSS são padrões usados para selecionar os elementos que você deseja estilizar. Aqui, eles são usados para identificar os elementos HTML onde as informações de autor e título/lead estão localizadas no HTML da página.</p></li>
<li><p>A função então inicia uma sessão HTML usando o módulo <code>HTMLSession()</code> do pacote <code>requests_html</code>, que é uma biblioteca Python para fazer solicitações HTTP e para parsing de HTML.</p></li>
<li><p>A função tenta fazer uma solicitação GET para a URL que está no campo “link” do dicionário de entrada.</p></li>
<li><p>Em seguida, a função tenta encontrar o autor do artigo. Para isso, itera sobre a lista <code>seletor_autor</code> e, para cada seletor, tenta encontrar um elemento correspondente na página HTML. Se encontrar um autor, interrompe o loop e guarda o autor encontrado.</p></li>
<li><p>Depois disso, a função tenta encontrar o título do artigo da mesma maneira, usando a lista <code>seletor_titulo_lead</code>.</p></li>
<li><p>Os resultados são então adicionados ao dicionário de entrada no campo “autores” para o autor e “resumo” para o título.</p></li>
<li><p>Se houver algum erro durante o processo, como um link quebrado ou se o seletor CSS não corresponder a nenhum elemento, a função exibe uma mensagem de erro e retorna None.</p></li>
<li><p>Se tudo correr bem, a função retorna o dicionário de entrada, agora com informações adicionais sobre o autor e o resumo do artigo.</p></li>
</ol>
<p>Agora vamos a execução da função para cada artigo em nossa lista. Observe que colocamos um limitador para fazer isso para 10 registros.</p>
<div id="cell-30" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1">artigos_comp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb9-2">i <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb9-3"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> artigos:</span>
<span id="cb9-4">    artigos_comp.append(retorna_campos(item))</span>
<span id="cb9-5">    i <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb9-6">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> i <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>:</span>
<span id="cb9-7">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">break</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>https://medium.com/p/e323b2d24987
https://medium.com/p/9e9536ebd839
https://medium.com/p/bb7d31ed2e76
https://medium.com/p/2688e319e2a5
https://medium.com/p/7edae42a20b3
https://medium.com/p/f87419cb14cb
https://medium.com/p/d6169fc81204
https://medium.com/p/74361bc3b92e
https://medium.com/p/9dc1566d960d
https://medium.com/p/3c053357c47f</code></pre>
</div>
</div>
<p>Agora temos os nossos artigos com título, autor e uma lead line, que vai nos ajudar no processo da categorização.</p>
<p>Vamos agora, a nossa rotina de categorização, usando a API do OpenAI.</p>
<div id="cell-32" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> retorna_categorias(titulo, resumo):</span>
<span id="cb11-2">    response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> openai.Completion.create(</span>
<span id="cb11-3">        engine<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text-davinci-003"</span>,</span>
<span id="cb11-4">        prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"We have these categories: dbt, Python, DataViz, Tableau, PowerBI, and Generative AI. Given those categories, please classify the following text with those categories: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>titulo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> - </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>resumo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">. You can use only the categories listed. You can classify with multiple categories. If you think that none of the categories applies, you can tag as Other."</span>,</span>
<span id="cb11-5">        temperature<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>,</span>
<span id="cb11-6">        max_tokens<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>,</span>
<span id="cb11-7">    )</span>
<span id="cb11-8">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> response.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].text.strip()</span></code></pre></div>
</div>
<p>Este código define uma função chamada “retorna_categorias” que recebe dois parâmetros: “titulo” e “resumo”. A função utiliza a API OpenAI para classificar o título e o resumo com base em um conjunto de categorias previamente determinadas - dbt, Python, DataViz, Tableau, PowerBI e Generative AI. Em seguida, retorna o resultado da classificação como uma string.</p>
<p>A função retorna então a primeira (e única) escolha da resposta da API OpenAI, que é a string que representa a categoria que foi escolhida como a melhor correspondência para o texto de entrada. O método strip() é usado para remover qualquer espaço em branco inicial ou final da string retornada.</p>
<p>Observação: Para usar este código, o módulo openai precisa ser importado e uma chave de API OpenAI precisa ser obtida.</p>
<div id="cell-34" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1">lista_final <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb12-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> artigos_comp:</span>
<span id="cb12-3">  item[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"categorias"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> retorna_categorias(item[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'titulo'</span>], item[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'resumo'</span>])</span>
<span id="cb12-4">  lista_final.append(item)</span></code></pre></div>
</div>
<p>Agora que executamos a rotina acima, podemos imprimir os três primeiros registros e verificar que agora, temos categorias.</p>
<div id="cell-36" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> idx, item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">enumerate</span>(lista_final):</span>
<span id="cb13-2">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(json.dumps(item, indent<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb13-3">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> idx <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>:</span>
<span id="cb13-4">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">break</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{
    "titulo": "Prompting ChatGPT for Python Code Generation: An Effective Framework",
    "link": "https://medium.com/p/e323b2d24987",
    "autores": "John Loewen",
    "resumo": "I\u2019ve done the prompt engineering research so you don\u2019t have to",
    "categorias": "Python, Generative AI"
}
{
    "titulo": "Power BI: How I Started Using Python To Automate Tasks",
    "link": "https://medium.com/p/9e9536ebd839",
    "autores": "Gabe Araujo, M.Sc.",
    "resumo": "Not available",
    "categorias": "PowerBI, Python"
}
{
    "titulo": "Chat with your databases using LangChain",
    "link": "https://medium.com/p/bb7d31ed2e76",
    "autores": "Vishnu Sivan",
    "resumo": "Not available",
    "categorias": "Other"
}</code></pre>
</div>
</div>
<p>E aí estão os nossos artigos, devidamente categorizados. Inclusive, podemos ver um artigo que foi classificado como “Other”, indicando que o texto que foi enviado não foi suficiente para classificar com as categorias selecionadas.</p>
<p>Obrigado por ler até aqui! Espero que este script seja útil para vocês!!!</p>
</section>
</section>
<section id="links-úteis" class="level2">
<h2 class="anchored" data-anchor-id="links-úteis">Links Úteis</h2>
<ol type="1">
<li><a href="https://www.openai.com/blog/gpt-3/">Understanding GPT-3: OpenAI’s Language Generation AI: Blog oficial da OpenAI sobre GPT-3</a> - Apresenta uma explicação detalhada do GPT-3 e seu uso potencial</li>
<li><a href="https://www.geeksforgeeks.org/ml-data-classification/">Data Classification in Machine Learning</a> - Este é um artigo do site GeeksforGeeks que explica o conceito básico de classificação de dados em aprendizado de máquina, os diferentes tipos de algoritmos de classificação e como eles funcionam.</li>
<li>Bibliotecas Python utilizadas no artigo:
<ol type="1">
<li><a href="https://requests.readthedocs.io/projects/requests-html/en/latest/">requests-html</a></li>
<li><a href="https://platform.openai.com/docs/api-reference">openai</a></li>
<li><a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">BeautifulSoup4</a></li>
</ol></li>
</ol>


</section>

 ]]></description>
  <category>OpenAI API</category>
  <guid>https://blog.wvcode.com.br/posts/p0004-classif-texto/</guid>
  <pubDate>Fri, 16 Jun 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/posts/p0004-classif-texto/nlp-text-classif.png" medium="image" type="image/png" height="48" width="144"/>
</item>
<item>
  <title>Power BI no Jupyter!</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/p0003-powerbiclient/</link>
  <description><![CDATA[ 





<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Se você é um entusiasta de visualização de dados, cientista de dados ou analista de negócios em busca de novas maneiras de explorar e compartilhar seus dados, este post é para você. Prepare-se para descobrir como o poder do Power BI pode ser desbloqueado dentro do Jupyter Notebook, ampliando suas possibilidades de análise e proporcionando uma experiência envolvente e interativa.</p>
</section>
<section id="powerbi---rápida-introdução" class="level2">
<h2 class="anchored" data-anchor-id="powerbi---rápida-introdução">PowerBI - Rápida Introdução</h2>
<p>O Power BI é uma poderosa ferramenta de business intelligence desenvolvida pela Microsoft, projetada para ajudar as empresas a visualizar e analisar seus dados de maneira intuitiva e interativa. Com recursos avançados de criação de relatórios, painéis e dashboards personalizados, o Power BI permite que os usuários transformem seus dados em informações acionáveis, facilitando a tomada de decisões informadas em tempo real. E todo esse poder pode ser entregue tanto de forma independente quanto integrada a outros meios, através do que chamamos de embedded reports.</p>
<section id="power-bi-embeddings" class="level3">
<h3 class="anchored" data-anchor-id="power-bi-embeddings">Power BI Embeddings</h3>
<p>As capacidades de embedding do Power BI permitem que os desenvolvedores incorporem relatórios, painéis e visualizações interativas do Power BI diretamente em seus aplicativos, sites ou portais. Essa funcionalidade de integração oferece uma maneira flexível e personalizada de compartilhar informações e insights com usuários finais, proporcionando uma experiência perfeita e integrada. Com as capacidades de embedding do Power BI, os desenvolvedores podem aproveitar as APIs e SDKs disponíveis para incorporar visualizações interativas em seus aplicativos existentes, personalizar a aparência e a funcionalidade, controlar a segurança e permissões de acesso aos dados e até mesmo habilitar recursos como filtragem dinâmica e interação com os dados subjacentes. Essa flexibilidade permite que as organizações integrem as poderosas capacidades analíticas do Power BI diretamente em seus fluxos de trabalho, fornecendo aos usuários acesso direto a informações relevantes e atualizadas, tudo dentro do contexto de sua própria aplicação.</p>
<p>Entre outros conhecimentos, para trabalhar com embeddings, é necessário compreender:</p>
<ol type="1">
<li><p>Linguagens de programação: Ter conhecimentos básicos de programação é fundamental para interagir com as APIs e SDKs do Power BI. Python, JavaScript e .NET são exemplos de linguagens comumente usadas.</p></li>
<li><p>Desenvolvimento web: Familiaridade com desenvolvimento web é importante para incorporar e personalizar visualizações do Power BI. Isso inclui conhecimentos em HTML, CSS e JavaScript para integrar o código do Power BI em aplicativos e sites.</p></li>
<li><p>Autenticação e segurança: Compreender os conceitos de autenticação e autorização é crucial para garantir a segurança dos dados. Isso envolve entender como autenticar usuários no Power BI e definir permissões de acesso adequadas.</p></li>
<li><p>Power BI Desktop e serviço Power BI: Ter conhecimento sobre o Power BI Desktop e o serviço Power BI é essencial. Isso inclui habilidades em criação de relatórios, painéis e visualizações interativas, além de recursos de filtragem e interação.</p></li>
<li><p>Modelagem e transformação de dados: Noções básicas de modelagem e transformação de dados são úteis para preparar os dados antes de incorporá-los. Isso envolve limpeza, filtragem e organização dos dados para criar visualizações eficazes.</p></li>
</ol>
<p>Neste post, exploraremos a integração do Power BI com o Jupyter Notebook, combinando a flexibilidade do ambiente de codificação do Python com a riqueza de recursos do Power BI. Descobriremos como utilizar a biblioteca <code>powerbiclient</code> para trazer o poder do Power BI para dentro de um Jupyter Notebook.</p>
</section>
</section>
<section id="biblioteca-powerbiclient" class="level2">
<h2 class="anchored" data-anchor-id="biblioteca-powerbiclient">Biblioteca <code>powerbiclient</code></h2>
<p>A biblioteca <code>powerbiclient</code> é uma ferramenta poderosa que permite interagir com o serviço do Power BI diretamente por meio de APIs. Essa biblioteca, desenvolvida pela Microsoft, fornece uma interface de programação fácil de usar para criar, publicar, atualizar e gerenciar relatórios, dashboards e conjuntos de dados no Power BI. Com o <code>powerbiclient</code>, os desenvolvedores podem automatizar tarefas, extrair informações e integrar o Power BI a aplicativos, permitindo a criação de soluções personalizadas e aprimorando a capacidade de visualização e análise de dados. Essa biblioteca é uma excelente opção para aqueles que desejam aproveitar ao máximo o ecossistema do Power BI e incorporar suas funcionalidades em seus próprios fluxos de trabalho e aplicativos.</p>
<p>Dentre todas as possibilidades que esta biblioteca oferece, vamos focar em como carregar gráficos interativos em Power BI dentro do nosso notebook Jupyter. E vamos lá, sem demora!</p>
</section>
<section id="preparando-o-ambiente" class="level2">
<h2 class="anchored" data-anchor-id="preparando-o-ambiente">Preparando o ambiente</h2>
<p>Como sempre, o nosso primeiro passo é instalar as bibliotecas que estão faltando.</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> pip install powerbiclient</span>
<span id="cb1-2"></span>
<span id="cb1-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Nosso</span> próximo passo é inicializar o ambiente, chamando nossas bibliotecas.</span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">:::</span> {#cell-11 .cell execution_count=4}</span>
<span id="cb1-6"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">```</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">{.python</span> .cell-code}</span>
<span id="cb1-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> powerbiclient import QuickVisualize, get_dataset_config, Report</span>
<span id="cb1-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">from</span> powerbiclient.authentication import DeviceCodeLoginAuthentication</span>
<span id="cb1-9"></span>
<span id="cb1-10"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">import</span> pandas as pd</span></code></pre></div>
<p>:::</p>
<p>Depois disso, vamos ao código de verdade!</p>
</section>
<section id="carregando-os-dados" class="level2">
<h2 class="anchored" data-anchor-id="carregando-os-dados">Carregando os dados</h2>
<p>A primeira tarefa, como em todo o trabalho de um cientista de dados, é carregar os dados em um DataFrame.</p>
<div id="cell-15" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1">pokemons <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pokemons.csv'</span>)</span></code></pre></div>
</div>
</section>
<section id="autenticando-no-serviço-do-power-bi" class="level2">
<h2 class="anchored" data-anchor-id="autenticando-no-serviço-do-power-bi">Autenticando no Serviço do Power BI</h2>
<p>Em seguida, temos que fazer a autenticação no serviço do Power BI. O Power BI, como todos os aplicativos do Office 365, requer que estejamos autenticados para utiliza-los. Aqui, o processo é simplificado, mas ainda requerido. Esse modo é o mais simples, se estiver interessado em outras maneiras, dê uma olhada mais a fundo na documentação da Microsoft.</p>
<div id="cell-18" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">device_auth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> DeviceCodeLoginAuthentication()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Performing device flow authentication. Please follow the instructions below.
To sign in, use a web browser to open the page https://microsoft.com/devicelogin and enter the code A8EL2Y8WJ to authenticate.

Device flow authentication successfully completed.
You are now logged in .

The result should be passed only to trusted code in your notebook.</code></pre>
</div>
</div>
</section>
<section id="visualizando" class="level2">
<h2 class="anchored" data-anchor-id="visualizando">Visualizando!</h2>
<p>O próximo passo é plotar o gráfico usando o Power BI. Neste post vamos explorar a classe <code>QuickVisualize</code> que nos entregará um tipo de sumário dos nossos dados, como em uma Análise Exploratória de Dados. Para isso, enviamos nosso DataFrame, o objeto de autenticação e chamamos a função <code>PBI_visualize</code>.</p>
<div id="cell-21" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create a Power BI report from your data</span></span>
<span id="cb5-2">PBI_visualize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> QuickVisualize(get_dataset_config(pokemons), auth<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>device_auth)</span>
<span id="cb5-3"></span>
<span id="cb5-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Render the new report</span></span>
<span id="cb5-5">PBI_visualize</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"43ce7f1b3c004463a9409fb5cd45a9d9","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
</div>
</section>
<section id="finalizando" class="level2">
<h2 class="anchored" data-anchor-id="finalizando">Finalizando</h2>
<p>E desta forma, conseguimos trazer o Power BI e todo o seu poder para dentro do nosso notebook! E essa é apenas uma das formas que temos para trabalhar com Power BI dentro do notebook! Se você quiser aprender mais, não deixe de acessar a documentação da biblioteca <code>powerbiclient</code> em <a href="https://github.com/Microsoft/powerbi-jupyter">Power BI - Jupyter</a>.</p>


</section>

 ]]></description>
  <category>Pandas</category>
  <category>Power BI</category>
  <category>Jupyter</category>
  <guid>https://blog.wvcode.com.br/posts/p0003-powerbiclient/</guid>
  <pubDate>Tue, 30 May 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/posts/p0003-powerbiclient/jupyterpowerbi.png" medium="image" type="image/png" height="50" width="144"/>
</item>
<item>
  <title>Pandas AI - Converse com seu DataFrame</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/p0002-pandasai/</link>
  <description><![CDATA[ 





<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Desde outubro do ano passado, com a liberação do ChatGPT 3.5, as interfaces conversacionais vem se popularizando de maneira muito rápida. É verdade que interfaces conversacionais não são novidade, e chatbots e assistentes virtuais vem dominando tarefas relacionadas a atendimento de clientes, mas desde o advento do ChatGPT, tem-se expandido para outras áreas de atuação.</p>
<p>Utilizamos o ChatGPT para criarmos resumos de textos longos, para consultar algo que ocorreu no passado, explicar conceitos e por aí vai. Já existem cursos que ensinam como utilizar o ChatGPT para criar campanhas de marketing nas redes sociais e outras tantas funções que são basicamente apoiadas em texto.</p>
<p>Dentro da programação, é possível gerar pequenos trechos de código e até páginas HTML e arquivos CSS inteiros.</p>
</section>
<section id="e-o-que-isso-tem-a-ver-com-ciências-de-dados" class="level2">
<h2 class="anchored" data-anchor-id="e-o-que-isso-tem-a-ver-com-ciências-de-dados">E o que isso tem a ver com Ciências de Dados?</h2>
<p>Os DataFrames são basicamente textos organizados em tabelas e colunas, que são correlacionados. Portanto, é possível carregar os dados em um modelo LLM (Large Language Model), habilitando a extração da informação destes DataFrames de maneira conversacional, como se estivéssemos dialogando. Mas o que realmente instiga esta nossa área é descobrir se podemos fazer este modelo realizar o trabalho de análise para nós, cientistas e analistas iniciantes (e até mesmo os mais experientes). A resposta mais recente que temos para isso é chamada de <code>Pandas AI</code>.</p>
</section>
<section id="o-que-é-o-pandas-ai" class="level2">
<h2 class="anchored" data-anchor-id="o-que-é-o-pandas-ai">O que é o Pandas AI?</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/p0002-pandasai/pandas-llamas.png" class="img-fluid figure-img"></p>
<figcaption>Pandas e Llamas</figcaption>
</figure>
</div>
<p>O Pandas AI é o melhor amigo do seu DataFrame! Com esta nova biblioteca, podemos dar aos nossos DataFrames a capacidade de serem consultados de maneira simples e eficiente, utilizando uma interface conversacional.</p>
<p>Então, vamos ver como podemos utilizar Pandas AI?</p>
<section id="preparando-o-ambiente" class="level3">
<h3 class="anchored" data-anchor-id="preparando-o-ambiente">Preparando o Ambiente</h3>
<p>A primeira coisa é garantir que seu ambiente tenha todas as bibliotecas necessárias instaladas: <code>Pandas</code>, <code>PandasAI</code>, <code>OpenAI</code>.</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> pip install pandas pandasai openai</span></code></pre></div>
<p>Então, vamos iniciar o nosso notebook. Temos que fazer o import das bibliotecas que vamos utilizar na nossa demonstração.</p>
<div id="cell-12" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb2-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> pandasai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> PandasAI</span>
<span id="cb2-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> pandasai.llm.openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb2-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span></code></pre></div>
</div>
<p>Observe que carregamos a função <code>load_dotenv</code>, pois iremos precisar carregar a chave de acesso para a API da OpenAI. Para fazer isso, podemos simplesmente executar a função.</p>
<div id="cell-14" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">load_dotenv()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>True</code></pre>
</div>
</div>
<p>O próximo passo é carregar os nossos dados no DataFrame. Como sempre, vamos utilizar o dataset de pokemons.</p>
<div id="cell-16" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1">pokemons <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pokemons.csv'</span>)</span></code></pre></div>
</div>
<p>Em seguida, vamos inicializar o LLM para que consigamos conversar com o nosso DataFrame.</p>
<div id="cell-18" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1">llm <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAI(api_token<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>os.environ[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'OPENAI_API_KEY'</span>])</span>
<span id="cb6-2">pandas_ai <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> PandasAI(llm)</span></code></pre></div>
</div>
<p>Até agora, tudo correu bem! Agora, podemos executar diversas vezes a função <code>pandas_ai.run</code>, passando nosso DataFrame e um prompt, e ele nos responderá. Vamos testar?</p>
<div id="cell-20" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1">pandas_ai.run(pokemons, prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Quantos pokemons temos no DataFrame?"</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>'Unfortunately, I was not able to answer your question. Please try again. If the problem persists, try rephrasing your question.'</code></pre>
</div>
</div>
<p>Para verificar isso, podemos apenas ver o shape do DataFrame e confirmar:</p>
<div id="cell-22" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1">pokemons.shape</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>(1032, 44)</code></pre>
</div>
</div>
<p>De fato, 1032 pokemons. Vamos continuar?</p>
<div id="cell-24" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1">pandas_ai.run(pokemons, prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Quantos tipos de pokemons existem?"</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<pre><code>'Well, there are actually 18 different types of pokemons out there!'</code></pre>
</div>
</div>
<p>Vamos conferir?</p>
<div id="cell-26" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1">tipos <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.concat([pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Type 1'</span>], pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Type 2'</span>]]).unique().tolist()</span>
<span id="cb13-2"></span>
<span id="cb13-3"></span>
<span id="cb13-4"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(tipos))</span>
<span id="cb13-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(tipos)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>19
['Grass', 'Fire', 'Water', 'Bug', 'Normal', 'Dark', 'Poison', 'Electric', 'Ground', 'Ice', 'Fairy', 'Steel', 'Fighting', 'Psychic', 'Rock', 'Ghost', 'Dragon', 'Flying', nan]</code></pre>
</div>
</div>
<p>Parece que funciona mesmo! Note que o nosso vetor tem 19 posições porque está contando o nulo como um valor. Vamos nos aprofundar mais um pouco…</p>
<div id="cell-28" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1">pandas_ai.run(pokemons, prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Liste os tipos com as quantidades de pokemons'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<pre><code>'Existem diversos tipos de pokemons e suas quantidades variam. O tipo mais comum é o Normal, com 114 pokemons, seguido pelo tipo Água, com 131. Já o tipo Voador é o menos comum, com apenas 8 pokemons. Além disso, existem outros tipos como Fogo, Grama, Elétrico, Psíquico, entre outros, cada um com sua quantidade específica de pokemons. No total, existem mais de 800 espécies diferentes de pokemons.'</code></pre>
</div>
</div>
<p>Ele respondeu, mas não exatamente como queríamos - observe que ele listou alguns tipos apenas com suas quantidades. Vamos tentar melhorar, aplicando um pouco de prompt engineering (ou seja, escrever nossa solicitação de forma mais explícita).</p>
<div id="cell-30" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1">pandas_ai.run(pokemons, prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Crie uma tabela que tem duas colunas: tipo de pokemon e quantidade. Liste todos os tipos possíveis e suas quantidades."</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>'Para responder à pergunta, criei uma tabela com duas colunas: tipo de pokemon e quantidade. Nessa tabela, listei todos os tipos possíveis de pokemon e suas respectivas quantidades. Por exemplo, há 81 pokemons do tipo Bug, 46 do tipo Dark, 42 do tipo Dragon, e assim por diante. No total, foram listados 18 tipos diferentes de pokemon e suas quantidades correspondentes.'</code></pre>
</div>
</div>
<p>Humm, ainda não conseguimos listar todos os tipos. Vamos explicar um pouco mais?</p>
<div id="cell-32" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1">pandas_ai.run(pokemons, prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gerar uma listagem completa da quantidade de pokemons por tipo, em formato markdown."</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>'Para saber a quantidade de pokemons por tipo, podemos gerar uma listagem completa em formato markdown. Aqui está a tabela com o número de pokemons para cada tipo: \n\n| Type | Count |\n|------|-------|\n| Bug | 81 |\n| Dark | 46 |\n| Dragon | 42 |\n| Electric | 59 |\n| Fairy | 22 |\n| Fighting | 42 |\n| Fire | 64 |\n| Flying | 8 |\n| Ghost | 41 |\n| Grass | 91 |\n| Ground | 41 |\n| Ice | 38 |\n| Normal | 114 |\n| Poison | 40 |\n| Psychic | 77 |\n| Rock | 59 |\n| Steel | 36 |\n| Water | 131 |\n\nAssim, você pode ter uma visão geral da distribuição dos tipos de pokemons na lista.'</code></pre>
</div>
</div>
<p>Opa,agora foi. Mas como o notebook não formata markdown no output, precisamos fazer um copia e cola do resultado.</p>
<p>Para saber a quantidade de pokemons por tipo, podemos gerar uma listagem completa em formato markdown. Aqui está a tabela com o número de pokemons para cada tipo:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Type</th>
<th>Count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Bug</td>
<td>81</td>
</tr>
<tr class="even">
<td>Dark</td>
<td>46</td>
</tr>
<tr class="odd">
<td>Dragon</td>
<td>42</td>
</tr>
<tr class="even">
<td>Electric</td>
<td>59</td>
</tr>
<tr class="odd">
<td>Fairy</td>
<td>22</td>
</tr>
<tr class="even">
<td>Fighting</td>
<td>42</td>
</tr>
<tr class="odd">
<td>Fire</td>
<td>64</td>
</tr>
<tr class="even">
<td>Flying</td>
<td>8</td>
</tr>
<tr class="odd">
<td>Ghost</td>
<td>41</td>
</tr>
<tr class="even">
<td>Grass</td>
<td>91</td>
</tr>
<tr class="odd">
<td>Ground</td>
<td>41</td>
</tr>
<tr class="even">
<td>Ice</td>
<td>38</td>
</tr>
<tr class="odd">
<td>Normal</td>
<td>114</td>
</tr>
<tr class="even">
<td>Poison</td>
<td>40</td>
</tr>
<tr class="odd">
<td>Psychic</td>
<td>77</td>
</tr>
<tr class="even">
<td>Rock</td>
<td>59</td>
</tr>
<tr class="odd">
<td>Steel</td>
<td>36</td>
</tr>
<tr class="even">
<td>Water</td>
<td>131</td>
</tr>
</tbody>
</table>
<p>Assim, você pode ter uma visão geral da distribuição dos tipos de pokemons na lista.’</p>
</section>
</section>
<section id="vamos-complicar-um-pouco" class="level2">
<h2 class="anchored" data-anchor-id="vamos-complicar-um-pouco">Vamos complicar um pouco?</h2>
<p>Nas primeiras perguntas, utilizamos perguntas que pedem respostas quase que diretas das métricas que temos no DataFrame. Contamos o número de pokemons, contamos valores distinto de tipos, agrupamos a contagem por tipos. Mas será que o Pandas AI pode fazer uma análise comparativa simples, tal como analisar uma métrica e retornar o insight solicitado?</p>
<div id="cell-36" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1">pandas_ai.run(pokemons, prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Qual o pokemon mais pesado?"</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<pre><code>'Bem, o pokemon mais pesado é o Snorlax, ele pode chegar a pesar mais de 460 quilos!'</code></pre>
</div>
</div>
<p>Opa, e não é que respondeu? Mas, sem precipitação, vamos conferir: vamos executar uma query em pandas que filtra os pokemons com peso &gt;= ao do Snorlax.</p>
<div id="cell-38" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1">pokemons[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Name"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Weight"</span>]].sort_values(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Weight"</span>).query(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Weight &gt; 459"</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Weight</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">925</td>
<td>Dusk Mane Necrozma</td>
<td>460.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">181</td>
<td>Snorlax</td>
<td>460.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">837</td>
<td>Hoopa Unbound</td>
<td>490.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">826</td>
<td>Avalugg</td>
<td>505.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1001</td>
<td>Stonjourner</td>
<td>520.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">445</td>
<td>Metagross</td>
<td>550.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">833</td>
<td>Zygarde Complete</td>
<td>610.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">578</td>
<td>Giratina-Origin</td>
<td>650.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1007</td>
<td>Copperajah</td>
<td>650.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">573</td>
<td>Dialga</td>
<td>683.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">254</td>
<td>Mega Steelix</td>
<td>740.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">577</td>
<td>Giratina</td>
<td>750.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1019</td>
<td>Zamazenta Crowned Shield</td>
<td>785.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1027</td>
<td>Glastrier</td>
<td>800.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">936</td>
<td>Melmetal</td>
<td>800.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1030</td>
<td>Calyrex Ice Rider</td>
<td>809.1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">932</td>
<td>Stakataka</td>
<td>820.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">923</td>
<td>Guzzlord</td>
<td>888.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">873</td>
<td>Mudsdale</td>
<td>920.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">446</td>
<td>Mega Metagross</td>
<td>942.9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1020</td>
<td>Eternatus</td>
<td>950.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">456</td>
<td>Groudon</td>
<td>950.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">457</td>
<td>Primal Groudon</td>
<td>999.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">914</td>
<td>Cosmoem</td>
<td>999.9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">921</td>
<td>Celesteela</td>
<td>999.9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Ops, algo deu errado. Temos vários pokemons mais pesados. Será que ele não analisou todos os pokemons antes de responder? Quem sabe um problema nos dados? Vamos perguntar algo mais direto.</p>
<div id="cell-40" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1">pandas_ai.run(pokemons, prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"O pokemon Dialga é mais ou menos pesado que o Snorlax?"</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>'Well, it turns out that Snorlax is actually heavier than Dialga.'</code></pre>
</div>
</div>
<p>Isso certamente deve ser um problema. Ele passou a responder em inglês, como se tivesse perdido o contexto. Vamos perguntar de maneira diferente…</p>
<div id="cell-42" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1">pandas_ai.run(pokemons, prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Porque o pokemon Dialga é mais pesado que o Snorlax?"</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>'Well, actually, Snorlax weighs more than Dialga.'</code></pre>
</div>
</div>
<p>É, ele realmente tem uma implicância com o Snorlax… Caso você não tenha lido nada a respeito do ChatGPT e LLMs em geral, esse tipo de erro é chamado de “alucinação” que ocorre quando o modelo produz resultados incorretos, correlacionando informações de maneira espúria.</p>
</section>
<section id="usando-outras-funcionalidades-do-pandas-via-conversação" class="level2">
<h2 class="anchored" data-anchor-id="usando-outras-funcionalidades-do-pandas-via-conversação">Usando outras funcionalidades do Pandas via conversação</h2>
<p>Agora vamos testar se o pandasAI consegue entender instruções para plotar gráficos. Isso é um DataFrame pandas, correto? Será que eu posso plotar um countplot() por geração?</p>
<div id="cell-45" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1">pandas_ai.run(pokemons, prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Plote um gráfico de colunas totalizando pokemons por geração."</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/p0002-pandasai/index_files/figure-html/cell-17-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>'Claro! Vou plotar um gráfico de colunas que mostra a quantidade total de pokemons por geração.'</code></pre>
</div>
</div>
<p>Parece que funcionou bem! Vamos tentar mais um?</p>
<div id="cell-47" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"></span>
<span id="cb30-2">pandas_ai.run(pokemons, prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Plote um gráfico de pizza totalizando pokemons pelo campo lendário."</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/p0002-pandasai/index_files/figure-html/cell-18-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>'Sure, I can help you with that! To plot a pie chart showing the total number of legendary Pokémon, we need to gather the data first. Once we have the numbers, we can create a visual representation of the data using a pie chart. Would you like me to proceed with the task?'</code></pre>
</div>
</div>
</section>
<section id="o-que-aprendemos-até-aqui" class="level2">
<h2 class="anchored" data-anchor-id="o-que-aprendemos-até-aqui">O que aprendemos até aqui</h2>
<p>A biblioteca Pandas AI é uma biblioteca interessante, que nos permite “dialogar”com nossos DataFrames, extraindo informações do mesmo. Através de nossos exemplos, podemos verificar que quase tudo que podemos descobrir através de consultas normais pandas, podemos perguntar ao DataFrame através do Pandas AI.</p>
<section id="mas-nem-tudo-são-flores" class="level3">
<h3 class="anchored" data-anchor-id="mas-nem-tudo-são-flores">Mas nem tudo são flores…</h3>
<p>Apesar dos acertos, observamos que a biblioteca Pandas AI não é imune aos problemas comuns das LLM, e mesmo com uma base de conhecimento mais limitada, é acometida de alucinações. A biblioteca também sofre de um problema de performance: uma resposta que em pandas leva um segundo ou menos para ser mostrada, como podemos ver, pode levar até mais de 1 minuto usando PandasAI.</p>
<p>Por último, podemos perceber que a biblioteca ainda precisa um pouco mais de trabalho até mesmo em sua usabilidade - notamos que a mesma passa a responder em inglês quando a resposta está errada, deixando o usuário confuso.</p>
</section>
</section>
<section id="vale-a-pena-utilizar" class="level2">
<h2 class="anchored" data-anchor-id="vale-a-pena-utilizar">Vale a pena utilizar?</h2>
<p>Se você quer fazer explorações simples dos dados, parece ser uma boa idéia utilizar o PandasAI, visto que é mais fácil perguntar em português ou inglês do que lembrar a sintaxe de todos os comandos Pandas que você teria que fazer para isso. No entanto, é preciso tomar muito cuidado com os resultados, que podem estar errados, mas são comunicados com convicção.</p>
<p>É, com certeza, mais uma ferramenta no seu cinto de utilidades de cientista de dados, e como toda ferramenta, devemos conhece-la bem antes de usar. Explore mais, entenda suas limitações e faça o melhor uso possivel!</p>
<p>Até mais!!!</p>
<p>Walter.</p>


</section>

 ]]></description>
  <category>Ciência de Dados</category>
  <category>Pandas</category>
  <category>AI</category>
  <category>GPT</category>
  <guid>https://blog.wvcode.com.br/posts/p0002-pandasai/</guid>
  <pubDate>Mon, 29 May 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/posts/p0002-pandasai/panda-001.png" medium="image" type="image/png" height="144" width="144"/>
</item>
<item>
  <title>[VDP] Aula 16 - Criando Visualizações Efetivas</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-116/</link>
  <description><![CDATA[ 





<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Olá Cientista de Dados!</p>
<p>Para encerrarmos nosso curso com chave de ouro, iremos deixar dois gráficos prontos para serem utilizados em apresentações, levando em consideração as boas práticas.</p>
<p>Para isso, vamos aprender a configurar o objeto <code>Figure</code>.</p>
<section id="objeto-figure" class="level3">
<h3 class="anchored" data-anchor-id="objeto-figure">Objeto Figure</h3>
<p>O objeto Figure é a base para criar gráficos interativos com o Plotly em Python. Ele contém todas as informações necessárias para desenhar um gráfico completo, incluindo dados, layout e opções de estilo. As propriedades do objeto Figure podem ser divididas em três categorias principais: dados (data), layout e opções de estilo (config).</p>
</section>
<section id="categorias" class="level3">
<h3 class="anchored" data-anchor-id="categorias">Categorias</h3>
<ul>
<li>Dados (data): As propriedades do objeto Figure relacionadas aos dados são usadas para especificar os dados que serão plotados no gráfico. Isso inclui o tipo de gráfico, as séries de dados e as opções de estilo para cada série.</li>
<li>Layout: As propriedades do objeto Figure relacionadas ao layout são usadas para especificar a aparência geral do gráfico, como os títulos, as legendas, as escalas e os eixos.</li>
<li>Opções de estilo (config): As propriedades do objeto Figure relacionadas às opções de estilo são usadas para especificar as opções de estilo gerais para o gráfico, como o tema e a cor de fundo.</li>
</ul>
<p>Essas são as principais propriedades do objeto Figure do Plotly. Combinando essas propriedades de acordo com as necessidades do usuário, é possível criar gráficos altamente personalizados e interativos no Python.</p>
</section>
</section>
<section id="preparando-ambiente" class="level2">
<h2 class="anchored" data-anchor-id="preparando-ambiente">Preparando Ambiente</h2>
<div id="cell-6" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> duckdb <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> dk</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> plotly.express <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> px</span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Importando as extensão para utilizar comandos SQL</span></span>
<span id="cb1-6"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>reload_ext sql</span>
<span id="cb1-7"></span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Criando um banco de dados em memória, para otimizar performance</span></span>
<span id="cb1-9"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>sql duckdb:<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">///</span>:memory:</span></code></pre></div>
</div>
</section>
<section id="carregando-dados" class="level2">
<h2 class="anchored" data-anchor-id="carregando-dados">Carregando Dados</h2>
<div id="cell-8" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1">salaries <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://github.com/labeduc/datasets/blob/main/ds-salaries/ds_salaries.csv?raw=true'</span>)</span>
<span id="cb2-2"></span>
<span id="cb2-3"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>sql CREATE TABLE IF NOT EXISTS salaries_full AS SELECT <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> FROM salaries</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>*  duckdb:///:memory:
Done.</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="15">
<table class="caption-top" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Count</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>
</div>
</section>
<section id="gerando-um-gráfico-de-barras" class="level2">
<h2 class="anchored" data-anchor-id="gerando-um-gráfico-de-barras">Gerando um Gráfico de Barras</h2>
<div id="cell-10" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%%</span>sql</span>
<span id="cb4-2">SELECT <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb4-3">  FROM salaries_full</span>
<span id="cb4-4"> WHERE job_title <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data Engineer'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data Scientist'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data Analyst'</span>)</span>
<span id="cb4-5"> LIMIT <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>*  duckdb:///:memory:
Done.</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="16">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">id</th>
<th data-quarto-table-cell-role="th">work_year</th>
<th data-quarto-table-cell-role="th">experience_level</th>
<th data-quarto-table-cell-role="th">employment_type</th>
<th data-quarto-table-cell-role="th">job_title</th>
<th data-quarto-table-cell-role="th">salary</th>
<th data-quarto-table-cell-role="th">salary_currency</th>
<th data-quarto-table-cell-role="th">salary_in_usd</th>
<th data-quarto-table-cell-role="th">employee_residence</th>
<th data-quarto-table-cell-role="th">remote_ratio</th>
<th data-quarto-table-cell-role="th">company_location</th>
<th data-quarto-table-cell-role="th">company_size</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>16</td>
<td>2020</td>
<td>EN</td>
<td>FT</td>
<td>Data Engineer</td>
<td>4450000</td>
<td>JPY</td>
<td>41689</td>
<td>JP</td>
<td>100</td>
<td>JP</td>
<td>S</td>
</tr>
<tr class="even">
<td>22</td>
<td>2020</td>
<td>SE</td>
<td>FT</td>
<td>Data Engineer</td>
<td>42000</td>
<td>EUR</td>
<td>47899</td>
<td>GR</td>
<td>50</td>
<td>GR</td>
<td>L</td>
</tr>
<tr class="odd">
<td>27</td>
<td>2020</td>
<td>SE</td>
<td>FT</td>
<td>Data Engineer</td>
<td>720000</td>
<td>MXN</td>
<td>33511</td>
<td>MX</td>
<td>0</td>
<td>MX</td>
<td>S</td>
</tr>
<tr class="even">
<td>35</td>
<td>2020</td>
<td>MI</td>
<td>FT</td>
<td>Data Engineer</td>
<td>65000</td>
<td>EUR</td>
<td>74130</td>
<td>AT</td>
<td>50</td>
<td>AT</td>
<td>L</td>
</tr>
<tr class="odd">
<td>43</td>
<td>2020</td>
<td>MI</td>
<td>FT</td>
<td>Data Engineer</td>
<td>106000</td>
<td>USD</td>
<td>106000</td>
<td>US</td>
<td>100</td>
<td>US</td>
<td>L</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>O gráfico de barras deve comparar o salário de três cargos: Data Engineer, Data Scientist, Data Analyst ao longo do tempo.</p>
<div id="cell-12" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%%</span>sql </span>
<span id="cb6-2">sal_gb <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;&lt;</span> select work_year, job_title, avg(salary_in_usd) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> avg_salary_in_usd </span>
<span id="cb6-3">            <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> salaries_full</span>
<span id="cb6-4">           where job_title <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data Engineer'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data Scientist'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data Analyst'</span>) </span>
<span id="cb6-5">        group by work_year, job_title</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>*  duckdb:///:memory:
Done.</code></pre>
</div>
</div>
<div id="cell-13" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.bar(sal_gb, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'work_year'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'avg_salary_in_usd'</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'job_title'</span>)</span>
<span id="cb8-2"></span>
<span id="cb8-3">fig.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<pre><code>Unable to display output for mime type(s): application/vnd.plotly.v1+json</code></pre>
</div>
</div>
</section>
<section id="escolhendo-o-tipo-de-gráfico" class="level2">
<h2 class="anchored" data-anchor-id="escolhendo-o-tipo-de-gráfico">Escolhendo o Tipo de Gráfico</h2>
<p>Nesse primeiro passo de otimização, temos que refletir se o gráfico proposto realmente entrega de maneira clara a informação que foi solicitada. Olhando a tabela de Gráficos X Objetivos da nossa primeira aula, podemos perceber que sim, o gráfico de barra é o mais indicado.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-116/visualizacao_x_objetivo.png" class="img-fluid figure-img"></p>
<figcaption>Visualização X Objetivo</figcaption>
</figure>
</div>
<p>No entanto, esse formato de barra empilhada (stacked) não permite uma boa comparação ano a ano de cada série de informação. Talvez seja melhor apenas colocar as barras lado a lado.</p>
<div id="cell-18" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.bar(sal_gb, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'work_year'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'avg_salary_in_usd'</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'job_title'</span>, barmode<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"group"</span>)</span>
<span id="cb10-2"></span>
<span id="cb10-3">fig.show(renderer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'notebook'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="5c14527a-eb92-49c4-95b1-13276b02739c" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("5c14527a-eb92-49c4-95b1-13276b02739c")) {                    Plotly.newPlot(                        "5c14527a-eb92-49c4-95b1-13276b02739c",                        [{"alignmentgroup":"True","hovertemplate":"job_title=Data Engineer<br>work_year=%{x}<br>avg_salary_in_usd=%{y}<extra></extra>","legendgroup":"Data Engineer","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"Data Engineer","offsetgroup":"Data Engineer","orientation":"v","showlegend":true,"textposition":"auto","x":[2020,2021,2022],"xaxis":"x","y":[88162.0,83202.53125,126375.69662921349],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"job_title=Data Scientist<br>work_year=%{x}<br>avg_salary_in_usd=%{y}<extra></extra>","legendgroup":"Data Scientist","marker":{"color":"#EF553B","pattern":{"shape":""}},"name":"Data Scientist","offsetgroup":"Data Scientist","orientation":"v","showlegend":true,"textposition":"auto","x":[2020,2021,2022],"xaxis":"x","y":[85970.52380952382,70671.73333333334,136172.0909090909],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"job_title=Data Analyst<br>work_year=%{x}<br>avg_salary_in_usd=%{y}<extra></extra>","legendgroup":"Data Analyst","marker":{"color":"#00cc96","pattern":{"shape":""}},"name":"Data Analyst","offsetgroup":"Data Analyst","orientation":"v","showlegend":true,"textposition":"auto","x":[2020,2021,2022],"xaxis":"x","y":[45547.28571428572,79505.41176470589,100550.7397260274],"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"work_year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"avg_salary_in_usd"}},"legend":{"title":{"text":"job_title"},"tracegroupgap":0},"margin":{"t":60},"barmode":"group"},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('5c14527a-eb92-49c4-95b1-13276b02739c');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
<section id="adicionando-título" class="level2">
<h2 class="anchored" data-anchor-id="adicionando-título">Adicionando Título</h2>
<p>Para iniciar nossas configurações do gráfico, vamos utilizar o approach utilizar a função <code>update_layout()</code>. Esta função recebe um objeto contendo a configuração para plotar o gráfico.</p>
<div id="cell-21" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.bar(sal_gb, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'work_year'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'avg_salary_in_usd'</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'job_title'</span>, barmode<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"group"</span>)</span>
<span id="cb11-2"></span>
<span id="cb11-3">configuracao <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb11-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Comparação dos Salários"</span>},</span>
<span id="cb11-5">}</span>
<span id="cb11-6"></span>
<span id="cb11-7">fig.update_layout(configuracao)</span>
<span id="cb11-8">fig.show(renderer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'notebook'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="bcc0ea62-f0eb-465a-9eef-f692718d14a7" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("bcc0ea62-f0eb-465a-9eef-f692718d14a7")) {                    Plotly.newPlot(                        "bcc0ea62-f0eb-465a-9eef-f692718d14a7",                        [{"alignmentgroup":"True","hovertemplate":"job_title=Data Engineer<br>work_year=%{x}<br>avg_salary_in_usd=%{y}<extra></extra>","legendgroup":"Data Engineer","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"Data Engineer","offsetgroup":"Data Engineer","orientation":"v","showlegend":true,"textposition":"auto","x":[2020,2021,2022],"xaxis":"x","y":[88162.0,83202.53125,126375.69662921349],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"job_title=Data Scientist<br>work_year=%{x}<br>avg_salary_in_usd=%{y}<extra></extra>","legendgroup":"Data Scientist","marker":{"color":"#EF553B","pattern":{"shape":""}},"name":"Data Scientist","offsetgroup":"Data Scientist","orientation":"v","showlegend":true,"textposition":"auto","x":[2020,2021,2022],"xaxis":"x","y":[85970.52380952382,70671.73333333334,136172.0909090909],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"job_title=Data Analyst<br>work_year=%{x}<br>avg_salary_in_usd=%{y}<extra></extra>","legendgroup":"Data Analyst","marker":{"color":"#00cc96","pattern":{"shape":""}},"name":"Data Analyst","offsetgroup":"Data Analyst","orientation":"v","showlegend":true,"textposition":"auto","x":[2020,2021,2022],"xaxis":"x","y":[45547.28571428572,79505.41176470589,100550.7397260274],"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"work_year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"avg_salary_in_usd"}},"legend":{"title":{"text":"job_title"},"tracegroupgap":0},"margin":{"t":60},"barmode":"group","title":{"text":"Compara\u00e7\u00e3o dos Sal\u00e1rios"}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('bcc0ea62-f0eb-465a-9eef-f692718d14a7');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
<section id="ajustando-legenda" class="level2">
<h2 class="anchored" data-anchor-id="ajustando-legenda">Ajustando Legenda</h2>
<div id="cell-23" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.bar(sal_gb, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'work_year'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'avg_salary_in_usd'</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'job_title'</span>, barmode<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"group"</span>)</span>
<span id="cb12-2"></span>
<span id="cb12-3">configuracao <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb12-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Comparação dos Salários"</span>},</span>
<span id="cb12-5">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cargos"</span>}}</span>
<span id="cb12-6">}</span>
<span id="cb12-7"></span>
<span id="cb12-8">fig.update_layout(configuracao)</span>
<span id="cb12-9">fig.show(renderer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'notebook'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="f09fa1bc-f71c-4d29-a77f-26db2fb0ec23" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("f09fa1bc-f71c-4d29-a77f-26db2fb0ec23")) {                    Plotly.newPlot(                        "f09fa1bc-f71c-4d29-a77f-26db2fb0ec23",                        [{"alignmentgroup":"True","hovertemplate":"job_title=Data Engineer<br>work_year=%{x}<br>avg_salary_in_usd=%{y}<extra></extra>","legendgroup":"Data Engineer","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"Data Engineer","offsetgroup":"Data Engineer","orientation":"v","showlegend":true,"textposition":"auto","x":[2020,2021,2022],"xaxis":"x","y":[88162.0,83202.53125,126375.69662921349],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"job_title=Data Scientist<br>work_year=%{x}<br>avg_salary_in_usd=%{y}<extra></extra>","legendgroup":"Data Scientist","marker":{"color":"#EF553B","pattern":{"shape":""}},"name":"Data Scientist","offsetgroup":"Data Scientist","orientation":"v","showlegend":true,"textposition":"auto","x":[2020,2021,2022],"xaxis":"x","y":[85970.52380952382,70671.73333333334,136172.0909090909],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"job_title=Data Analyst<br>work_year=%{x}<br>avg_salary_in_usd=%{y}<extra></extra>","legendgroup":"Data Analyst","marker":{"color":"#00cc96","pattern":{"shape":""}},"name":"Data Analyst","offsetgroup":"Data Analyst","orientation":"v","showlegend":true,"textposition":"auto","x":[2020,2021,2022],"xaxis":"x","y":[45547.28571428572,79505.41176470589,100550.7397260274],"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"work_year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"avg_salary_in_usd"}},"legend":{"title":{"text":"Cargos"},"tracegroupgap":0},"margin":{"t":60},"barmode":"group","title":{"text":"Compara\u00e7\u00e3o dos Sal\u00e1rios"}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('f09fa1bc-f71c-4d29-a77f-26db2fb0ec23');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
<section id="ajustando-eixos" class="level2">
<h2 class="anchored" data-anchor-id="ajustando-eixos">Ajustando Eixos</h2>
<p>Agora, vamos remover o eixo Y, além de corrigir o título do eixo X.</p>
<div id="cell-26" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.bar(sal_gb, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'work_year'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'avg_salary_in_usd'</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'job_title'</span>, barmode<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"group"</span>)</span>
<span id="cb13-2"></span>
<span id="cb13-3">configuracao <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb13-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Comparação dos Salários"</span>},</span>
<span id="cb13-5">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cargos"</span>}},</span>
<span id="cb13-6">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yaxis"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"visible"</span>: <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>},</span>
<span id="cb13-7">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"xaxis"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ano"</span>},</span>
<span id="cb13-8">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"margin"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"l"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>}</span>
<span id="cb13-9">}</span>
<span id="cb13-10"></span>
<span id="cb13-11">fig.update_layout(configuracao)</span>
<span id="cb13-12">fig.show(renderer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'notebook'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="6dc660db-d69a-429c-a40e-e4f22e02224e" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("6dc660db-d69a-429c-a40e-e4f22e02224e")) {                    Plotly.newPlot(                        "6dc660db-d69a-429c-a40e-e4f22e02224e",                        [{"alignmentgroup":"True","hovertemplate":"job_title=Data Engineer<br>work_year=%{x}<br>avg_salary_in_usd=%{y}<extra></extra>","legendgroup":"Data Engineer","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"Data Engineer","offsetgroup":"Data Engineer","orientation":"v","showlegend":true,"textposition":"auto","x":[2020,2021,2022],"xaxis":"x","y":[88162.0,83202.53125,126375.69662921349],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"job_title=Data Scientist<br>work_year=%{x}<br>avg_salary_in_usd=%{y}<extra></extra>","legendgroup":"Data Scientist","marker":{"color":"#EF553B","pattern":{"shape":""}},"name":"Data Scientist","offsetgroup":"Data Scientist","orientation":"v","showlegend":true,"textposition":"auto","x":[2020,2021,2022],"xaxis":"x","y":[85970.52380952382,70671.73333333334,136172.0909090909],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"job_title=Data Analyst<br>work_year=%{x}<br>avg_salary_in_usd=%{y}<extra></extra>","legendgroup":"Data Analyst","marker":{"color":"#00cc96","pattern":{"shape":""}},"name":"Data Analyst","offsetgroup":"Data Analyst","orientation":"v","showlegend":true,"textposition":"auto","x":[2020,2021,2022],"xaxis":"x","y":[45547.28571428572,79505.41176470589,100550.7397260274],"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Ano"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"avg_salary_in_usd"},"visible":false},"legend":{"title":{"text":"Cargos"},"tracegroupgap":0},"margin":{"t":60,"l":10,"b":10},"barmode":"group","title":{"text":"Compara\u00e7\u00e3o dos Sal\u00e1rios"}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('6dc660db-d69a-429c-a40e-e4f22e02224e');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
<section id="removendo-background" class="level2">
<h2 class="anchored" data-anchor-id="removendo-background">Removendo Background</h2>
<div id="cell-28" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.bar(sal_gb, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'work_year'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'avg_salary_in_usd'</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'job_title'</span>, barmode<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"group"</span>)</span>
<span id="cb14-2"></span>
<span id="cb14-3">configuracao <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb14-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Comparação dos Salários"</span>},</span>
<span id="cb14-5">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cargos"</span>}},</span>
<span id="cb14-6">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yaxis"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"visible"</span>: <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>},</span>
<span id="cb14-7">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"xaxis"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ano"</span>},</span>
<span id="cb14-8">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"margin"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"l"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>},</span>
<span id="cb14-9">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plot_bgcolor"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#FFFFFF"</span>,</span>
<span id="cb14-10">}</span>
<span id="cb14-11"></span>
<span id="cb14-12">fig.update_layout(configuracao)</span>
<span id="cb14-13">fig.show(renderer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'notebook'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="cc56657e-8b5e-4ad8-bafd-fc3bbace723c" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("cc56657e-8b5e-4ad8-bafd-fc3bbace723c")) {                    Plotly.newPlot(                        "cc56657e-8b5e-4ad8-bafd-fc3bbace723c",                        [{"alignmentgroup":"True","hovertemplate":"job_title=Data Engineer<br>work_year=%{x}<br>avg_salary_in_usd=%{y}<extra></extra>","legendgroup":"Data Engineer","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"Data Engineer","offsetgroup":"Data Engineer","orientation":"v","showlegend":true,"textposition":"auto","x":[2020,2021,2022],"xaxis":"x","y":[88162.0,83202.53125,126375.69662921349],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"job_title=Data Scientist<br>work_year=%{x}<br>avg_salary_in_usd=%{y}<extra></extra>","legendgroup":"Data Scientist","marker":{"color":"#EF553B","pattern":{"shape":""}},"name":"Data Scientist","offsetgroup":"Data Scientist","orientation":"v","showlegend":true,"textposition":"auto","x":[2020,2021,2022],"xaxis":"x","y":[85970.52380952382,70671.73333333334,136172.0909090909],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"job_title=Data Analyst<br>work_year=%{x}<br>avg_salary_in_usd=%{y}<extra></extra>","legendgroup":"Data Analyst","marker":{"color":"#00cc96","pattern":{"shape":""}},"name":"Data Analyst","offsetgroup":"Data Analyst","orientation":"v","showlegend":true,"textposition":"auto","x":[2020,2021,2022],"xaxis":"x","y":[45547.28571428572,79505.41176470589,100550.7397260274],"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Ano"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"avg_salary_in_usd"},"visible":false},"legend":{"title":{"text":"Cargos"},"tracegroupgap":0},"margin":{"t":60,"l":10,"b":10},"barmode":"group","title":{"text":"Compara\u00e7\u00e3o dos Sal\u00e1rios"},"plot_bgcolor":"#FFFFFF"},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('cc56657e-8b5e-4ad8-bafd-fc3bbace723c');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
<section id="adicionando-labels" class="level2">
<h2 class="anchored" data-anchor-id="adicionando-labels">Adicionando Labels</h2>
<div id="cell-30" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.bar(sal_gb, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'work_year'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'avg_salary_in_usd'</span>, </span>
<span id="cb15-2">             text<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'avg_salary_in_usd'</span>, </span>
<span id="cb15-3">             text_auto<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".2s"</span>, </span>
<span id="cb15-4">             color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'job_title'</span>, </span>
<span id="cb15-5">             barmode<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"group"</span>)</span>
<span id="cb15-6"></span>
<span id="cb15-7">configuracao <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb15-8">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Comparação dos Salários"</span>},</span>
<span id="cb15-9">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cargos"</span>}},</span>
<span id="cb15-10">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yaxis"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"visible"</span>: <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>},</span>
<span id="cb15-11">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"xaxis"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ano"</span>},</span>
<span id="cb15-12">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"margin"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"l"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>},</span>
<span id="cb15-13">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plot_bgcolor"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#FFFFFF"</span></span>
<span id="cb15-14">}</span>
<span id="cb15-15"></span>
<span id="cb15-16">fig.update_layout(configuracao)</span>
<span id="cb15-17">fig.show(renderer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'notebook'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="04ab7083-24d1-4349-953f-b552a0b5ae5a" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("04ab7083-24d1-4349-953f-b552a0b5ae5a")) {                    Plotly.newPlot(                        "04ab7083-24d1-4349-953f-b552a0b5ae5a",                        [{"alignmentgroup":"True","hovertemplate":"job_title=Data Engineer<br>work_year=%{x}<br>avg_salary_in_usd=%{text}<extra></extra>","legendgroup":"Data Engineer","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"Data Engineer","offsetgroup":"Data Engineer","orientation":"v","showlegend":true,"text":[88162.0,83202.53125,126375.69662921349],"textposition":"auto","texttemplate":"%{y:.2s}","x":[2020,2021,2022],"xaxis":"x","y":[88162.0,83202.53125,126375.69662921349],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"job_title=Data Scientist<br>work_year=%{x}<br>avg_salary_in_usd=%{text}<extra></extra>","legendgroup":"Data Scientist","marker":{"color":"#EF553B","pattern":{"shape":""}},"name":"Data Scientist","offsetgroup":"Data Scientist","orientation":"v","showlegend":true,"text":[85970.52380952382,70671.73333333334,136172.0909090909],"textposition":"auto","texttemplate":"%{y:.2s}","x":[2020,2021,2022],"xaxis":"x","y":[85970.52380952382,70671.73333333334,136172.0909090909],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"job_title=Data Analyst<br>work_year=%{x}<br>avg_salary_in_usd=%{text}<extra></extra>","legendgroup":"Data Analyst","marker":{"color":"#00cc96","pattern":{"shape":""}},"name":"Data Analyst","offsetgroup":"Data Analyst","orientation":"v","showlegend":true,"text":[45547.28571428572,79505.41176470589,100550.7397260274],"textposition":"auto","texttemplate":"%{y:.2s}","x":[2020,2021,2022],"xaxis":"x","y":[45547.28571428572,79505.41176470589,100550.7397260274],"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Ano"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"avg_salary_in_usd"},"visible":false},"legend":{"title":{"text":"Cargos"},"tracegroupgap":0},"margin":{"t":60,"l":10,"b":10},"barmode":"group","title":{"text":"Compara\u00e7\u00e3o dos Sal\u00e1rios"},"plot_bgcolor":"#FFFFFF"},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('04ab7083-24d1-4349-953f-b552a0b5ae5a');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
<section id="ajustando-a-tooltip" class="level2">
<h2 class="anchored" data-anchor-id="ajustando-a-tooltip">Ajustando a Tooltip</h2>
<div id="cell-32" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.bar(sal_gb, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'work_year'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'avg_salary_in_usd'</span>, </span>
<span id="cb16-2">             text<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'avg_salary_in_usd'</span>, </span>
<span id="cb16-3">             text_auto<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".2s"</span>, </span>
<span id="cb16-4">             color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'job_title'</span>, </span>
<span id="cb16-5">             barmode<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"group"</span>,</span>
<span id="cb16-6">             labels<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{ <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"work_year"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ano"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"avg_salary_in_usd"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Salário"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"job_title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cargo"</span>})</span>
<span id="cb16-7"></span>
<span id="cb16-8">configuracao <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb16-9">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Comparação dos Salários"</span>},</span>
<span id="cb16-10">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cargos"</span>}},</span>
<span id="cb16-11">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yaxis"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"visible"</span>: <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>},</span>
<span id="cb16-12">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"xaxis"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ano"</span>},</span>
<span id="cb16-13">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"margin"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"l"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>},</span>
<span id="cb16-14">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plot_bgcolor"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#FFFFFF"</span>,</span>
<span id="cb16-15">}</span>
<span id="cb16-16"></span>
<span id="cb16-17">fig.update_layout(configuracao)</span>
<span id="cb16-18">fig.show(renderer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'notebook'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="7d42ca9d-c371-437c-9197-9f7f1a36eace" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("7d42ca9d-c371-437c-9197-9f7f1a36eace")) {                    Plotly.newPlot(                        "7d42ca9d-c371-437c-9197-9f7f1a36eace",                        [{"alignmentgroup":"True","hovertemplate":"Cargo=Data Engineer<br>Ano=%{x}<br>Sal\u00e1rio=%{text}<extra></extra>","legendgroup":"Data Engineer","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"Data Engineer","offsetgroup":"Data Engineer","orientation":"v","showlegend":true,"text":[88162.0,83202.53125,126375.69662921349],"textposition":"auto","texttemplate":"%{y:.2s}","x":[2020,2021,2022],"xaxis":"x","y":[88162.0,83202.53125,126375.69662921349],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Cargo=Data Scientist<br>Ano=%{x}<br>Sal\u00e1rio=%{text}<extra></extra>","legendgroup":"Data Scientist","marker":{"color":"#EF553B","pattern":{"shape":""}},"name":"Data Scientist","offsetgroup":"Data Scientist","orientation":"v","showlegend":true,"text":[85970.52380952382,70671.73333333334,136172.0909090909],"textposition":"auto","texttemplate":"%{y:.2s}","x":[2020,2021,2022],"xaxis":"x","y":[85970.52380952382,70671.73333333334,136172.0909090909],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Cargo=Data Analyst<br>Ano=%{x}<br>Sal\u00e1rio=%{text}<extra></extra>","legendgroup":"Data Analyst","marker":{"color":"#00cc96","pattern":{"shape":""}},"name":"Data Analyst","offsetgroup":"Data Analyst","orientation":"v","showlegend":true,"text":[45547.28571428572,79505.41176470589,100550.7397260274],"textposition":"auto","texttemplate":"%{y:.2s}","x":[2020,2021,2022],"xaxis":"x","y":[45547.28571428572,79505.41176470589,100550.7397260274],"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Ano"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Sal\u00e1rio"},"visible":false},"legend":{"title":{"text":"Cargos"},"tracegroupgap":0},"margin":{"t":60,"l":10,"b":10},"barmode":"group","title":{"text":"Compara\u00e7\u00e3o dos Sal\u00e1rios"},"plot_bgcolor":"#FFFFFF"},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('7d42ca9d-c371-437c-9197-9f7f1a36eace');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
<section id="conclusão" class="level2">
<h2 class="anchored" data-anchor-id="conclusão">Conclusão</h2>
<p>Então, chegamos ao final desta aula e ao final do nosso curso!</p>
<p>Se você quiser saber mais sobre a configuração do plotly, clique <a href="https://plotly.com/python/getting-started/">aqui</a>.</p>
<p>E se você quiser aprender mais sobre Ciência de Dados e Visualização, dê uma olhada nos links abaixo:</p>
<ul>
<li>Ferramentas de Visualização
<ul>
<li>Power BI Community - <a href="https://community.powerbi.com/">https://community.powerbi.com/</a></li>
<li>Power BI DEV Camp - <a href="https://www.powerbidevcamp.net/">https://www.powerbidevcamp.net/</a></li>
<li>Main Tableau Site - <a href="https://www.tableau.com/">https://www.tableau.com/</a></li>
<li>Public Tableau - <a href="https://public.tableau.com/s/">https://public.tableau.com/s/</a></li>
<li>Grafana Main Portal - <a href="https://grafana.com/">https://grafana.com/</a></li>
<li>Grafana Cloud - <a href="https://grafana.com/products/cloud/?plcmt=nav-products-cta1&amp;cta=cloud">https://grafana.com/products/cloud/?plcmt=nav-products-cta1&amp;cta=cloud</a></li>
</ul></li>
<li>Outros sites
<ul>
<li>Python Graph Gallery - <a href="https://www.python-graph-gallery.com">https://www.python-graph-gallery.com</a></li>
<li>Canais no Youtube
<ul>
<li>MS Power BI - <a href="https://www.youtube.com/c/MSPowerBI">https://www.youtube.com/c/MSPowerBI</a></li>
<li>Hashtag Treinamentos - <a href="https://www.youtube.com/c/HashtagTreinamentos">https://www.youtube.com/c/HashtagTreinamentos</a></li>
<li>Information Lab - <a href="https://www.youtube.com/c/TheInformationLabCoUK">https://www.youtube.com/c/TheInformationLabCoUK</a></li>
<li>Art of Visualization - <a href="https://www.youtube.com/c/ArtofVisualization">https://www.youtube.com/c/ArtofVisualization</a></li>
<li>Andy Kriebel - <a href="https://www.youtube.com/c/AndyKriebel">https://www.youtube.com/c/AndyKriebel</a></li>
</ul></li>
<li>Data Viz Project - <a href="https://datavizproject.com/">https://datavizproject.com/</a></li>
<li>WTF Viz - <a href="https://viz.wtf/">https://viz.wtf/</a></li>
<li>538 News - <a href="https://fivethirtyeight.com/">https://fivethirtyeight.com/</a></li>
<li>Storytelling with data - <a href="https://www.storytellingwithdata.com/">https://www.storytellingwithdata.com/</a></li>
</ul></li>
</ul>
<section id="navegação" class="level3">
<h3 class="anchored" data-anchor-id="navegação">Navegação</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th><a href="../../posts/data-115/index.html">&lt; Anterior</a></th>
<th>|</th>
<th style="text-align: right;">Próximo &gt;</th>
</tr>
</thead>

</table>


</section>
</section>

 ]]></description>
  <category>Visualização</category>
  <category>Python</category>
  <category>Pandas</category>
  <category>Plotly</category>
  <guid>https://blog.wvcode.com.br/posts/data-116/</guid>
  <pubDate>Sat, 18 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/library/concepts/programming_practice.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>[VDP] Aula 15 - Gráficos Interativos</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-115/</link>
  <description><![CDATA[ 





<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Olá Cientista de Dados!</p>
<p>Esta é nossa última aula, e para encerrar vamos conhecer uma biblioteca que nos permitirá criar gráficos esteticamente refinados e interativos.</p>
<p>A biblioteca se chama <code>Plotly</code>, e vamos aprender a criar todos os gráficos que criamos com seaborn agora utilizando Plotly!</p>
</section>
<section id="preparando-o-ambiente" class="level2">
<h2 class="anchored" data-anchor-id="preparando-o-ambiente">Preparando o ambiente</h2>
<p>Aqui, como sempre, vamos carregar as bibliotecas que iremos utilizar no nosso notebook.</p>
<div id="cell-5" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> plotly.express <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> px</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> duckdb</span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>reload_ext sql</span></code></pre></div>
</div>
<p>Vamos utilizar o duckdb em memória caso seja necessário fazer alguma transformação rápida.</p>
<div id="cell-7" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>sql duckdb:<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">///</span>:memory:</span></code></pre></div>
</div>
</section>
<section id="carregando-os-dados" class="level2">
<h2 class="anchored" data-anchor-id="carregando-os-dados">Carregando os dados</h2>
<div id="cell-9" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">pokemons <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://github.com/labeduc/datasets/blob/main/pokemons/all.csv?raw=true'</span>)</span>
<span id="cb3-2"></span>
<span id="cb3-3">pokemons.sample(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Number</th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Type 1</th>
<th data-quarto-table-cell-role="th">Type 2</th>
<th data-quarto-table-cell-role="th">Abilities</th>
<th data-quarto-table-cell-role="th">HP</th>
<th data-quarto-table-cell-role="th">Att</th>
<th data-quarto-table-cell-role="th">Def</th>
<th data-quarto-table-cell-role="th">Spa</th>
<th data-quarto-table-cell-role="th">Spd</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Against Bug</th>
<th data-quarto-table-cell-role="th">Against Rock</th>
<th data-quarto-table-cell-role="th">Against Ghost</th>
<th data-quarto-table-cell-role="th">Against Dragon</th>
<th data-quarto-table-cell-role="th">Against Dark</th>
<th data-quarto-table-cell-role="th">Against Steel</th>
<th data-quarto-table-cell-role="th">Against Fairy</th>
<th data-quarto-table-cell-role="th">Height</th>
<th data-quarto-table-cell-role="th">Weight</th>
<th data-quarto-table-cell-role="th">BMI</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">829</td>
<td>716</td>
<td>Xerneas</td>
<td>Fairy</td>
<td>NaN</td>
<td>['Fairy Aura']</td>
<td>126</td>
<td>131</td>
<td>95</td>
<td>131</td>
<td>98</td>
<td>...</td>
<td>0.5</td>
<td>1.0</td>
<td>1.0</td>
<td>0.0</td>
<td>0.5</td>
<td>2.0</td>
<td>1.0</td>
<td>3.0</td>
<td>215.0</td>
<td>23.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">104</td>
<td>80</td>
<td>Slowbro</td>
<td>Water</td>
<td>Psychic</td>
<td>['Oblivious', 'Own Tempo', 'Regenerator']</td>
<td>95</td>
<td>75</td>
<td>110</td>
<td>100</td>
<td>80</td>
<td>...</td>
<td>2.0</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>2.0</td>
<td>0.5</td>
<td>1.0</td>
<td>1.6</td>
<td>78.5</td>
<td>30.7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">141</td>
<td>109</td>
<td>Koffing</td>
<td>Poison</td>
<td>NaN</td>
<td>['Levitate', 'Neutralizing Gas', 'Stench']</td>
<td>40</td>
<td>65</td>
<td>95</td>
<td>60</td>
<td>45</td>
<td>...</td>
<td>0.5</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>0.6</td>
<td>1.0</td>
<td>2.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">38</td>
<td>28</td>
<td>Alolan Sandslash</td>
<td>Ice</td>
<td>Steel</td>
<td>['Slush Rush', 'Snow Cloak']</td>
<td>75</td>
<td>100</td>
<td>120</td>
<td>25</td>
<td>65</td>
<td>...</td>
<td>0.5</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>1.2</td>
<td>55.0</td>
<td>38.2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">758</td>
<td>653</td>
<td>Fennekin</td>
<td>Fire</td>
<td>NaN</td>
<td>['Blaze', 'Magician']</td>
<td>40</td>
<td>45</td>
<td>40</td>
<td>62</td>
<td>60</td>
<td>...</td>
<td>0.5</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>0.5</td>
<td>0.4</td>
<td>9.4</td>
<td>58.8</td>
</tr>
</tbody>
</table>

<p>5 rows × 44 columns</p>
</div>
</div>
</div>
</section>
<section id="tipos-de-gráficos" class="level2">
<h2 class="anchored" data-anchor-id="tipos-de-gráficos">Tipos de Gráficos</h2>
<p>O Plotly tem diversos tipos de gráficos, exatamente como o Seaborn, e iremos ver aqui os tipos mais básicos, assim como vimos com o seaborn nas aulas anteriores. Também já iremos apresentar desde o início os gráficos com as boas práticas devidamente aplicadas, para gerar uma melhor experiência para o público.</p>
<section id="barracolunas" class="level3">
<h3 class="anchored" data-anchor-id="barracolunas">Barra/Colunas</h3>
<p>E lá vamos nós, começando pelo gráfico mais popular de todos, o gráfico de barra/coluna. A princípio, precisamos apenas 2 comandos: o comando que gera o gráfico e armazena em um objeto do tipo <code>Figure</code>; e o comando que plota a figura gerada.</p>
<div id="cell-14" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># gera a figura chamando a função bar()</span></span>
<span id="cb4-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># o primeiro parâmetro é o DataFrame e os seguintes </span></span>
<span id="cb4-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># são as colunas do DataFrame que serão os eixos X e Y.</span></span>
<span id="cb4-4">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.bar(pokemons, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Att'</span>)</span>
<span id="cb4-5"></span>
<span id="cb4-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># função para plotar a imagem</span></span>
<span id="cb4-7">fig.show(renderer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'notebook'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="09ee2580-fc59-4ed7-bebb-278bf944ec85" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("09ee2580-fc59-4ed7-bebb-278bf944ec85")) {                    Plotly.newPlot(                        "09ee2580-fc59-4ed7-bebb-278bf944ec85",                        [{"alignmentgroup":"True","hovertemplate":"Generation=%{x}<br>Att=%{y}<extra></extra>","legendgroup":"","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"","offsetgroup":"","orientation":"v","showlegend":false,"textposition":"auto","x":[1.0,1.0,1.0,6.0,1.0,1.0,1.0,6.0,6.0,1.0,1.0,1.0,6.0,1.0,1.0,1.0,1.0,1.0,1.0,6.0,1.0,1.0,1.0,6.0,1.0,7.0,1.0,7.0,1.0,1.0,1.0,1.0,1.0,1.0,7.0,1.0,7.0,1.0,7.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,7.0,1.0,7.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,7.0,1.0,7.0,1.0,7.0,8.0,1.0,7.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,6.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,7.0,1.0,7.0,1.0,7.0,1.0,8.0,1.0,8.0,1.0,8.0,1.0,6.0,8.0,1.0,1.0,1.0,8.0,1.0,1.0,1.0,1.0,1.0,7.0,1.0,7.0,1.0,1.0,1.0,1.0,1.0,6.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,7.0,1.0,1.0,7.0,1.0,1.0,1.0,1.0,1.0,8.0,1.0,1.0,1.0,1.0,1.0,6.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,8.0,1.0,1.0,1.0,1.0,1.0,6.0,1.0,1.0,1.0,6.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,6.0,1.0,1.0,8.0,1.0,8.0,1.0,8.0,1.0,1.0,1.0,1.0,6.0,6.0,1.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,6.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,8.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,6.0,2.0,2.0,2.0,2.0,6.0,2.0,2.0,6.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,8.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,6.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,6.0,2.0,2.0,2.0,3.0,3.0,3.0,6.0,3.0,3.0,3.0,6.0,3.0,3.0,3.0,6.0,3.0,3.0,3.0,8.0,3.0,8.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,6.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,6.0,3.0,6.0,3.0,3.0,3.0,6.0,3.0,3.0,6.0,3.0,3.0,6.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,6.0,3.0,3.0,3.0,3.0,6.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,6.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,6.0,3.0,3.0,3.0,3.0,3.0,6.0,3.0,3.0,3.0,6.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,6.0,3.0,3.0,3.0,6.0,3.0,3.0,3.0,3.0,6.0,3.0,6.0,3.0,6.0,3.0,6.0,3.0,6.0,3.0,3.0,3.0,3.0,3.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,6.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,6.0,4.0,4.0,4.0,6.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,6.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,6.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,6.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,8.0,5.0,5.0,8.0,8.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,8.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,8.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,6.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,7.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0,8.0],"xaxis":"x","y":[49,62,82,100,52,64,84,104,130,48,63,83,103,30,20,45,35,25,90,150,45,60,80,80,56,56,81,71,60,90,60,95,55,90,85,75,75,100,100,47,62,92,57,72,102,45,70,41,41,76,67,45,70,45,80,50,65,80,70,95,55,65,55,55,100,100,45,35,65,70,60,52,82,80,105,70,110,50,65,95,20,35,50,50,80,100,130,75,90,105,40,70,80,80,95,95,120,120,85,85,100,100,65,65,75,75,100,35,60,90,95,85,110,45,70,80,80,105,105,65,95,35,50,65,65,45,48,73,105,130,30,50,40,95,105,50,80,80,120,105,55,65,90,90,85,130,5,55,95,125,40,65,67,92,45,75,45,65,110,50,83,95,125,155,100,10,125,155,85,48,55,65,65,130,60,40,60,80,115,105,135,110,85,85,90,125,100,85,64,84,134,110,150,190,100,49,62,82,52,64,84,65,80,105,46,76,30,50,20,35,60,90,90,38,58,40,25,30,20,40,50,75,40,55,75,95,80,20,50,100,75,35,45,55,70,30,75,65,45,85,65,65,85,75,65,60,72,33,80,65,90,70,75,85,125,80,120,95,130,150,10,125,185,95,80,130,40,50,50,100,55,55,65,105,55,40,80,60,90,90,95,60,120,80,95,20,35,95,30,63,75,80,10,85,115,75,64,84,134,164,90,130,100,45,65,85,110,60,85,120,160,70,85,110,150,55,90,30,30,70,70,45,35,70,35,50,30,50,70,40,70,100,55,85,30,50,25,35,65,85,30,60,40,130,60,80,160,45,90,90,51,71,91,60,120,20,45,45,65,75,85,85,105,70,90,110,140,40,60,100,45,75,75,50,40,73,47,60,43,73,90,120,140,70,90,60,100,120,85,25,45,60,100,70,100,85,115,40,70,110,115,100,55,95,48,78,80,120,40,70,41,81,95,125,15,60,70,90,75,115,165,40,70,68,50,130,150,23,50,80,120,40,60,80,64,104,84,90,30,75,95,135,145,55,75,135,145,100,50,75,80,100,90,130,100,150,150,180,150,180,100,150,70,180,95,68,89,109,58,78,104,51,66,86,55,75,120,45,85,25,85,65,85,120,30,70,125,165,42,52,29,59,79,69,94,30,80,45,65,105,35,60,48,83,100,50,80,66,76,136,60,125,55,82,30,63,93,24,89,80,25,5,65,92,70,90,130,170,85,70,110,145,72,112,50,90,61,106,100,49,69,20,62,92,132,120,70,85,140,100,123,95,50,76,110,60,95,130,80,125,165,55,100,80,50,65,65,65,65,65,75,105,125,120,120,90,160,100,120,70,80,100,90,100,103,120,100,45,60,75,63,93,123,55,75,100,55,85,60,80,110,50,88,53,98,53,98,53,98,25,55,55,77,115,60,100,75,105,135,45,57,85,135,60,60,80,105,140,50,65,95,100,125,53,63,103,45,55,100,27,67,35,60,92,72,82,117,90,90,140,30,140,160,86,65,105,75,90,58,30,55,50,78,108,112,140,50,95,65,105,50,95,30,45,55,30,40,65,44,87,50,65,95,60,100,75,75,135,55,85,40,60,75,47,77,50,94,55,80,100,55,85,115,55,75,30,40,55,87,117,147,70,130,50,40,70,66,81,85,125,120,74,124,85,125,110,83,123,55,65,97,109,65,85,105,85,60,90,129,90,115,100,115,105,120,150,125,145,130,120,170,72,77,128,120,61,78,107,45,59,69,56,63,95,145,36,56,50,73,81,35,22,52,50,68,38,45,65,65,100,82,124,80,48,48,80,110,70,140,52,72,48,80,54,92,52,105,60,75,53,73,38,55,89,121,59,77,65,92,58,50,50,75,100,80,70,110,66,66,66,66,85,90,95,100,69,117,30,70,131,131,100,100,100,160,100,110,160,110,55,75,107,65,85,115,54,69,74,75,85,120,70,110,62,82,70,82,132,70,70,70,70,45,55,65,115,115,117,20,140,53,63,100,125,40,70,55,105,35,45,44,64,75,125,30,40,120,52,60,120,35,125,55,75,60,95,95,60,100,115,78,98,90,105,60,131,55,75,110,115,85,130,75,29,29,137,113,53,139,137,89,101,181,101,107,157,113,167,95,125,73,73,131,127,112,65,143,65,85,125,71,86,116,40,60,85,55,95,47,67,87,20,35,45,28,58,40,50,40,80,64,115,45,90,40,60,80,40,110,85,57,107,85,63,123,38,98,65,115,68,118,45,65,30,40,90,45,60,120,90,110,95,135,85,95,40,60,100,101,25,65,125,80,80,65,95,80,130,100,100,90,90,95,60,80,120,130,170,130,130,85,90,130,130,120,100,100,145,65,80,165,85],"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Generation"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Att"}},"legend":{"tracegroupgap":0},"margin":{"t":60},"barmode":"relative"},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('09ee2580-fc59-4ed7-bebb-278bf944ec85');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<p>Está aí nosso gráfico, mas ele parece estar com um problema: essa aparência riscada. Por que isso aconteceu? Se passarmos o mouse por cima de uma das barras, veremos que na verdade, ela registra cada um dos valores de ataque dos pokemons, ou seja, ele não está calculando a média dos valores, como seria esperado.</p>
<p>E como resolvemos isso? De duas maneiras: 1) fazemos a transformação dos dados, com um group by 2) modificamos o tipo de gráfico.</p>
<p>Nesta aula, vamos resolver com a solução 1 - transformar os dados.</p>
<div id="cell-16" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>sql pokemons_gb <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;&lt;</span> select Generation, AVG(Att) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> AvgAttack <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> pokemons group by Generation order by Generation</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>*  duckdb:///:memory:
Done.</code></pre>
</div>
</div>
<div id="cell-17" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># gera a figura chamando a função bar()</span></span>
<span id="cb7-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># o primeiro parâmetro é o DataFrame e os seguintes </span></span>
<span id="cb7-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># são as colunas do DataFrame que serão os eixos X e Y.</span></span>
<span id="cb7-4">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.bar(pokemons_gb, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'AvgAttack'</span>)</span>
<span id="cb7-5"></span>
<span id="cb7-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># função para plotar a imagem</span></span>
<span id="cb7-7">fig.show(renderer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'notebook'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="aeb96996-b652-4315-b192-104366e26b94" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("aeb96996-b652-4315-b192-104366e26b94")) {                    Plotly.newPlot(                        "aeb96996-b652-4315-b192-104366e26b94",                        [{"alignmentgroup":"True","hovertemplate":"Generation=%{x}<br>AvgAttack=%{y}<extra></extra>","legendgroup":"","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"","offsetgroup":"","orientation":"v","showlegend":false,"textposition":"auto","x":[1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0],"xaxis":"x","y":[72.91390728476821,68.26,74.02173913043478,79.99137931034483,82.4478527607362,95.8796992481203,86.11206896551724,83.41739130434783],"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Generation"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"AvgAttack"}},"legend":{"tracegroupgap":0},"margin":{"t":60},"barmode":"relative"},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('aeb96996-b652-4315-b192-104366e26b94');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<p>Está aí nosso gráfico, agora com cada barra representando a média do poder de ataque de cada geração. Para transformar em barras horizontais, basta trocar o eixo X com o Y, além de adicionar o parâmetro de orientação.</p>
<div id="cell-19" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># gera a figura chamando a função bar()</span></span>
<span id="cb8-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># o primeiro parâmetro é o DataFrame e os seguintes </span></span>
<span id="cb8-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># são as colunas do DataFrame que serão os eixos X e Y.</span></span>
<span id="cb8-4">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.bar(pokemons_gb, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'AvgAttack'</span>, orientation<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'h'</span>)</span>
<span id="cb8-5"></span>
<span id="cb8-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># função para plotar a imagem</span></span>
<span id="cb8-7">fig.show(renderer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'notebook'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="fbbc0068-7a94-4326-b68b-c1fc59670184" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("fbbc0068-7a94-4326-b68b-c1fc59670184")) {                    Plotly.newPlot(                        "fbbc0068-7a94-4326-b68b-c1fc59670184",                        [{"alignmentgroup":"True","hovertemplate":"AvgAttack=%{x}<br>Generation=%{y}<extra></extra>","legendgroup":"","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"","offsetgroup":"","orientation":"h","showlegend":false,"textposition":"auto","x":[72.91390728476821,68.26,74.02173913043478,79.99137931034483,82.4478527607362,95.8796992481203,86.11206896551724,83.41739130434783],"xaxis":"x","y":[1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0],"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"AvgAttack"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Generation"}},"legend":{"tracegroupgap":0},"margin":{"t":60},"barmode":"relative"},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('fbbc0068-7a94-4326-b68b-c1fc59670184');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<p>Uma característica do Plotly que é interessante é que ele ocupa toda a largura disponível na tela para plotar o gráfico, e apenas o necessário do ponto de vista de altura. Isto significa que a aparência dos gráficos precisa ser tratada para gerar resultados mais refinados. No seaborn, tinha diversos parâmetros que precisavamos acertar na plotagem do gráfico. Na última seção, veremos o mesmo para o Plotly.</p>
</section>
<section id="linhaárea" class="level3">
<h3 class="anchored" data-anchor-id="linhaárea">Linha/Área</h3>
<p>E vamos ao gráfico de linha! Esse mesmo conjunto de dados nos permite plotar um gráfico neste estilo.</p>
<div id="cell-23" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.line(pokemons_gb, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Generation"</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AvgAttack"</span>)</span>
<span id="cb9-2"></span>
<span id="cb9-3">fig.show(renderer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'notebook'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="cfe25b5e-41c6-4a24-a55c-a89bbc2e1903" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("cfe25b5e-41c6-4a24-a55c-a89bbc2e1903")) {                    Plotly.newPlot(                        "cfe25b5e-41c6-4a24-a55c-a89bbc2e1903",                        [{"hovertemplate":"Generation=%{x}<br>AvgAttack=%{y}<extra></extra>","legendgroup":"","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"","orientation":"v","showlegend":false,"x":[1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0],"xaxis":"x","y":[72.91390728476821,68.26,74.02173913043478,79.99137931034483,82.4478527607362,95.8796992481203,86.11206896551724,83.41739130434783],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Generation"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"AvgAttack"}},"legend":{"tracegroupgap":0},"margin":{"t":60}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('cfe25b5e-41c6-4a24-a55c-a89bbc2e1903');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<p>Para criar um gráfico de área, basta trocar a função.</p>
<div id="cell-25" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.area(pokemons_gb, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Generation"</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AvgAttack"</span>)</span>
<span id="cb10-2"></span>
<span id="cb10-3">fig.show(renderer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'notebook'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="90048c94-51f7-4dbf-a481-4cc22912e911" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("90048c94-51f7-4dbf-a481-4cc22912e911")) {                    Plotly.newPlot(                        "90048c94-51f7-4dbf-a481-4cc22912e911",                        [{"fillpattern":{"shape":""},"hovertemplate":"Generation=%{x}<br>AvgAttack=%{y}<extra></extra>","legendgroup":"","line":{"color":"#636efa"},"marker":{"symbol":"circle"},"mode":"lines","name":"","orientation":"v","showlegend":false,"stackgroup":"1","x":[1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0],"xaxis":"x","y":[72.91390728476821,68.26,74.02173913043478,79.99137931034483,82.4478527607362,95.8796992481203,86.11206896551724,83.41739130434783],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Generation"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"AvgAttack"}},"legend":{"tracegroupgap":0},"margin":{"t":60}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('90048c94-51f7-4dbf-a481-4cc22912e911');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<p>E para os olhos mais treinados, vocês devem ter percebido que o formato do gráfico de linha e do gráfico de área não estão exatamente iguais, o que seria o esperado. O que aconteceu aqui foi uma mudança da escala no eixo do Y, gerando uma discrepância no posicionamento de cada ponto da linha. Por isso conhecer como configurar os gráficos será muito importante.</p>
</section>
<section id="dispersãopontos" class="level3">
<h3 class="anchored" data-anchor-id="dispersãopontos">Dispersão/Pontos</h3>
<p>Este gráfico, que nos permite entender a correlação entre variáveis (até 3, se considerarmos o tamanho), também pode ser criado de forma bem simples. Lembrando que também temos um caso especial de gráfico de dispersão, que é o Quadrante Mágico do Gartner. Este será visto quando falarmos sobre configuração dos gráficos do Plotly.</p>
<div id="cell-29" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.scatter(pokemons, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Att"</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Def"</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Type 1"</span>,</span>
<span id="cb11-2">                 size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'HP'</span>)</span>
<span id="cb11-3">fig.show(renderer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'notebook'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="2c1e0f6b-fc6c-4f8e-8e84-3950dc225993" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("2c1e0f6b-fc6c-4f8e-8e84-3950dc225993")) {                    Plotly.newPlot(                        "2c1e0f6b-fc6c-4f8e-8e84-3950dc225993",                        [{"hovertemplate":"Type 1=Grass<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Grass","marker":{"color":"#636efa","size":[45,60,80,80,45,60,75,50,65,80,60,95,95,65,45,60,80,75,35,55,75,30,75,40,50,70,70,40,70,90,60,60,50,50,70,99,55,75,95,40,60,45,70,74,60,90,90,100,65,100,100,45,60,75,50,75,40,60,45,70,75,69,114,44,74,91,56,61,88,66,123,68,78,78,40,70,40,60,42,52,72,70,59,50,70,100,40,60,40,70,110],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Grass","showlegend":true,"x":[49,62,82,100,50,65,80,75,90,105,40,95,105,55,49,62,82,80,35,45,55,30,75,45,65,85,110,40,70,100,40,130,60,85,115,68,68,89,109,30,70,35,60,100,62,92,132,100,110,100,103,45,60,75,53,98,27,67,35,60,86,55,85,50,94,90,61,78,107,65,100,55,75,107,55,105,35,45,30,40,120,130,181,65,85,125,40,50,40,110,85],"xaxis":"x","y":[49,63,83,123,55,70,85,35,50,65,80,85,85,115,65,80,100,95,40,50,70,30,55,35,45,65,75,50,40,60,60,80,45,40,60,83,64,85,105,35,65,45,70,72,50,75,105,125,130,100,75,55,75,95,48,63,60,85,50,75,67,45,70,91,131,72,65,95,122,48,62,55,75,75,35,90,55,80,38,48,98,115,131,50,70,90,60,90,80,80,80],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Fire<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Fire","marker":{"color":"#EF553B","size":[39,58,78,78,78,38,73,55,90,50,65,60,65,65,90,39,58,78,40,60,45,115,106,45,60,80,80,60,70,70,70,44,64,76,75,91,65,90,110,50,75,70,105,105,85,40,59,75,62,78,62,86,80,45,65,95,75,60,53,50,65,80,50,100],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Fire","showlegend":true,"x":[52,64,84,104,130,41,76,70,110,85,100,80,95,130,100,52,64,84,40,50,75,115,130,60,85,120,160,60,100,120,85,58,78,104,95,90,63,93,123,53,98,90,140,30,97,45,59,69,73,81,50,68,110,65,85,115,70,78,127,71,86,116,65,115],"xaxis":"x","y":[43,58,78,78,111,40,75,45,80,55,70,110,57,60,90,43,58,78,40,120,37,85,90,40,60,70,80,40,70,100,140,44,52,71,67,106,45,55,65,48,63,45,55,105,66,40,58,72,55,71,58,72,120,40,50,90,70,135,53,40,60,75,45,65],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Water<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Water","marker":{"color":"#00cc96","size":[44,59,79,79,50,80,40,65,90,40,80,90,95,95,65,90,30,50,30,55,30,55,45,80,30,60,20,95,95,130,130,50,65,85,75,125,70,100,90,55,95,95,65,65,35,75,85,75,100,50,70,100,100,40,60,80,40,60,45,70,70,130,170,50,110,43,63,20,95,35,55,55,100,43,100,100,53,64,84,55,85,76,111,49,69,45,90,80,100,55,75,95,50,75,50,75,105,70,54,74,62,75,55,100,165,91,41,54,72,72,50,71,50,60,80,45,45,38,68,55,68,70,50,65,70,50,90,41,61,90,90],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Water","showlegend":true,"x":[48,63,83,103,52,82,50,65,95,40,70,65,75,75,45,70,65,95,105,130,40,65,67,92,45,75,10,125,155,85,65,65,80,105,38,58,20,50,75,45,85,75,95,55,65,105,40,95,75,70,85,110,150,30,50,70,30,50,90,120,140,70,90,48,78,80,120,15,60,64,104,84,90,30,100,150,51,66,86,65,105,48,83,49,69,20,120,80,100,55,75,100,53,98,50,65,95,92,78,108,44,87,40,60,75,72,56,63,95,145,53,73,54,69,74,20,140,40,70,60,105,75,40,60,85,64,115,63,123,90,90],"xaxis":"x","y":[65,80,100,120,48,78,40,65,95,35,65,65,110,180,55,80,100,180,90,115,70,95,60,65,55,85,55,79,109,80,60,64,80,100,38,58,50,80,75,45,85,80,85,95,35,75,70,95,115,50,70,90,110,30,50,70,30,100,20,40,70,35,45,43,73,65,85,20,79,85,105,105,130,55,90,90,53,68,88,35,55,48,68,56,76,50,100,80,100,45,60,85,48,63,40,55,75,65,103,133,50,63,50,70,80,90,40,52,67,67,62,88,54,69,74,20,130,52,92,130,70,115,40,55,65,50,90,40,60,100,100],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Bug<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Bug","marker":{"color":"#ab63fa","size":[45,50,60,40,45,65,65,35,60,60,70,70,65,65,40,55,40,70,65,50,75,70,70,20,80,80,45,50,60,50,60,40,70,31,61,1,65,65,37,77,40,60,60,60,70,30,70,86,45,55,75,30,40,60,50,70,50,70,50,70,50,80,58,55,85,71,38,45,80,47,57,77,40,60,25,75,107,71,25,50,60],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Bug","showlegend":true,"x":[30,20,45,35,25,90,150,70,95,55,65,110,125,155,20,35,60,90,65,65,90,130,150,10,125,185,45,35,70,35,50,30,60,45,90,90,73,47,25,85,29,59,79,69,94,30,80,76,53,63,103,45,55,100,65,105,75,135,47,77,40,70,109,85,60,120,35,22,52,62,82,70,45,55,35,125,139,137,20,35,45],"xaxis":"x","y":[35,55,50,30,50,40,40,55,80,50,60,80,100,120,30,50,40,70,45,90,140,100,140,230,75,115,35,55,50,55,70,32,62,90,45,45,75,75,41,51,45,85,105,95,50,42,102,86,70,90,80,59,99,89,85,125,45,105,50,60,85,40,112,55,65,95,40,60,50,45,95,90,40,60,40,140,139,37,20,80,110],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Normal<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Normal","marker":{"color":"#FFA15A","size":[40,63,83,83,30,55,40,65,115,140,40,65,52,35,60,90,250,105,105,75,48,55,65,160,35,85,60,100,90,55,70,100,60,90,85,73,55,95,255,38,78,40,60,60,80,150,64,84,104,50,50,70,60,45,73,70,60,40,55,85,59,79,75,55,65,65,49,71,100,76,135,110,85,110,120,45,60,45,65,85,50,62,80,103,103,55,75,60,80,95,70,100,100,100,38,85,45,75,35,55,80,48,88,70,120,90,95,95,65,78,70,120,42,72],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Normal","showlegend":true,"x":[45,60,80,80,56,81,60,90,45,70,45,70,90,85,110,55,5,95,125,100,48,55,60,110,46,76,30,50,30,70,80,70,80,130,80,95,20,80,10,30,70,55,85,60,80,160,51,71,91,20,45,65,60,40,115,70,90,55,75,120,45,85,100,66,76,136,55,82,5,65,85,85,80,160,120,55,85,60,80,110,55,77,115,60,60,50,95,60,100,110,83,123,77,128,36,56,50,80,75,85,120,70,110,75,125,60,95,95,115,60,55,95,40,80],"xaxis":"x","y":[40,55,75,80,35,60,30,65,20,45,35,60,55,45,70,75,5,80,100,95,48,50,70,65,34,64,30,50,15,55,65,70,50,75,90,62,35,105,10,41,61,30,60,60,80,100,23,43,63,40,45,65,60,60,60,70,70,30,50,70,40,60,66,44,84,94,42,64,5,45,40,95,70,110,120,39,69,45,65,90,50,62,80,86,126,40,60,50,70,95,50,75,77,90,38,77,43,60,30,50,75,30,60,50,80,80,95,95,65,85,55,95,55,100],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Dark<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Dark","marker":{"color":"#19d3f3","size":[30,75,40,65,90,95,60,55,45,75,75,35,70,38,78,50,50,65,65,100,70,70,41,64,50,65,40,60,45,65,70,110,52,72,92,53,86,126,223,40,70,45,65,95,93,105],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Dark","showlegend":true,"x":[56,71,35,60,85,65,85,95,60,90,90,55,90,30,70,75,85,130,150,125,120,90,50,88,75,90,65,105,85,125,55,65,65,85,105,54,92,131,101,28,58,45,60,120,90,120],"xaxis":"x","y":[35,70,35,60,90,110,42,55,30,50,90,35,70,41,61,75,125,60,60,52,65,90,37,50,70,115,40,60,70,100,75,105,50,70,90,53,88,95,53,28,58,30,45,65,101,105],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Poison<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Poison","marker":{"color":"#FF6692","size":[35,60,55,70,90,46,61,81,40,75,95,80,80,105,105,40,65,65,85,95,70,100,73,63,103,40,70,48,83,50,80,50,65,50,50,48,68,67,73,140],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Poison","showlegend":true,"x":[60,95,47,62,92,57,72,102,45,80,100,80,80,105,105,65,90,90,90,65,43,73,100,63,93,50,90,61,106,50,95,60,75,53,63,44,64,73,73,85],"xaxis":"x","y":[44,69,52,67,87,40,57,77,35,70,95,50,50,75,75,95,120,120,80,80,53,83,60,47,67,90,110,40,65,62,82,60,90,62,152,40,60,67,73,95],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Electric<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Electric","marker":{"color":"#B6E880","size":[35,60,60,25,50,40,60,65,65,90,20,55,70,90,90,45,90,40,70,70,60,60,45,60,80,60,70,75,50,50,50,50,50,50,45,75,55,35,65,85,79,79,44,62,67,75,65,70,83,88,59,69,40,75,48,58,90,90,80],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Electric","showlegend":true,"x":[55,90,85,35,60,30,50,83,65,90,40,40,55,75,95,63,85,45,75,75,50,40,65,85,120,45,70,123,50,65,65,65,65,65,60,100,75,55,85,115,115,105,38,55,58,70,98,115,89,112,45,90,38,98,101,95,100,100,100],"xaxis":"x","y":[40,55,50,70,95,50,70,57,60,85,15,40,55,85,105,37,75,40,60,80,40,50,34,49,79,70,115,67,77,107,107,107,107,107,32,63,60,40,70,80,70,70,33,52,57,70,63,85,71,75,50,60,35,70,95,58,90,90,50],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Ground<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Ground","marker":{"color":"#FF97FF","size":[50,75,10,10,35,35,50,60,80,105,65,90,90,45,50,80,40,60,100,100,68,108,115,75,60,110,50,60,95,38,109,109,59,89,89,89,70,100,52,72,58],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Ground","showlegend":true,"x":[75,100,55,55,100,100,50,80,85,130,75,60,120,100,70,100,40,70,150,180,72,112,140,95,85,135,72,82,117,55,66,81,74,124,125,145,100,125,57,107,95],"xaxis":"x","y":[85,110,25,30,50,60,95,110,95,120,105,60,120,45,50,80,55,105,140,160,78,118,130,125,40,60,35,45,80,85,84,99,50,80,90,90,70,100,75,125,145],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Ice<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Ice","marker":{"color":"#FECB52","size":[50,75,38,73,50,65,90,50,100,45,45,50,80,80,70,90,110,80,65,110,70,70,105,105,36,51,71,55,95,80,55,95,80,30,70,75,75,100],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Ice","showlegend":true,"x":[75,100,41,67,65,50,85,50,100,55,30,50,80,120,40,60,80,50,60,130,80,90,140,160,50,65,95,70,130,50,69,117,85,25,65,80,80,145],"xaxis":"x","y":[90,120,40,75,65,35,100,40,80,45,15,50,80,80,50,70,90,100,110,80,70,45,55,55,50,65,85,40,80,50,85,184,75,35,60,110,70,130],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Fairy<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Fairy","marker":{"color":"#636efa","size":[70,95,50,35,55,60,90,85,44,54,78,78,101,62,82,95,126,51,45,65,92,92],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Fairy","showlegend":true,"x":[45,70,25,20,40,80,120,50,38,45,65,52,72,48,80,65,131,52,40,60,130,170],"xaxis":"x","y":[48,73,28,65,85,50,75,95,39,47,68,60,72,66,86,65,95,90,40,75,115,115],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Steel<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Steel","marker":{"color":"#EF553B","size":[50,75,75,65,50,50,50,60,70,70,40,60,80,80,80,100,57,67,100,40,60,60,91,45,59,50,50,57,97,80,46,135,70,72,122,70],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Steel","showlegend":true,"x":[65,85,125,80,85,105,70,90,110,140,55,75,135,145,75,100,24,89,120,55,80,100,90,80,110,70,140,80,101,95,65,143,110,80,130,95],"xaxis":"x","y":[55,200,230,140,85,125,100,140,180,230,80,100,130,150,150,100,86,116,120,70,95,115,129,100,150,140,70,91,103,115,65,143,100,49,69,115],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Fighting<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Fighting","marker":{"color":"#00cc96","size":[40,65,70,80,90,52,50,50,90,35,50,72,144,30,60,60,40,70,70,75,85,105,120,75,45,65,67,95,78,47,97,100,90,50,80,62,65,92,92,60,100,100],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Fighting","showlegend":true,"x":[80,105,80,100,130,95,120,105,125,35,95,60,120,40,60,100,70,110,145,80,105,140,100,125,85,125,82,124,92,82,132,120,125,68,118,135,100,130,130,90,130,130],"xaxis":"x","y":[35,60,50,70,80,55,53,79,90,35,95,30,60,55,75,85,40,70,88,55,85,95,85,75,50,60,62,78,75,57,77,90,80,60,90,95,100,115,145,60,100,100],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Psychic<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Psychic","marker":{"color":"#ab63fa","size":[25,40,55,55,50,65,90,60,85,40,90,106,106,106,100,40,65,65,48,190,106,100,28,38,68,68,60,80,75,95,50,50,50,50,45,20,68,68,75,80,75,120,100,76,116,65,67,72,45,60,70,45,65,110,55,75,62,74,80,80,75,70,43,43,137,137,97,97,97,97,42,57,57,60,100,100,100],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Psychic","showlegend":true,"x":[20,35,50,50,85,100,65,48,73,45,85,110,150,190,100,50,75,65,72,33,90,100,25,35,65,85,25,45,50,23,150,70,180,95,30,25,125,165,75,105,125,70,100,25,55,45,57,58,30,45,55,30,40,65,55,75,48,48,110,160,70,85,29,29,137,113,107,157,113,167,30,40,90,65,80,165,85],"xaxis":"x","y":[15,30,45,65,55,70,65,45,70,65,85,90,70,100,100,45,70,60,48,58,130,100,25,35,65,65,35,65,80,48,50,160,20,90,50,45,65,95,130,105,70,120,100,45,85,43,55,80,50,70,95,40,50,75,55,75,54,76,60,60,70,75,31,131,107,89,101,127,109,97,45,65,95,55,80,150,80],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Rock<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Rock","marker":{"color":"#FFA15A","size":[40,40,55,55,80,80,35,35,70,30,60,80,80,70,50,70,100,100,30,90,90,66,86,45,75,80,67,97,30,60,50,60,55,70,85,55,75,91,42,72,58,82,77,123,50,50,50,45,75,85,75,60,60,109,61,30,80,110,100],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Rock","showlegend":true,"x":[80,80,95,95,120,120,45,40,60,80,115,105,135,100,64,84,134,164,45,55,95,41,81,95,125,100,125,165,42,52,80,55,75,105,135,112,140,129,52,105,89,121,59,77,50,160,100,65,115,115,117,60,100,53,131,40,60,80,125],"xaxis":"x","y":[100,100,115,115,130,130,160,100,125,90,105,65,85,115,50,70,110,150,135,65,85,77,97,50,100,200,40,60,118,168,95,145,85,105,130,45,65,90,67,115,77,119,50,72,150,110,150,40,65,75,65,100,60,47,211,50,90,120,135],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Ghost<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Ghost","marker":{"color":"#19d3f3","size":[30,45,60,60,60,60,44,64,64,20,40,90,150,60,50,45,150,38,58,50,60,60,43,85,44,49,54,59,55,65,75,85,75,55,85,55,70,40,60,60,100],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Ghost","showlegend":true,"x":[35,50,65,65,60,55,75,115,165,40,70,50,80,60,92,100,100,30,50,30,40,55,70,110,66,66,66,66,85,90,95,100,70,55,75,90,131,45,65,95,65],"xaxis":"x","y":[30,45,60,80,60,100,35,65,75,90,130,34,44,60,108,135,120,85,145,55,60,90,48,76,70,70,70,70,122,122,122,122,70,80,110,80,100,45,65,50,60],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Dragon<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Dragon","marker":{"color":"#FF6692","size":[41,61,91,75,75,45,65,95,95,80,80,80,80,105,105,58,68,108,108,150,46,66,76,77,100,100,125,125,125,45,68,90,108,54,216,45,55,75,28,68,88,200],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Dragon","showlegend":true,"x":[64,84,134,70,110,75,95,135,145,80,100,90,130,150,180,70,90,130,170,120,87,117,147,120,120,150,130,120,170,50,75,100,100,100,100,55,75,110,60,80,120,100],"xaxis":"x","y":[45,65,95,90,110,60,100,80,130,90,120,80,100,90,100,45,65,95,115,100,60,70,90,90,100,120,90,90,100,35,53,70,121,71,121,65,90,125,30,50,75,50],"yaxis":"y","type":"scattergl"},{"hovertemplate":"Type 1=Flying<br>Att=%{x}<br>Def=%{y}<br>HP=%{marker.size}<extra></extra>","legendgroup":"Flying","marker":{"color":"#B6E880","size":[79,79,40,85,38,68,98,70],"sizemode":"area","sizeref":0.6375,"symbol":"circle"},"mode":"markers","name":"Flying","showlegend":true,"x":[115,100,30,70,47,67,87,85],"xaxis":"x","y":[70,80,35,80,35,55,105,55],"yaxis":"y","type":"scattergl"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Att"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Def"}},"legend":{"title":{"text":"Type 1"},"tracegroupgap":0,"itemsizing":"constant"},"margin":{"t":60}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('2c1e0f6b-fc6c-4f8e-8e84-3950dc225993');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
<section id="pizza" class="level3">
<h3 class="anchored" data-anchor-id="pizza">Pizza</h3>
<p>E por último, o gráfico que todos amam odiar! Quando estávamos aprendendo seaborn, esse gráfico é o que mais exigia a utilização da MatplotLib e o código era um pouco mais extenso. Aqui, a biblioteca Plotly mantém a simplicidade:</p>
<div id="cell-32" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.pie(pokemons_gb, values<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'AvgAttack'</span>, names<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>)</span>
<span id="cb12-2"></span>
<span id="cb12-3">fig.show(renderer<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'notebook'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="99eb8e80-4dbe-4f3e-bc9c-9d9632c60339" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("99eb8e80-4dbe-4f3e-bc9c-9d9632c60339")) {                    Plotly.newPlot(                        "99eb8e80-4dbe-4f3e-bc9c-9d9632c60339",                        [{"domain":{"x":[0.0,1.0],"y":[0.0,1.0]},"hovertemplate":"Generation=%{label}<br>AvgAttack=%{value}<extra></extra>","labels":[1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0],"legendgroup":"","name":"","showlegend":true,"values":[72.91390728476821,68.26,74.02173913043478,79.99137931034483,82.4478527607362,95.8796992481203,86.11206896551724,83.41739130434783],"type":"pie"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"legend":{"tracegroupgap":0},"margin":{"t":60}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('99eb8e80-4dbe-4f3e-bc9c-9d9632c60339');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<p>E o Plotly também torna mais simples criar uma variação do gráfico de pizza, conhecido como Donut!</p>
<div id="cell-34" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.pie(pokemons_gb, values<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'AvgAttack'</span>, names<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>, hole<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.45</span>)</span>
<span id="cb13-2"></span>
<span id="cb13-3">fig.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<pre><code>Unable to display output for mime type(s): application/vnd.plotly.v1+json</code></pre>
</div>
</div>
</section>
</section>
<section id="conclusão" class="level2">
<h2 class="anchored" data-anchor-id="conclusão">Conclusão</h2>
<p>E assim, encerramos a parte básica desta aula. Aprendemos como criar os principais tipos de gráficos usando a biblioteca Plotly.</p>
<p>Aprendemos também que a Plotly permite a criação de gráficos interativos, além de ter uma melhor resolução para apresentar os gráficos. Na última aula do nosso curso, iremos abordar a configuração dos gráficos.</p>
<p>Se você quiser aprender mais sobre Plotly, o link da documentação é este <a href="https://plotly.com/python/">aqui</a>.</p>
<section id="navegação" class="level3">
<h3 class="anchored" data-anchor-id="navegação">Navegação</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th><a href="../../posts/data-114/index.html">&lt; Anterior</a></th>
<th>|</th>
<th style="text-align: right;"><a href="../../posts/data-116/index.html">Próximo &gt;</a></th>
</tr>
</thead>

</table>


</section>
</section>

 ]]></description>
  <category>Visualização</category>
  <category>Python</category>
  <category>Pandas</category>
  <category>Plotly</category>
  <guid>https://blog.wvcode.com.br/posts/data-115/</guid>
  <pubDate>Fri, 17 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/library/concepts/programming_practice.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>[VDP] Aula 14 - Pandas e Bancos de Dados</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-114/</link>
  <description><![CDATA[ 





<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Olá Cientista de Dados!</p>
<p>Estamos chegando quase no fim do nosso curso, então vamos fazer a preparação para o que vem por aí!</p>
<p>Durante nosso aprendizado de Visualização de Dados, utilizamos conjuntos de dados que são armazenados em arquivos, do tipo CSV ou JSON (os mais populares), ou ainda modelos mais avançados como PARQUET.</p>
<p>Mas quando o volume de dados cresce exponencialmente ou você está em um ambiente corporativo, é necessário saber manipular bancos de dados. Bancos de dados são uma tecnologia incrível, que nos permite armazenar nossos dados de maneira simples e segura, distribuída e que nos permite, quando bem configurado, recuperar essa informação muito rapidamente.</p>
<p>O que torna os bancos de dados tão interessantes de usar é a linguagem SQL, que nos permite armazenar e recuperar informações de maneira estruturada e eficente. A linguagem SQL é tão importante para o ecossistema de bancos de dados, que ela já está integrada a maior parte das outras linguagens de programação, seja através de bibliotecas que permitem executar instruções SQL a partir de códigos C#, Java, Python e assim por diante, ou através de integrações mais profundas, como alternar entre SQL e Python em um Jupyter notebook.</p>
<p>E mesmo após esse texto motivacional, você deve estar se perguntando: o que vou fazer com esse conhecimento, se não entendo nada de banco de dados? Então, essa aula pode ser pulada sem problema por agora, mas é aconselhável que você volte assim que aprender mais sobre bancos de dados.</p>
<p>E se você já conhece o básico, continue aqui com a gente!</p>
</section>
<section id="problema" class="level2">
<h2 class="anchored" data-anchor-id="problema">Problema</h2>
<p>Imagine a seguinte situação: você tem um arquivo realmente grande, com vários milhões de linhas, que você precisa carregar em um DataFrame pandas para fazer algumas análises. Ao tentar carregar o arquivo utilizando o método tradicional do pandas, usando a função <code>read_csv()</code>, tudo parece estar funcionando normal, mas após executar algumas operações, seu notebook começa a reclamar de falta de memória para processar os dados.</p>
<p>Porque isso aconteceu? Isso é uma dos poucos problemas de pandas, cada transformação que fazemos em pandas normalmente gera um novo DataFrame, o que vai consumindo cada vez mais memória. Existe no próprio pandas uma maneira de resolver isso: muitas funções tem um parâmetro <code>inplace</code> que quando setamos o valor para <code>True</code>, ele altera o DataFrame corrente.</p>
<p>Seguindo o nosso cenário, adicionamos o parâmetro em algumas de nossas transformações e realmente a utilização da memória se reduz significativamente. No entanto, ao conseguirmos rodar toda a rotina, percebemos que ela está com uma performance bem ruim.</p>
<p>Neste caso, podemos tentar outras alternativas, como trocar pandas por Polars, que é outra biblioteca de manipulação e transformação de dados, ou utilizar bancos de dados.</p>
</section>
<section id="passo-a-passo" class="level2">
<h2 class="anchored" data-anchor-id="passo-a-passo">Passo a Passo</h2>
<p>Existem duas maneiras de se trabalhar com bancos de dados no nosso cenário: - Carregamos todos os dados em banco de dados, e partir daí: - Fazemos todas as análises utilizando uma ferramenta de SQL ou algo similar - Fazemos as análises misturando SQL e outra linguagem de programação, tanto em um script/programa ou em um notebook.</p>
<p>Nesta última aula, iremos abordar como utilizar SQL em conjunto com Python em nossos notebooks no Google Colab.</p>
<section id="passo-1---importar-as-bibliotecas-que-iremos-utilizar" class="level3">
<h3 class="anchored" data-anchor-id="passo-1---importar-as-bibliotecas-que-iremos-utilizar">Passo 1 - Importar as bibliotecas que iremos utilizar</h3>
<div id="cell-8" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> duckdb</span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>reload_ext sql</span></code></pre></div>
</div>
<p>Temos duas novidades: estamos importando uma nova biblioteca, chamada <code>duckdb</code>, que nos permitirá criar um banco de dados otimizado para análises. Você pode utilizar qualquer banco de dados.</p>
<p>A outra novidade é o comando <code>%reload_ext sql</code>. Esse comando carrega no contexto do notebook as bibliotecas <code>jupysql</code> e <code>SqlAlchemy</code> que nos permitem conectar a diversos bancos de dados e escrever SQL direto no notebook.</p>
<p>Também temos mais algumas configurações que precisam ser feitas:</p>
<div id="cell-10" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>config SqlMagic.autopandas <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span></span>
<span id="cb2-2"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>config SqlMagic.feedback <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb2-3"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>config SqlMagic.displaycon <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span></code></pre></div>
</div>
</section>
<section id="passo-2---iniciar-um-novo-banco-de-dados" class="level3">
<h3 class="anchored" data-anchor-id="passo-2---iniciar-um-novo-banco-de-dados">Passo 2 - Iniciar um novo banco de dados</h3>
<div id="cell-12" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> os.path.exists(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'./db.duckdb'</span>):</span>
<span id="cb3-2">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Este banco de dados já foi criado, vamos apaga-lo!'</span>)</span>
<span id="cb3-3">  os.remove(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'./db.duckdb'</span>)</span></code></pre></div>
</div>
<div id="cell-13" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>sql duckdb:<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">///</span>db.duckdb</span></code></pre></div>
</div>
<p>Aqui também temos uma novidade: estamos criando um novo banco de dados, indicando na conexão que é do tipo duckdb. Este banco será criado na pasta onde estou executando, no meu computador local, ou no caso do Google Colab, na pasta padrão de arquivos (content).</p>
</section>
<section id="passo-3---carregar-os-dados" class="level3">
<h3 class="anchored" data-anchor-id="passo-3---carregar-os-dados">Passo 3 - Carregar os dados</h3>
<p>Para isso, utilizamos a sintaxe <code>%sql</code> que nos permite utilizar uma linha de comando SQL em meio a código Python, como na situação abaixo:</p>
<div id="cell-17" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1">table_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'test_tbl2'</span></span>
<span id="cb5-2">file_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'teste.txt'</span></span>
<span id="cb5-3"></span>
<span id="cb5-4"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>sql create table {table_name} <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> select <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> read_csv_auto(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{file_name}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>O código acima cria uma tabela no banco de dados com o conteúdo arquivo que foi referenciado. Ao final, mostra a contagem de linhas que foram carregadas.</p>
<p>Quando queremos usar apenas SQL na célula, podemos utilizar o <code>%%sql</code>:</p>
<div id="cell-20" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%%</span>sql</span>
<span id="cb6-2">select <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> </span>
<span id="cb6-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> test_tbl</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">c1</th>
<th data-quarto-table-cell-role="th">c2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>'test'</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2</td>
<td>'test2'</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Agora, depois desta pequena demonstração, vamos ao nosso exemplo mais real: vamos carregar os nossos dados em uma tabela no banco de dados, realizar uma SQL query para extrair da tabela apenas as linhas que interessam para nossa análise, e então, fazer a plotagem dos dados.</p>
</section>
<section id="passo-4---vendo-um-exemplo-do-início-ao-fim" class="level3">
<h3 class="anchored" data-anchor-id="passo-4---vendo-um-exemplo-do-início-ao-fim">Passo 4 - Vendo um exemplo do início ao fim</h3>
<div id="cell-23" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Código para baixar um arquivo da internet</span></span>
<span id="cb7-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> requests <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> r <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># importa a biblioteca de manipulação de requests</span></span>
<span id="cb7-3"></span>
<span id="cb7-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># faz uma chamada para um arquivo texto que está na internet</span></span>
<span id="cb7-5">conteudo_arquivo <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> r.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://github.com/labeduc/datasets/blob/main/pokemons/all.csv?raw=true'</span>)</span>
<span id="cb7-6"></span>
<span id="cb7-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Grava o conteúdo que foi baixado em um arquivo local</span></span>
<span id="cb7-8"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pokemons.csv'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'w'</span>, encoding<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'utf-8'</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> fw:</span>
<span id="cb7-9">    fw.write(conteudo_arquivo.text)</span></code></pre></div>
</div>
<div id="cell-24" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Carregando dados no arquivo.</span></span>
<span id="cb8-2"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>sql create table pokemons <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> select <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> read_csv_auto(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pokemons.csv'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1032</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-25" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Agora precisamos trazer o resultado da media de ataque por geração de pokemon</span></span>
<span id="cb9-2"></span>
<span id="cb9-3"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>sql pokemons_agg <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;&lt;</span> SELECT Generation, AVG(Att) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> AvgAtt FROM pokemons group by Generation</span></code></pre></div>
</div>
<div id="cell-26" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1">pokemons_agg</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Generation</th>
<th data-quarto-table-cell-role="th">AvgAtt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1.0</td>
<td>72.913907</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>6.0</td>
<td>95.879699</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>7.0</td>
<td>86.112069</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>8.0</td>
<td>83.417391</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2.0</td>
<td>68.260000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>3.0</td>
<td>74.021739</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>4.0</td>
<td>79.991379</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>5.0</td>
<td>82.447853</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>E a partir daqui, podemos começar a plotar nosso gráfico.</p>
<div id="cell-28" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> seaborn <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sns</span>
<span id="cb11-2"></span>
<span id="cb11-3"></span>
<span id="cb11-4">sns.barplot(pokemons_agg, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>,  y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'AvgAtt'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-114/index_files/figure-html/cell-12-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="passo-5---fechando-a-conexão" class="level3">
<h3 class="anchored" data-anchor-id="passo-5---fechando-a-conexão">Passo 5 - Fechando a conexão</h3>
<div id="cell-30" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>sql <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--</span>conn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--</span>close</span></code></pre></div>
</div>
</section>
</section>
<section id="conclusão" class="level2">
<h2 class="anchored" data-anchor-id="conclusão">Conclusão</h2>
<p>Nesta aula, conseguimos aprender como podemos integrar bancos de dados em nossos notebooks para tirar vantagem de sua grande capacidade de armazenamento e da linguagem SQL para realizar transformações nos dados e gerar nossos DataFrames.</p>
<p>Separamos alguns links para você se familiarizar mais com o assunto de bancos de dados: - Documentação <a href="https://duckdb.org/docs/">DuckDb</a> - Porque usar DuckDb? <a href="https://duckdb.org/why_duckdb">Leia aqui uma resposta</a> - <a href="https://medium.com/towards-data-science/running-sql-queries-in-jupyter-notebook-using-jupysql-duckdb-and-mysql-3c53fbe40f8d">Rodando SQL em Jupyter notebooks-usando JUPYSQL (com duckdb e mysql)</a></p>
<section id="navegação" class="level3">
<h3 class="anchored" data-anchor-id="navegação">Navegação</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th><a href="../../posts/data-113/index.html">&lt; Anterior</a></th>
<th>|</th>
<th style="text-align: right;"><a href="../../posts/data-115/index.html">Próximo &gt;</a></th>
</tr>
</thead>

</table>


</section>
</section>

 ]]></description>
  <category>Visualização</category>
  <category>Python</category>
  <category>Pandas</category>
  <category>Bancos de Dados</category>
  <guid>https://blog.wvcode.com.br/posts/data-114/</guid>
  <pubDate>Thu, 16 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/library/concepts/programming_practice.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>[VDP] Aula 13 - Visualizando Wordclouds</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-113/</link>
  <description><![CDATA[ 





<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Olá Cientista de Dados!</p>
<p>Nesta aula, vamos explorar uma técnica para analisar variáveis qualitativas.</p>
</section>
<section id="problema" class="level2">
<h2 class="anchored" data-anchor-id="problema">Problema</h2>
<p>Foi solicitado que você faça uma análise comparativa dos pokemons baseados em seu poder de ataque. Naturalmente, pensamos que um simples gráfico de barras ou colunas pode resolver essa situação, mas com o grande número de pokemons que temos (˜1000) o gráfico ficaria muito extenso. Então, como mostrar essa comparação?</p>
<p>Entra aí a word cloud, ou nuvem de palavras. A nuvem de palavras vai mostrar palavras com tamanho variável, geralmente de acordo com a frequência da ocorrência da palavra no corpo de texto. Então, vamos considerar que o nosso corpo de texto é a lista de nomes de pokemon, e o poder ataque indica a frequência de cada um. Se formatado corretamente, podemos utilizar e garantimos que todos os pokemons aparecerão em uma tela.</p>
<p>Mas o seaborn faz isso? Não, teremos que introduzir mais uma biblioteca, desta vez chamada wordcloud. No código abaixo, acompanhe o passo a passo para gerar a word cloud.</p>
</section>
<section id="passo-a-passo" class="level2">
<h2 class="anchored" data-anchor-id="passo-a-passo">Passo a Passo</h2>
<p>Vamos compor nossa solução, pedaço por pedaço. Como sempre, o primeiro passo é carregar nossas bibliotecas. Como a biblioteca wordcloud é nova, antes precisamos instala-la. Isso é feito com o seguinte comando:</p>
<pre class="shell"><code>$ pip install wordcloud</code></pre>
<div id="cell-7" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb2-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb2-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> seaborn <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sns</span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Biblioteca wordcloud - No google colab ela já está disponível. </span></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Se for usar em seu computador, instale antes com o seguinte comando:</span></span>
<span id="cb2-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pip install wordcloud</span></span>
<span id="cb2-7"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> wordcloud <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> STOPWORDS, ImageColorGenerator, WordCloud</span></code></pre></div>
</div>
<p>Agora, vamos a configuração.</p>
<div id="cell-9" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Definindo a nossa paleta de cores - vamos utilizar nossas próprias cores</span></span>
<span id="cb3-2">cores <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#0c4f6a"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#177498"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#0a8faa"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#bfdce5"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#82bd4a"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#b8d67a"</span>,</span>
<span id="cb3-3">         <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#b2b3b6"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#58585a"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#edb634"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#d97933"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#f1bdb1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#eca091"</span>,</span>
<span id="cb3-4">         <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#e26c54"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#b0391e"</span>]</span>
<span id="cb3-5"></span>
<span id="cb3-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Tamanho da Imagem</span></span>
<span id="cb3-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Este tamanho é em polegadas</span></span>
<span id="cb3-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O primeiro valor é Largura e o segundo, Altura</span></span>
<span id="cb3-9">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.figsize"</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)</span>
<span id="cb3-10"></span>
<span id="cb3-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Resolução da Imagem</span></span>
<span id="cb3-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 300 dpi é o padrão mínimo para impressão</span></span>
<span id="cb3-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Aqui vamos usar um pouco menos</span></span>
<span id="cb3-14">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb3-15">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb3-16">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.format"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"svg"</span></span>
<span id="cb3-17"></span>
<span id="cb3-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Removendo Bordas em torno do gráfico</span></span>
<span id="cb3-19">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.right"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb3-20">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.top"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb3-21">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.bottom"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb3-22">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.left"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb3-23"></span>
<span id="cb3-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Carregando a paleta de cores</span></span>
<span id="cb3-25">sns.set_palette(sns.color_palette(cores))</span></code></pre></div>
</div>
<p>A próxima etapa é carregar os dados.</p>
<div id="cell-11" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># carregando os dados da internet</span></span>
<span id="cb4-2">df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://github.com/labeduc/datasets/blob/main/pokemons/all.csv?raw=true'</span>)</span>
<span id="cb4-3"></span>
<span id="cb4-4">df.sample(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Number</th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Type 1</th>
<th data-quarto-table-cell-role="th">Type 2</th>
<th data-quarto-table-cell-role="th">Abilities</th>
<th data-quarto-table-cell-role="th">HP</th>
<th data-quarto-table-cell-role="th">Att</th>
<th data-quarto-table-cell-role="th">Def</th>
<th data-quarto-table-cell-role="th">Spa</th>
<th data-quarto-table-cell-role="th">Spd</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Against Bug</th>
<th data-quarto-table-cell-role="th">Against Rock</th>
<th data-quarto-table-cell-role="th">Against Ghost</th>
<th data-quarto-table-cell-role="th">Against Dragon</th>
<th data-quarto-table-cell-role="th">Against Dark</th>
<th data-quarto-table-cell-role="th">Against Steel</th>
<th data-quarto-table-cell-role="th">Against Fairy</th>
<th data-quarto-table-cell-role="th">Height</th>
<th data-quarto-table-cell-role="th">Weight</th>
<th data-quarto-table-cell-role="th">BMI</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">730</td>
<td>631</td>
<td>Heatmor</td>
<td>Fire</td>
<td>NaN</td>
<td>['Flash Fire', 'Gluttony', 'White Smoke']</td>
<td>85</td>
<td>97</td>
<td>66</td>
<td>105</td>
<td>66</td>
<td>...</td>
<td>0.5</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>0.5</td>
<td>1.4</td>
<td>58.0</td>
<td>29.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>10</td>
<td>Caterpie</td>
<td>Bug</td>
<td>NaN</td>
<td>['Run Away', 'Shield Dust']</td>
<td>45</td>
<td>30</td>
<td>35</td>
<td>20</td>
<td>20</td>
<td>...</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.3</td>
<td>2.9</td>
<td>32.2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1027</td>
<td>896</td>
<td>Glastrier</td>
<td>Ice</td>
<td>NaN</td>
<td>['Chilling Neigh']</td>
<td>100</td>
<td>145</td>
<td>130</td>
<td>65</td>
<td>110</td>
<td>...</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>2.2</td>
<td>800.0</td>
<td>165.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">412</td>
<td>347</td>
<td>Anorith</td>
<td>Rock</td>
<td>Bug</td>
<td>['Battle Armor', 'Swift Swim']</td>
<td>45</td>
<td>95</td>
<td>50</td>
<td>40</td>
<td>50</td>
<td>...</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>0.7</td>
<td>12.5</td>
<td>25.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">889</td>
<td>766</td>
<td>Passimian</td>
<td>Fighting</td>
<td>NaN</td>
<td>['Defiant', 'Receiver']</td>
<td>100</td>
<td>120</td>
<td>90</td>
<td>40</td>
<td>60</td>
<td>...</td>
<td>0.5</td>
<td>0.5</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>1.0</td>
<td>2.0</td>
<td>2.0</td>
<td>82.8</td>
<td>20.7</td>
</tr>
</tbody>
</table>

<p>5 rows × 44 columns</p>
</div>
</div>
</div>
<p>E o último passo antes de plotar o gráfico é transformar os dados. A transformação que iremos fazer é a seguinte: para cada pokemon, temos o poder de ataque. Esta biblioteca wordcloud funciona de dois modos: podemos gerar a imagem a partir de um texto, e ele fará a quebra, removerá stopwords, e calculará a frequencia, ou passamos para ele um dicionário de frequências. Vamos optar por este último, por fazer mais sentido com os dados que temos.</p>
<div id="cell-13" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1">lista <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {}</span>
<span id="cb5-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> idx, row <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> df.iterrows():</span>
<span id="cb5-3">  lista[row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Name'</span>]] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Att'</span>]</span></code></pre></div>
</div>
<p>E finalmente, chamamos a biblioteca e fazemos a plotagem com o auxilio da matplotlib.</p>
<div id="cell-15" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1">wordcloud <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> WordCloud(max_font_size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, max_words<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>df.size, background_color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>).generate_from_frequencies(lista)</span>
<span id="cb6-2">plt.figure()</span>
<span id="cb6-3">plt.imshow(wordcloud)</span>
<span id="cb6-4">plt.axis(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"off"</span>)</span>
<span id="cb6-5">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-113/index_files/figure-html/cell-6-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Que gráfico interessante, não? Mostra muito mais pokemons do que um gráfico de barras mostraria, e deixa bem claro quais pokemons são mais poderosos, pelo menos no que diz respeito ao ataque.</p>
<p>Antes de encerrar, mais um truque da biblioteca wordcloud: fazer a plotagem do gráfico seguindo o formato de uma imagem.</p>
<div id="cell-17" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb7-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> PIL <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Image</span>
<span id="cb7-3"></span>
<span id="cb7-4">mask <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.array(Image.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"squirtle.jpg"</span>))</span>
<span id="cb7-5">wordcloud <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> WordCloud(max_font_size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, max_words<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>df.size, background_color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>, mask<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>mask).generate_from_frequencies(lista)</span>
<span id="cb7-6">plt.figure()</span>
<span id="cb7-7">plt.imshow(wordcloud)</span>
<span id="cb7-8">plt.axis(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"off"</span>)</span>
<span id="cb7-9">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-113/index_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Agora sim, uma wordcloud de respeito!</p>
</section>
<section id="conclusão" class="level2">
<h2 class="anchored" data-anchor-id="conclusão">Conclusão</h2>
<p>Nesta aula aprendemos a plotar mais um tipo de gráfico, utilizando uma nova biblioteca. Se quiser mais detalhes sobre a biblioteca wordcloud, clique <a href="https://amueller.github.io/word_cloud/index.html">aqui</a>.</p>
<p>Esta também é nossa última aula falando de gráficos e bibliotecas que podemos utilizar. Nas próximas aulas, iremos explorar novamente a biblioteca pandas e também aprofundar nosso conhecimento na biblioteca plotly.</p>
<section id="navegação" class="level3">
<h3 class="anchored" data-anchor-id="navegação">Navegação</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th><a href="../../posts/data-112/index.html">&lt; Anterior</a></th>
<th>|</th>
<th style="text-align: right;"><a href="../../posts/data-114/index.html">Próximo &gt;</a></th>
</tr>
</thead>

</table>


</section>
</section>

 ]]></description>
  <category>Visualização</category>
  <category>Python</category>
  <category>Pandas</category>
  <category>Wordcloud</category>
  <guid>https://blog.wvcode.com.br/posts/data-113/</guid>
  <pubDate>Wed, 15 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/library/concepts/programming_practice.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>[VDP] Aula 12 - Visualizando Sankey Charts</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-112/</link>
  <description><![CDATA[ 





<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Olá Cientista de Dados!</p>
<p>Mais uma aula chegando, e hoje vamos apresentar para vocês mais um gráfico extremamente interessante, o <code>Sankey Chart</code>.</p>
<p>O Sankey Chart ou Diagrama de Sankey é uma forma de visualização de dados desenvolvida durate a revolução industrial. O método de análise foi criado pelo capitão irlandês Matthew Sankey.</p>
<p>O diagrama de Sankey é uma representação visual da relação entre duas variáveis, que possui um ponto de partida e pelo menos um ponto de chegada. Vamos ao nosso exemplo.</p>
</section>
<section id="problema" class="level2">
<h2 class="anchored" data-anchor-id="problema">Problema</h2>
<p>Voltando ao nosso conjunto de dados de pokemons, vamos supor que gostaríamos de ver a distribuição de pokemons levando em consideração a geração e o seu tipo. Você prontamente pensou em fazer uma tabela, assim como 90% dos outros analistas. Mas, ao entregar a tabela, você percebe que fica difícil de mostrar visualmente como as gerações contribuem para cada tipo, bem como ter uma idéia do total de pokemons por tipo considerando todas as gerações. A única maneira de fazer isso seria criar outra tabela, que mostra a informação agrupada de outra forma.</p>
<p>O Diagrama de Sankey serve para esses casos onde desejamos visualizar a relação entre duas categorias em um só lugar, não importando como o dado está organizado.</p>
</section>
<section id="passo-a-passo" class="level2">
<h2 class="anchored" data-anchor-id="passo-a-passo">Passo a Passo</h2>
<section id="carregando-biblioteca-e-dados" class="level3">
<h3 class="anchored" data-anchor-id="carregando-biblioteca-e-dados">Carregando biblioteca e dados</h3>
<div id="cell-7" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> plotly.graph_objects <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> go  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># biblioteca nova - plotly</span></span>
<span id="cb1-3"></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># carregando os dados da internet</span></span>
<span id="cb1-5">df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://github.com/labeduc/datasets/blob/main/pokemons/all.csv?raw=true'</span>)</span>
<span id="cb1-6"></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># filtrando apenas as colunas que nos interessam</span></span>
<span id="cb1-8">tipos <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Type 1'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Number'</span>]]</span>
<span id="cb1-9"></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># agregando os dados para reduzir o número de data points</span></span>
<span id="cb1-11">agg <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> tipos.groupby([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Type 1'</span>]).count().reset_index()</span></code></pre></div>
</div>
</section>
<section id="preparando-os-dados" class="level3">
<h3 class="anchored" data-anchor-id="preparando-os-dados">Preparando os dados</h3>
<p>Assim como vimos no gráfico de rede, precisamos estabelecer quem são nossos nodos e quais os valores dos vertices.</p>
<div id="cell-10" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"></span>
<span id="cb2-2">nodes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {}</span>
<span id="cb2-3">idx <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb2-4"></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Primeira parte da preparação é pegar todos os possíveis nodos dos nossos dados</span></span>
<span id="cb2-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># (que são as gerações e tipos) e salvar em um dicionário, onde também atribuímos</span></span>
<span id="cb2-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># um índice numérico</span></span>
<span id="cb2-8"></span>
<span id="cb2-9"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> agg[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Generation"</span>]:</span>
<span id="cb2-10">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> nodes:</span>
<span id="cb2-11">    nodes[item] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> idx</span>
<span id="cb2-12">    idx <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb2-13"></span>
<span id="cb2-14"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> agg[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Type 1"</span>]:</span>
<span id="cb2-15">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> nodes:</span>
<span id="cb2-16">    nodes[item] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> idx</span>
<span id="cb2-17">    idx <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb2-18"></span>
<span id="cb2-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Depois criamos a estrutura que será usada para a plotagem</span></span>
<span id="cb2-20">link <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb2-21">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source"</span>: [nodes[item] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> agg[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Generation"</span>]], <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># adicionamos todos os nodos de origem, mas em vez da descrição, utilizamos os índices </span></span>
<span id="cb2-22">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"target"</span>: [nodes[item] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> agg[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Type 1"</span>]], <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># adicionamos todos os nodos de destino, mas em vez da descrição, utilizamos os índices  </span></span>
<span id="cb2-23">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"value"</span>: agg[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Number"</span>].tolist()</span>
<span id="cb2-24">    }</span></code></pre></div>
</div>
</section>
<section id="plotando-o-gráfico" class="level3">
<h3 class="anchored" data-anchor-id="plotando-o-gráfico">Plotando o Gráfico</h3>
<div id="cell-12" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Próximo passo é agregar os labels dos dados, que são as chaves no nosso dicionário de nodos</span></span>
<span id="cb3-2">rawdata <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb3-3">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"label"</span>: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>(nodes.keys())},</span>
<span id="cb3-4">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"link"</span>: link</span>
<span id="cb3-5">}</span>
<span id="cb3-6"></span>
<span id="cb3-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Criamos o diagrama</span></span>
<span id="cb3-8">data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> go.Sankey(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span>rawdata)</span>
<span id="cb3-9"></span>
<span id="cb3-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fazemos a plotagem</span></span>
<span id="cb3-11">fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> go.Figure(data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>data)</span>
<span id="cb3-12">fig.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<pre><code>Unable to display output for mime type(s): application/vnd.plotly.v1+json</code></pre>
</div>
</div>
<p>E aí está o gráfico. Uma das vantagens de se usar a biblioteca plotly é que os gráficos se tornam interativos. Pode ir ali passar o mouse em cima e você vai ver os tooltips, dando informações interessantes sobre os dados. Assim, podemos analisar tanto pelo lado das gerações quando pelo lado dos tipos e ter totalizadores, sem precisar gerar mais gráficos.</p>
</section>
</section>
<section id="conclusão" class="level2">
<h2 class="anchored" data-anchor-id="conclusão">Conclusão</h2>
<p>E este foi mais um gráfico que aprendemos a usar. Lembre-se que ele pode ser usado para descobrir relações entre variáveis categóricas, em múltiplos níveis.</p>
<p>Também foi uma oportunidade para aprender uma nova biblioteca de plotagem de gráficos, a <a href="https://plotly.com/python/">plotly</a>. Veremos essa biblioteca em maior detalhe em uma aula futura.</p>
<section id="navegação" class="level3">
<h3 class="anchored" data-anchor-id="navegação">Navegação</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th><a href="../../posts/data-111/index.html">&lt; Anterior</a></th>
<th>|</th>
<th style="text-align: right;"><a href="../../posts/data-113/index.html">Próximo &gt;</a></th>
</tr>
</thead>

</table>


</section>
</section>

 ]]></description>
  <category>Visualização</category>
  <category>Python</category>
  <category>Pandas</category>
  <category>Sankey Chart</category>
  <guid>https://blog.wvcode.com.br/posts/data-112/</guid>
  <pubDate>Tue, 14 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/library/concepts/programming_practice.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>[VDP] Aula 11 - Visualizando Mapas de Rede</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-111/</link>
  <description><![CDATA[ 





<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Olá Cientista de Dados!</p>
<p>A partir desta aula, iremos explorar outras bibliotecas para aumentar o seu repertório de visualizações e também, praticar a manipulação de dados com pandas.</p>
<p>Nesta aula, vamos aprender a plotar um mapa de rede, ou network mapping.</p>
</section>
<section id="problema" class="level2">
<h2 class="anchored" data-anchor-id="problema">Problema</h2>
<p>O gráfico chamado de mapa de rede ou network mapping tem o objetivo de demonstrar relacionamentos entre categorias dos nossos dados. A utilização mais comum é a de demonstrar como pessoas se conectam nas redes sociais. Também podemos utilizar em outras situações onde dois elementos tem algum tipo de relacionamento, como por exemplo, partidas de futebol. O nosso problema gira em torno dessa temática: queremos mostrar em um gráfico quais times tem um histórico de enfrentamento.</p>
</section>
<section id="passo-a-passo" class="level2">
<h2 class="anchored" data-anchor-id="passo-a-passo">Passo a Passo</h2>
<section id="carregando-bibliotecas" class="level3">
<h3 class="anchored" data-anchor-id="carregando-bibliotecas">Carregando Bibliotecas</h3>
<p>Como sempre, iniciamos carregando nossas bibliotecas. Aqui, utilizaremos uma nova, chamada NetworkX e não carregamos a seaborn, que não será utilizada.</p>
<div id="cell-8" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> networkx <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> nx</span></code></pre></div>
</div>
</section>
<section id="carregando-dados" class="level3">
<h3 class="anchored" data-anchor-id="carregando-dados">Carregando dados</h3>
<p>Depois, carregamos nossos dados. Utilizaremos dados de confrontos de seleções no futebol.</p>
<div id="cell-11" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"></span>
<span id="cb2-2">df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_json(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://raw.githubusercontent.com/labeduc/datasets/main/worldcup/worldcup.json'</span>)</span>
<span id="cb2-3"></span>
<span id="cb2-4">df.sample(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">home_team</th>
<th data-quarto-table-cell-role="th">away_team</th>
<th data-quarto-table-cell-role="th">home_team_continent</th>
<th data-quarto-table-cell-role="th">away_team_continent</th>
<th data-quarto-table-cell-role="th">home_team_fifa_rank</th>
<th data-quarto-table-cell-role="th">away_team_fifa_rank</th>
<th data-quarto-table-cell-role="th">home_team_total_fifa_points</th>
<th data-quarto-table-cell-role="th">away_team_total_fifa_points</th>
<th data-quarto-table-cell-role="th">home_team_score</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">shoot_out</th>
<th data-quarto-table-cell-role="th">home_team_result</th>
<th data-quarto-table-cell-role="th">home_team_goalkeeper_score</th>
<th data-quarto-table-cell-role="th">away_team_goalkeeper_score</th>
<th data-quarto-table-cell-role="th">home_team_mean_defense_score</th>
<th data-quarto-table-cell-role="th">home_team_mean_offense_score</th>
<th data-quarto-table-cell-role="th">home_team_mean_midfield_score</th>
<th data-quarto-table-cell-role="th">away_team_mean_defense_score</th>
<th data-quarto-table-cell-role="th">away_team_mean_offense_score</th>
<th data-quarto-table-cell-role="th">away_team_mean_midfield_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">16723</td>
<td>2014-05-16 00:00:00+00:00</td>
<td>Kuwait</td>
<td>Kyrgyz Republic</td>
<td>Asia</td>
<td>Asia</td>
<td>108</td>
<td>146</td>
<td>282</td>
<td>147</td>
<td>2</td>
<td>...</td>
<td>No</td>
<td>Draw</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">441</td>
<td>1994-07-14 00:00:00+00:00</td>
<td>Japan</td>
<td>Ghana</td>
<td>Asia</td>
<td>Africa</td>
<td>52</td>
<td>26</td>
<td>0</td>
<td>0</td>
<td>2</td>
<td>...</td>
<td>No</td>
<td>Win</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10102</td>
<td>2006-12-01 00:00:00+00:00</td>
<td>Ethiopia</td>
<td>Malawi</td>
<td>Africa</td>
<td>Africa</td>
<td>100</td>
<td>94</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>...</td>
<td>No</td>
<td>Win</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3309</td>
<td>1998-09-28 00:00:00+00:00</td>
<td>Australia</td>
<td>Cook Islands</td>
<td>Oceania</td>
<td>Oceania</td>
<td>36</td>
<td>193</td>
<td>0</td>
<td>0</td>
<td>16</td>
<td>...</td>
<td>No</td>
<td>Win</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7353</td>
<td>2003-09-26 00:00:00+00:00</td>
<td>Malaysia</td>
<td>Indonesia</td>
<td>Asia</td>
<td>Asia</td>
<td>117</td>
<td>92</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>...</td>
<td>No</td>
<td>Draw</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>5 rows × 25 columns</p>
</div>
</div>
</div>
</section>
<section id="plotando-o-gráfico" class="level3">
<h3 class="anchored" data-anchor-id="plotando-o-gráfico">Plotando o gráfico</h3>
<p>Agora, vamos entender como um network mapping funciona. O network mapping precisa de duas coisas: - nodos: os elementos que queremos verificar o relacionamento. No nosso caso, serão os times - vertices: a conexão entre os elementos. No nosso caso são as partidas. Os vértices podem ou não ter um peso, o que pode refletir na largura do vértice, por exemplo. Vamos iniciar sem considerar o peso.</p>
<p>Então, nosso primeiro passo será organizar nossos dados nestas duas entidades: nodos e vertices.</p>
<div id="cell-14" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Criando listas vazias para os nodos e para as conexões</span></span>
<span id="cb3-2">nodes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb3-3">edges <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb3-4"></span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Popula a lista de nodos com base nos respondentes</span></span>
<span id="cb3-6"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"home_team"</span>]:</span>
<span id="cb3-7">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> nodes:</span>
<span id="cb3-8">    nodes.append(item)</span>
<span id="cb3-9"></span>
<span id="cb3-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Termina de popular a lista de nodos com os targets</span></span>
<span id="cb3-11"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"away_team"</span>]:</span>
<span id="cb3-12">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> nodes:</span>
<span id="cb3-13">    nodes.append(item)</span>
<span id="cb3-14"></span>
<span id="cb3-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Popula a lista de conexões com o respondente e o target</span></span>
<span id="cb3-16"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> idx, item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">enumerate</span>(df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"home_team"</span>]):</span>
<span id="cb3-17">  edges.append([item, df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"away_team"</span>][idx]])</span></code></pre></div>
</div>
<p>Depois disso, vamos a plotagem do gráfico. Basicamente, carregamos os nodos e vertices no objeto do gráfico e em seguida, plotamos.</p>
<div id="cell-16" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cria o objeto que representa o network map</span></span>
<span id="cb4-2">net <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> nx.Graph()</span>
<span id="cb4-3"></span>
<span id="cb4-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adiciona os nodos</span></span>
<span id="cb4-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> nodes:</span>
<span id="cb4-6">  net.add_node(item)</span>
<span id="cb4-7"></span>
<span id="cb4-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adiciona as conexões</span></span>
<span id="cb4-9"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> edges:</span>
<span id="cb4-10">  net.add_edge(item[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>], item[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>], length<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>)</span>
<span id="cb4-11"></span>
<span id="cb4-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cria um objeto para configurar a área de plotagem</span></span>
<span id="cb4-13">pos <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> nx.spring_layout(net, seed<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3068</span>, k<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>, iterations<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>) </span>
<span id="cb4-14"></span>
<span id="cb4-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Ajustes de configuração para plotagem</span></span>
<span id="cb4-16">options <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb4-17">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font_size"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>,</span>
<span id="cb4-18">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node_size"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>,</span>
<span id="cb4-19">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node_color"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>,</span>
<span id="cb4-20">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"edgecolors"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>,</span>
<span id="cb4-21">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"linewidths"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span id="cb4-22">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"width"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span id="cb4-23">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"with_labels"</span>: <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span></span>
<span id="cb4-24">}</span>
<span id="cb4-25"></span>
<span id="cb4-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plota o gráfico</span></span>
<span id="cb4-27">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.figsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12.00</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12.00</span>]</span>
<span id="cb4-28">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.autolayout"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span></span>
<span id="cb4-29">nx.draw(net, pos<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>pos, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span>options)</span>
<span id="cb4-30">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-111/index_files/figure-html/cell-5-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Ficou um gráfico bem poluído, não? Uma das razões são os dados, que apresentam uma repetição, porque cada partida é uma linha. E se fizessemos um agrupamento, contando o número de partidas e eliminamos os confrontos que ocorreram menos de 5 vezes?</p>
<div id="cell-18" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1">sub_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"home_team"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"away_team"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"home_team_score"</span>]].groupby([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"home_team"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"away_team"</span>]).count().reset_index()</span>
<span id="cb5-2"></span>
<span id="cb5-3">sub_df</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">home_team</th>
<th data-quarto-table-cell-role="th">away_team</th>
<th data-quarto-table-cell-role="th">home_team_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Afghanistan</td>
<td>Bangladesh</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Afghanistan</td>
<td>Bhutan</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Afghanistan</td>
<td>Cambodia</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Afghanistan</td>
<td>Chinese Taipei</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Afghanistan</td>
<td>India</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9006</td>
<td>Zimbabwe</td>
<td>Tanzania</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9007</td>
<td>Zimbabwe</td>
<td>Togo</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9008</td>
<td>Zimbabwe</td>
<td>Tunisia</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9009</td>
<td>Zimbabwe</td>
<td>Uganda</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9010</td>
<td>Zimbabwe</td>
<td>Zambia</td>
<td>14</td>
</tr>
</tbody>
</table>

<p>9011 rows × 3 columns</p>
</div>
</div>
</div>
<p>Agora, vamos tentar novamente.</p>
<div id="cell-20" class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Criando listas vazias para os nodos e para as conexões</span></span>
<span id="cb6-2">nodes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb6-3">edges <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb6-4"></span>
<span id="cb6-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Popula a lista de nodos com base nos respondentes</span></span>
<span id="cb6-6"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> sub_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"home_team"</span>]:</span>
<span id="cb6-7">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> nodes:</span>
<span id="cb6-8">    nodes.append(item)</span>
<span id="cb6-9"></span>
<span id="cb6-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Termina de popular a lista de nodos com os targets</span></span>
<span id="cb6-11"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> sub_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"away_team"</span>]:</span>
<span id="cb6-12">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> nodes:</span>
<span id="cb6-13">    nodes.append(item)</span>
<span id="cb6-14"></span>
<span id="cb6-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Popula a lista de conexões com o respondente e o target</span></span>
<span id="cb6-16"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> idx, item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">enumerate</span>(sub_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"home_team"</span>]):</span>
<span id="cb6-17">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> sub_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"home_team_score"</span>][idx] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>:</span>
<span id="cb6-18">    edges.append([item, sub_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"away_team"</span>][idx]])</span></code></pre></div>
</div>
<div id="cell-21" class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cria o objeto que representa o network map</span></span>
<span id="cb7-2">net <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> nx.Graph()</span>
<span id="cb7-3"></span>
<span id="cb7-4">list_valid_nodes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb7-5"></span>
<span id="cb7-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adiciona as conexões</span></span>
<span id="cb7-7"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> edges:</span>
<span id="cb7-8">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># se a partida foi listada aqui, </span></span>
<span id="cb7-9">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># adiciona na lista de nodos válidos</span></span>
<span id="cb7-10">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>] <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> list_valid_nodes:</span>
<span id="cb7-11">    list_valid_nodes.append(item[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>])</span>
<span id="cb7-12">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> list_valid_nodes:</span>
<span id="cb7-13">    list_valid_nodes.append(item[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span>
<span id="cb7-14">  net.add_edge(item[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>], item[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>], length<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>)</span>
<span id="cb7-15"></span>
<span id="cb7-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adiciona os nodos</span></span>
<span id="cb7-17"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> nodes:</span>
<span id="cb7-18">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># adiciona um nodo somente se está </span></span>
<span id="cb7-19">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># na lista de nodos válidos</span></span>
<span id="cb7-20">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> list_valid_nodes:</span>
<span id="cb7-21">    net.add_node(item)</span>
<span id="cb7-22"></span>
<span id="cb7-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cria um objeto para configurar a área de plotagem</span></span>
<span id="cb7-24">pos <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> nx.spring_layout(net, seed<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3068</span>, k<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>, iterations<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>) </span>
<span id="cb7-25"></span>
<span id="cb7-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Ajustes de configuração para plotagem</span></span>
<span id="cb7-27">options <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb7-28">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font_size"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>,</span>
<span id="cb7-29">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node_size"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>,</span>
<span id="cb7-30">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node_color"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>,</span>
<span id="cb7-31">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"edgecolors"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>,</span>
<span id="cb7-32">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"linewidths"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span id="cb7-33">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"width"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span id="cb7-34">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"with_labels"</span>: <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span></span>
<span id="cb7-35">}</span>
<span id="cb7-36"></span>
<span id="cb7-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plota o gráfico</span></span>
<span id="cb7-38">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.figsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12.00</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12.00</span>]</span>
<span id="cb7-39">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.autolayout"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span></span>
<span id="cb7-40">nx.draw(net, pos<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>pos, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span>options)</span>
<span id="cb7-41">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/wpcortes/Work/blog/venv/lib/python3.9/site-packages/IPython/core/pylabtools.py:152: UserWarning: This figure includes Axes that are not compatible with tight_layout, so results might be incorrect.
  fig.canvas.print_figure(bytes_io, **kw)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-111/index_files/figure-html/cell-8-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Ainda temos muitos dados para mostrar. Então, quem sabe filtramos apenas os confrontos do Brasil, para termos algo mais simples de visualizar? Também vamos introduzir modificações no peso das conexões (número de confrontos) e no tamanho do nodo do Brazil, para diferenciar o nodo inicial.</p>
<div id="cell-23" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1">brazil_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sub_df.query(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"home_team == 'Brazil' or away_team == 'Brazil'"</span>).reset_index()</span>
<span id="cb9-2"></span>
<span id="cb9-3">brazil_df</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">index</th>
<th data-quarto-table-cell-role="th">home_team</th>
<th data-quarto-table-cell-role="th">away_team</th>
<th data-quarto-table-cell-role="th">home_team_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>81</td>
<td>Algeria</td>
<td>Brazil</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>152</td>
<td>Andorra</td>
<td>Brazil</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>287</td>
<td>Argentina</td>
<td>Brazil</td>
<td>15</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>400</td>
<td>Australia</td>
<td>Brazil</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>465</td>
<td>Austria</td>
<td>Brazil</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">118</td>
<td>8591</td>
<td>United Arab Emirates</td>
<td>Brazil</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">119</td>
<td>8654</td>
<td>Uruguay</td>
<td>Brazil</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">120</td>
<td>8746</td>
<td>Venezuela</td>
<td>Brazil</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">121</td>
<td>8825</td>
<td>Wales</td>
<td>Brazil</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">122</td>
<td>8970</td>
<td>Zimbabwe</td>
<td>Brazil</td>
<td>1</td>
</tr>
</tbody>
</table>

<p>123 rows × 4 columns</p>
</div>
</div>
</div>
<div id="cell-24" class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Criando listas vazias para os nodos e para as conexões</span></span>
<span id="cb10-2">nodes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb10-3">edges <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb10-4"></span>
<span id="cb10-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Popula a lista de nodos com base nos times da casa</span></span>
<span id="cb10-6"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> brazil_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"home_team"</span>]:</span>
<span id="cb10-7">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> nodes:</span>
<span id="cb10-8">    nodes.append(item)</span>
<span id="cb10-9"></span>
<span id="cb10-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Termina de popular a lista de nodos com os times visitantes</span></span>
<span id="cb10-11"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> brazil_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"away_team"</span>]:</span>
<span id="cb10-12">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> nodes:</span>
<span id="cb10-13">    nodes.append(item)</span>
<span id="cb10-14"></span>
<span id="cb10-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Popula a lista de conexões com os confrontos do Brasil </span></span>
<span id="cb10-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># que ocorreram mais de cinco vezes</span></span>
<span id="cb10-17"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> idx, item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">enumerate</span>(brazil_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"home_team"</span>]):</span>
<span id="cb10-18">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> brazil_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'home_team_score'</span>][idx] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>:</span>
<span id="cb10-19">    edges.append([item, brazil_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"away_team"</span>][idx], brazil_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"home_team_score"</span>][idx]])</span></code></pre></div>
</div>
<div id="cell-25" class="cell" data-execution_count="85">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cria o objeto que representa o network map</span></span>
<span id="cb11-2">net <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> nx.Graph()</span>
<span id="cb11-3"></span>
<span id="cb11-4">list_valid_nodes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb11-5"></span>
<span id="cb11-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adiciona as conexões</span></span>
<span id="cb11-7"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> edges:</span>
<span id="cb11-8">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># se a partida foi listada aqui, </span></span>
<span id="cb11-9">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># adiciona na lista de nodos válidos</span></span>
<span id="cb11-10">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>] <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> list_valid_nodes:</span>
<span id="cb11-11">    list_valid_nodes.append(item[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>])</span>
<span id="cb11-12">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> list_valid_nodes:</span>
<span id="cb11-13">    list_valid_nodes.append(item[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span>
<span id="cb11-14">  net.add_edge(item[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>], item[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>], length<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, weight<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>item[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>])</span>
<span id="cb11-15"></span>
<span id="cb11-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adiciona os nodos</span></span>
<span id="cb11-17"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> nodes:</span>
<span id="cb11-18">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># adiciona um nodo somente se está </span></span>
<span id="cb11-19">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># na lista de nodos válidos</span></span>
<span id="cb11-20">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> list_valid_nodes:</span>
<span id="cb11-21">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># adicionamos uma formula para controlar o tamanho dos nodos.</span></span>
<span id="cb11-22">    net.add_node(item, size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Brazil'</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">900</span>))</span>
<span id="cb11-23"></span>
<span id="cb11-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cria um objeto para configurar a área de plotagem</span></span>
<span id="cb11-25">pos <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> nx.spring_layout(net, seed<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3068</span>, k<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>, iterations<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>) </span>
<span id="cb11-26"></span>
<span id="cb11-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cria o array dos pesos de cada conexão</span></span>
<span id="cb11-28">wedges <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> net.edges()</span>
<span id="cb11-29">weights <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [net[u][v][<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'weight'</span>] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> u,v <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> wedges]</span>
<span id="cb11-30"></span>
<span id="cb11-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cria o array de tamanhos de cada nodo</span></span>
<span id="cb11-32">nodes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> net.nodes()</span>
<span id="cb11-33">sizes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [nodes[u][<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'size'</span>] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> u <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> nodes]</span>
<span id="cb11-34"></span>
<span id="cb11-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Ajustes de configuração para plotagem</span></span>
<span id="cb11-36">options <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb11-37">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font_size"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>,</span>
<span id="cb11-38">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node_size"</span>: sizes, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># usa o array de tamanhos</span></span>
<span id="cb11-39">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node_color"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>,</span>
<span id="cb11-40">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"edgecolors"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>,</span>
<span id="cb11-41">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"width"</span>: weights, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># usa o array de pesos</span></span>
<span id="cb11-42">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"with_labels"</span>: <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span></span>
<span id="cb11-43">}</span>
<span id="cb11-44"></span>
<span id="cb11-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plota o gráfico</span></span>
<span id="cb11-46">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.figsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12.00</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12.00</span>]</span>
<span id="cb11-47">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.autolayout"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span></span>
<span id="cb11-48">nx.draw(net,pos, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span>options)</span>
<span id="cb11-49">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/wpcortes/Work/blog/venv/lib/python3.9/site-packages/IPython/core/pylabtools.py:152: UserWarning: This figure includes Axes that are not compatible with tight_layout, so results might be incorrect.
  fig.canvas.print_figure(bytes_io, **kw)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-111/index_files/figure-html/cell-11-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="conclusão" class="level2">
<h2 class="anchored" data-anchor-id="conclusão">Conclusão</h2>
<p>Conseguimos fazer a plotagem do nosso gráfico e, se investirmos um pouco mais de tempo, é possível deixa-lo com uma melhor apresentação. Algumas considerações: - este tipo de gráfico é mais adequado para permitir a interação do usuário, através de filtros, destaque de caminhos, etc. Neste caso, você acabará usando outras bibliotecas (plotly em python) ou até outra linguagem (javascript e sua biblioteca d3.js são bem populares); - Quando pensamos no layout de distribuição dos nodos, existem vários que você pode tentar, dê uma olhada na documentação - Pensando na utilização do gráfico estático, as recomendações de um gráfico de pizza também se aplicam para este gráfico.</p>
<p>A documentação da biblioteca NetworkX pode ser encontrada <a href="https://networkx.org/documentation/stable/index.html">aqui</a>.</p>
<section id="navegação" class="level3">
<h3 class="anchored" data-anchor-id="navegação">Navegação</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th><a href="../../posts/data-110/index.html">&lt; Anterior</a></th>
<th>|</th>
<th style="text-align: right;"><a href="../../posts/data-112/index.html">Próximo &gt;</a></th>
</tr>
</thead>

</table>


</section>
</section>

 ]]></description>
  <category>Visualização</category>
  <category>Python</category>
  <category>Pandas</category>
  <category>Network Mapping</category>
  <guid>https://blog.wvcode.com.br/posts/data-111/</guid>
  <pubDate>Mon, 13 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/library/concepts/programming_practice.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>[VDP] Aula 10 - Seaborn - Melhorando seus Visuais</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-110/</link>
  <description><![CDATA[ 





<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Olá Cientista de Dados!</p>
<p>Se você chegou até aqui, você já se familiarizou com o básico das bibliotecas seaborn, matplotlib e pandas! Esse conhecimento já garante a você a capacidade de realizar análises de dados e apresentar resultados de maneira simples e eficiente.</p>
<p>O próximo passo é ensiná-lo a dar a esses gráficos uma aparência extremamente profissional e que leve em conta as boas práticas da área de Visualização de Dados. Para isso, vamos apresentar um pequeno problema e a versão inicial da visualização com o conhecimento que temos e, depois, apresentamos o passo a passo com as boas práticas e como codifica-las, chegando a nossa versão final da visualização.</p>
</section>
<section id="problema" class="level2">
<h2 class="anchored" data-anchor-id="problema">Problema</h2>
<p>Considere o seguinte cenário: Você é um cientista de dados encarregado de fazer uma análise em cima dos dados da população mundial. Os seus gráficos serão incorporados em uma apresentação PowerPoint.</p>
<p>O gráfico que você deve montar mostra a evolução no tamanho da população dos países do bloco econômico BRICS (Brasil, Russia, India, China e Africa do Sul), fazendo uma comparação com os Estados Unidos. Deve ser um gráfico de barras, onde cada barra irá representar um ano ou década.</p>
<p>O arquivo com os dados pode ser encontrado <a href="https://media.githubusercontent.com/media/labeduc/datasets/main/worldpop/world_population.csv">aqui</a>. Você pode fazer o download e subir no seu Google Colab ou carregar diretamente do endereço.</p>
</section>
<section id="solução-passo-a-passo" class="level2">
<h2 class="anchored" data-anchor-id="solução-passo-a-passo">Solução Passo a Passo</h2>
<section id="carregando-bibliotecas" class="level3">
<h3 class="anchored" data-anchor-id="carregando-bibliotecas">Carregando Bibliotecas</h3>
<p>O primeiro passo é sempre carregar as bibliotecas que vamos utilizar.</p>
<div id="cell-8" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> seaborn <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sns</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span></code></pre></div>
</div>
</section>
<section id="carregando-dados" class="level3">
<h3 class="anchored" data-anchor-id="carregando-dados">Carregando dados</h3>
<p>A próxima etapa é carregar os dados. Durante o curso, utilizamos um arquivo local para fazer isso. Hoje vamos exercitar uma pequena variação. Como explicamos anteriormente, todos os nossos conjuntos de dados estão em um repositório no GitHub -&gt; <a href="https://github.com/labeduc/datasets">https://github.com/labeduc/datasets</a>. Ensinamos vocês a baixarem o repositório no seu computador e subir o arquivo que vocês vão trabalhar direto no Google Colab (que é temporário e precisar ser salvo lá cada vez que se abre o notebook) ou colocar no seu Google Drive e mapear o Google Drive no Google Colab.</p>
<p>Agora, vamos explorar uma capacidade da biblioteca pandas que é ler o arquivo direto da internet. O que fizemos foi ir até o Github e observar qual era a URL de download do arquivo que pretendemos usar. Copiamos e colocamos no primeiro parâmetro da função <code>read_csv()</code>.</p>
<div id="cell-11" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1">worldpop <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://media.githubusercontent.com/media/labeduc/datasets/main/worldpop/world_population.csv'</span>)</span></code></pre></div>
</div>
<p>Para verificar que temos os dados carregados, vamos pedir um sample de 2 linhas.</p>
<div id="cell-13" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">worldpop.sample(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Rank</th>
<th data-quarto-table-cell-role="th">CCA3</th>
<th data-quarto-table-cell-role="th">Country</th>
<th data-quarto-table-cell-role="th">Capital</th>
<th data-quarto-table-cell-role="th">Continent</th>
<th data-quarto-table-cell-role="th">2022 Population</th>
<th data-quarto-table-cell-role="th">2020 Population</th>
<th data-quarto-table-cell-role="th">2015 Population</th>
<th data-quarto-table-cell-role="th">2010 Population</th>
<th data-quarto-table-cell-role="th">2000 Population</th>
<th data-quarto-table-cell-role="th">1990 Population</th>
<th data-quarto-table-cell-role="th">1980 Population</th>
<th data-quarto-table-cell-role="th">1970 Population</th>
<th data-quarto-table-cell-role="th">Area (km²)</th>
<th data-quarto-table-cell-role="th">Density (per km²)</th>
<th data-quarto-table-cell-role="th">Growth Rate</th>
<th data-quarto-table-cell-role="th">World Population Percentage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">30</td>
<td>108</td>
<td>BGR</td>
<td>Bulgaria</td>
<td>Sofia</td>
<td>Europe</td>
<td>6781953</td>
<td>6979175</td>
<td>7309253</td>
<td>7592273</td>
<td>8097691</td>
<td>8767778</td>
<td>8980606</td>
<td>8582950</td>
<td>110879</td>
<td>61.1654</td>
<td>0.9849</td>
<td>0.09</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">71</td>
<td>146</td>
<td>GAB</td>
<td>Gabon</td>
<td>Libreville</td>
<td>Africa</td>
<td>2388992</td>
<td>2292573</td>
<td>2028517</td>
<td>1711105</td>
<td>1272935</td>
<td>983028</td>
<td>749078</td>
<td>597192</td>
<td>267668</td>
<td>8.9252</td>
<td>1.0204</td>
<td>0.03</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Perfeito, temos os dados, e estamos prontos para prosseguir.</p>
</section>
<section id="analisando-os-dados" class="level3">
<h3 class="anchored" data-anchor-id="analisando-os-dados">Analisando os dados</h3>
<p>A primeira coisa que podemos fazer nesta análise é descobrir quais são todos os campos de conjunto de dados, seus tipos de dados e se temos muitos campos vazios.</p>
<div id="cell-17" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">worldpop.info()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 234 entries, 0 to 233
Data columns (total 17 columns):
 #   Column                       Non-Null Count  Dtype  
---  ------                       --------------  -----  
 0   Rank                         234 non-null    int64  
 1   CCA3                         234 non-null    object 
 2   Country                      234 non-null    object 
 3   Capital                      234 non-null    object 
 4   Continent                    234 non-null    object 
 5   2022 Population              234 non-null    int64  
 6   2020 Population              234 non-null    int64  
 7   2015 Population              234 non-null    int64  
 8   2010 Population              234 non-null    int64  
 9   2000 Population              234 non-null    int64  
 10  1990 Population              234 non-null    int64  
 11  1980 Population              234 non-null    int64  
 12  1970 Population              234 non-null    int64  
 13  Area (km²)                   234 non-null    int64  
 14  Density (per km²)            234 non-null    float64
 15  Growth Rate                  234 non-null    float64
 16  World Population Percentage  234 non-null    float64
dtypes: float64(3), int64(10), object(4)
memory usage: 31.2+ KB</code></pre>
</div>
</div>
<p>A informação está bem estruturada: todos os campos tem valores, os campos númerico são de um tipo numérico, temos poucas categorias e são do tipo object, que basicamente diz que são texto.</p>
<p>Podemos perceber que estruturalmente, esse conjunto de dados tem um país por linha, com os anos sendo colunas. Em um cenário ideal, os nossos gráficos devem plotar a partir de uma única coluna de valor, e teríamos algum outro atributo para separa-los se for o caso.</p>
<p>Outro ponto a ser considerado é que precisamos apenas dos Estados Unidos e dos países do bloco econômico BRICS, então temos mais dados do que o necessário.</p>
<p>Isso significa que vamos fazer alguns ajustes nos nossos dados.</p>
</section>
<section id="transformando-os-dados" class="level3">
<h3 class="anchored" data-anchor-id="transformando-os-dados">Transformando os dados</h3>
<p>Acompanhem explicações nos comentários.</p>
<div id="cell-21" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Primeira coisa é selecionar apenas as colunas que vamos utilizar</span></span>
<span id="cb6-2">worldpop_sb <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> worldpop[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Country"</span>, </span>
<span id="cb6-3">                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1970 Population"</span>,</span>
<span id="cb6-4">                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1980 Population"</span>,</span>
<span id="cb6-5">                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1990 Population"</span>,</span>
<span id="cb6-6">                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2000 Population"</span>,</span>
<span id="cb6-7">                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2010 Population"</span>,</span>
<span id="cb6-8">                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2015 Population"</span>,</span>
<span id="cb6-9">                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2020 Population"</span>,</span>
<span id="cb6-10">                     <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2022 Population"</span>]]</span>
<span id="cb6-11"></span>
<span id="cb6-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Em seguida, filtramos as linhas para pegar apenas US e os países do BRICS</span></span>
<span id="cb6-13">worldpop_sb2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> worldpop_sb.query(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Country in ('United States', 'Brazil', 'Russia', 'India', 'China', 'South Africa')"</span>)</span>
<span id="cb6-14"></span>
<span id="cb6-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fazemos a transformação das colunas de ano em linhas.</span></span>
<span id="cb6-16">brics_us <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> worldpop_sb2.melt(id_vars<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Country'</span>, var_name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Year'</span>, value_name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population'</span>)</span>
<span id="cb6-17"></span>
<span id="cb6-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Pedimos uma amostra para ver como nossos dados ficaram.</span></span>
<span id="cb6-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Parece tudo certo, temos apenas paises do BRICS e US,</span></span>
<span id="cb6-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># no caso do Brasil, vemos agora duas linhas, uma para a</span></span>
<span id="cb6-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># informação do ano de 2022 e outra para 2015.</span></span>
<span id="cb6-22">brics_us.sample(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Country</th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">42</td>
<td>Brazil</td>
<td>2022 Population</td>
<td>215313498</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>United States</td>
<td>1990 Population</td>
<td>248083732</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>India</td>
<td>1990 Population</td>
<td>870452165</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">30</td>
<td>Brazil</td>
<td>2015 Population</td>
<td>205188205</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">46</td>
<td>South Africa</td>
<td>2022 Population</td>
<td>59893885</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Aí estão nossos dados, devidamente formatados. Vamos agora plotar o gráfico.</p>
</section>
<section id="primeira-versão" class="level3">
<h3 class="anchored" data-anchor-id="primeira-versão">Primeira Versão</h3>
<div id="cell-24" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1">sns.barplot(brics_us, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Country'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Year'</span>)</span>
<span id="cb7-2"></span>
<span id="cb7-3">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-110/index_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>E aí está nosso gráfico. A partir de agora, vamos passo a passo aplicando melhorias sucessivas.</p>
</section>
<section id="passo-1---adicionando-títulos" class="level3">
<h3 class="anchored" data-anchor-id="passo-1---adicionando-títulos">Passo 1 - Adicionando Títulos</h3>
<p>Os gráficos precisam de títulos, preferencialmente um título que esclareça o significado do gráfico. Em nossas aulas anteriores, já haviamos adicionado títulos significativos em nossos gráficos e nos eixos também. Então, vamos apenas relembrar.</p>
<div id="cell-28" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1">sns.barplot(brics_us, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Country'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Year'</span>)</span>
<span id="cb8-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Esta função adiciona um título no gráfico</span></span>
<span id="cb8-3">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Crescimento Populacional no BRICS (1970 - 2020)'</span>)</span>
<span id="cb8-4"></span>
<span id="cb8-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Estas funções nos permitem alterar o títulos nos eixos</span></span>
<span id="cb8-6">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Países'</span>)</span>
<span id="cb8-7">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'População'</span>)</span>
<span id="cb8-8"></span>
<span id="cb8-9">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-110/index_files/figure-html/cell-8-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="passo-2---ajustando-tamanho-da-imagem" class="level3">
<h3 class="anchored" data-anchor-id="passo-2---ajustando-tamanho-da-imagem">Passo 2 - Ajustando tamanho da imagem</h3>
<p>Ao olharmos nosso gráfico, logo percebemos que os nomes dos países estão se sobrepondo no final. Para este e muitos outros ajustes, vamos introduzir a propriedade rcParams. Esta propriedade é um dicionário que armazena outras configurações. Você pode encontrar mais informaç!oes <a href="https://matplotlib.org/stable/api/matplotlib_configuration_api.html#matplotlib.rcParams">aqui</a>.</p>
<div id="cell-31" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># É aconselhavel mudar o tamanho da imagem antes de plotar</span></span>
<span id="cb9-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para tanto, o MatPlotLib nos permite modificar entradas </span></span>
<span id="cb9-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># em um dicionário de parâmetros chamado rcParams.</span></span>
<span id="cb9-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># A nossa modificação será da entrada figure.figsize</span></span>
<span id="cb9-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Este parâmetro recebe uma tupla com largura e altura em polegadas</span></span>
<span id="cb9-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O valor padrão é 6.4 de largura e 4.8 de altura em polegadas</span></span>
<span id="cb9-7">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.figsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb9-8"></span>
<span id="cb9-9">sns.barplot(brics_us, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Country'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Year'</span>)</span>
<span id="cb9-10"></span>
<span id="cb9-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Esta função adiciona um título no gráfico</span></span>
<span id="cb9-12">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Crescimento Populacional no BRICS (1970 - 2020)'</span>)</span>
<span id="cb9-13"></span>
<span id="cb9-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Estas funções nos permitem alterar o títulos nos eixos</span></span>
<span id="cb9-15">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Países'</span>)</span>
<span id="cb9-16">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'População'</span>)</span>
<span id="cb9-17"></span>
<span id="cb9-18">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-110/index_files/figure-html/cell-9-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Esse tamanho deixou as barras mais separadas, e agora conseguimos ver claramente todos os países.</p>
</section>
<section id="passo-3---ajustando-qualidade-da-imagem" class="level3">
<h3 class="anchored" data-anchor-id="passo-3---ajustando-qualidade-da-imagem">Passo 3 - Ajustando Qualidade da Imagem</h3>
<p>Dentro do contexto de visualização online, nosso gráfico parece bom. Mas, se precisarmos exportar esse gráfico como imagem para usar em um powerpoint, por exemplo, veremos que a qualidade da imagem ficará ruim. Isso acontece porque o padrão do matplotlib é gerar imagens com resolução de 100dpi. Para exportar, normalmente é recomendado utilizar 300dpi. Vamos arrumar isso e ver como fica?</p>
<div id="cell-35" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># É aconselhavel mudar o tamanho da imagem antes de plotar</span></span>
<span id="cb10-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para tanto, o MatPlotLib nos permite modificar entradas </span></span>
<span id="cb10-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># em um dicionário de parâmetros chamado rcParams.</span></span>
<span id="cb10-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># A nossa modificação será da entrada figure.figsize</span></span>
<span id="cb10-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Este parâmetro recebe uma tupla com largura e altura em polegadas</span></span>
<span id="cb10-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O valor padrão é 6.4 de largura e 4.8 de altura em polegadas</span></span>
<span id="cb10-7">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.figsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb10-8"></span>
<span id="cb10-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Ajustando qualidade da imagem</span></span>
<span id="cb10-10">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb10-11">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb10-12">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.format"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"svg"</span></span>
<span id="cb10-13"></span>
<span id="cb10-14">sns.barplot(brics_us, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Country'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Year'</span>)</span>
<span id="cb10-15"></span>
<span id="cb10-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Esta função adiciona um título no gráfico</span></span>
<span id="cb10-17">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Crescimento Populacional no BRICS (1970 - 2020)'</span>)</span>
<span id="cb10-18"></span>
<span id="cb10-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Estas funções nos permitem alterar o títulos nos eixos</span></span>
<span id="cb10-20">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Países'</span>)</span>
<span id="cb10-21">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'População'</span>)</span>
<span id="cb10-22"></span>
<span id="cb10-23">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-110/index_files/figure-html/cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="passo-4---removendo-o-ruído-do-gráfico" class="level3">
<h3 class="anchored" data-anchor-id="passo-4---removendo-o-ruído-do-gráfico">Passo 4 - Removendo o “Ruído” do Gráfico</h3>
<p>De acordo com as boas práticas na área de visualização, uma boa visualização é limpa, ou seja, não possui elementos que não estejam relacionados aos dados. No gráfico acima, o box em torno do gráfico, a legenda com muito texto, aquela informação 1e9 perdida no gráfico são ruídos, que tiram a atenção das barras que são os dados.</p>
<div id="cell-38" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># É aconselhavel mudar o tamanho da imagem antes de plotar</span></span>
<span id="cb11-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para tanto, o MatPlotLib nos permite modificar entradas </span></span>
<span id="cb11-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># em um dicionário de parâmetros chamado rcParams.</span></span>
<span id="cb11-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># A nossa modificação será da entrada figure.figsize</span></span>
<span id="cb11-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Este parâmetro recebe uma tupla com largura e altura em polegadas</span></span>
<span id="cb11-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O valor padrão é 6.4 de largura e 4.8 de altura em polegadas</span></span>
<span id="cb11-7">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.figsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb11-8"></span>
<span id="cb11-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Ajustando qualidade da imagem</span></span>
<span id="cb11-10">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb11-11">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb11-12">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.format"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"svg"</span></span>
<span id="cb11-13"></span>
<span id="cb11-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para remover parte do box da imagem, fazemos isso:</span></span>
<span id="cb11-15">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.right"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb11-16">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.top"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb11-17">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.bottom"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb11-18"></span>
<span id="cb11-19">plt.ticklabel_format(style<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plain"</span>, useLocale<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb11-20"></span>
<span id="cb11-21">sns.barplot(brics_us, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Country'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Year'</span>)</span>
<span id="cb11-22"></span>
<span id="cb11-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Esta função adiciona um título no gráfico</span></span>
<span id="cb11-24">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Crescimento Populacional no BRICS (1970 - 2020)'</span>)</span>
<span id="cb11-25"></span>
<span id="cb11-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Estas funções nos permitem alterar o títulos nos eixos</span></span>
<span id="cb11-27">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Países'</span>)</span>
<span id="cb11-28">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'População'</span>)</span>
<span id="cb11-29"></span>
<span id="cb11-30">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-110/index_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Conseguimos deixar a imagem maior, removemos alguns elementos que adicionavam apenas ruído no gráfico. Mas observem que agora a formatação dos valores no eixo Y está estranho. Vamos corrigir?</p>
<div id="cell-40" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># É aconselhavel mudar o tamanho da imagem antes de plotar</span></span>
<span id="cb12-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para tanto, o MatPlotLib nos permite modificar entradas </span></span>
<span id="cb12-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># em um dicionário de parâmetros chamado rcParams.</span></span>
<span id="cb12-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># A nossa modificação será da entrada figure.figsize</span></span>
<span id="cb12-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Este parâmetro recebe uma tupla com largura e altura em polegadas</span></span>
<span id="cb12-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O valor padrão é 6.4 de largura e 4.8 de altura em polegadas</span></span>
<span id="cb12-7">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.figsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb12-8"></span>
<span id="cb12-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Ajustando qualidade da imagem</span></span>
<span id="cb12-10">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb12-11">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb12-12">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.format"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"svg"</span></span>
<span id="cb12-13"></span>
<span id="cb12-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para remover parte do box da imagem, fazemos isso:</span></span>
<span id="cb12-15">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.right"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb12-16">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.top"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb12-17">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.bottom"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb12-18"></span>
<span id="cb12-19">plt.ticklabel_format(style<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plain"</span>, useLocale<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb12-20"></span>
<span id="cb12-21">sns.barplot(brics_us, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Country'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Year'</span>)</span>
<span id="cb12-22"></span>
<span id="cb12-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Aqui buscamos os valores que foram adicionados no eixo e os modificamos </span></span>
<span id="cb12-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># com a formatação adequada</span></span>
<span id="cb12-25">current_values <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.gca().get_yticks()</span>
<span id="cb12-26">plt.gca().set_yticklabels([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{:,.1f}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(x) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> x <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> current_values<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000000</span>])<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb12-27"></span>
<span id="cb12-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Esta função adiciona um título no gráfico</span></span>
<span id="cb12-29">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Crescimento Populacional no BRICS (1970 - 2020)'</span>)</span>
<span id="cb12-30"></span>
<span id="cb12-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Estas funções nos permitem alterar o títulos nos eixos</span></span>
<span id="cb12-32">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Países'</span>)</span>
<span id="cb12-33">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'População (bilhões)'</span>)</span>
<span id="cb12-34"></span>
<span id="cb12-35">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/fc/hns7cg2j2xg_05kdl6cbxkw40000gn/T/ipykernel_47418/823456077.py:26: UserWarning: FixedFormatter should only be used together with FixedLocator
  plt.gca().set_yticklabels(['{:,.1f}'.format(x) for x in current_values/1000000000]);</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-110/index_files/figure-html/cell-12-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Por último, vamos remover o label do eixo X.</p>
<div id="cell-42" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># É aconselhavel mudar o tamanho da imagem antes de plotar</span></span>
<span id="cb14-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para tanto, o MatPlotLib nos permite modificar entradas </span></span>
<span id="cb14-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># em um dicionário de parâmetros chamado rcParams.</span></span>
<span id="cb14-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># A nossa modificação será da entrada figure.figsize</span></span>
<span id="cb14-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Este parâmetro recebe uma tupla com largura e altura em polegadas</span></span>
<span id="cb14-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O valor padrão é 6.4 de largura e 4.8 de altura em polegadas</span></span>
<span id="cb14-7">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.figsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb14-8"></span>
<span id="cb14-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Ajustando qualidade da imagem</span></span>
<span id="cb14-10">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb14-11">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb14-12">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.format"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"svg"</span></span>
<span id="cb14-13"></span>
<span id="cb14-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para remover parte do box da imagem, fazemos isso:</span></span>
<span id="cb14-15">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.right"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb14-16">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.top"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb14-17">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.bottom"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb14-18"></span>
<span id="cb14-19">plt.ticklabel_format(style<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plain"</span>, useLocale<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb14-20"></span>
<span id="cb14-21">sns.barplot(brics_us, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Country'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Year'</span>)</span>
<span id="cb14-22"></span>
<span id="cb14-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Aqui buscamos os valores que foram adicionados no eixo e os modificamos </span></span>
<span id="cb14-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># com a formatação adequada</span></span>
<span id="cb14-25">current_values <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.gca().get_yticks()</span>
<span id="cb14-26">plt.gca().set_yticklabels([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{:,.1f}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(x) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> x <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> current_values<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000000</span>])<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb14-27"></span>
<span id="cb14-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Esta função adiciona um título no gráfico</span></span>
<span id="cb14-29">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Crescimento Populacional no BRICS (1970 - 2020)'</span>)</span>
<span id="cb14-30"></span>
<span id="cb14-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Estas funções nos permitem alterar o títulos nos eixos</span></span>
<span id="cb14-32">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>)</span>
<span id="cb14-33">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'População (bilhões)'</span>)</span>
<span id="cb14-34"></span>
<span id="cb14-35">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/fc/hns7cg2j2xg_05kdl6cbxkw40000gn/T/ipykernel_47418/1234354454.py:26: UserWarning: FixedFormatter should only be used together with FixedLocator
  plt.gca().set_yticklabels(['{:,.1f}'.format(x) for x in current_values/1000000000]);</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-110/index_files/figure-html/cell-13-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="passo-5---colocando-foco-nos-dados" class="level3">
<h3 class="anchored" data-anchor-id="passo-5---colocando-foco-nos-dados">Passo 5 - Colocando foco nos dados</h3>
<p>Agora que trabalhamos na formatação inicial, precisamos realizar melhorias que irão nos ajudar a colocar o foco nos dados. Eis o que vamos fazer: - diminuir a legenda - Alinhar o título a esquerda - o título centralizado faz com que os olhos façam um escaneamento extra do gráfico, dificultando a compreensão - vamos colocar os valores em cima de cada barra. Também para evitar que precisemos olhar no eixo a esquerda para ver o valor de cada barra, ou seja, que fiquemos constantemente escaneando o gráfico - ajustar o tamanho das fontes - ajustar as cores.</p>
<section id="diminuindo-a-legenda" class="level4">
<h4 class="anchored" data-anchor-id="diminuindo-a-legenda">Diminuindo a legenda</h4>
<p>A princípio, podemos resolver isso manipulando os dados.</p>
<div id="cell-47" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1">brics_us[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Year'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> brics_us[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Year'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">apply</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">lambda</span> x: x.replace(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">' Population'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>))</span></code></pre></div>
</div>
<p>Vamos ver o resultado?</p>
<div id="cell-49" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># É aconselhavel mudar o tamanho da imagem antes de plotar</span></span>
<span id="cb17-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para tanto, o MatPlotLib nos permite modificar entradas </span></span>
<span id="cb17-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># em um dicionário de parâmetros chamado rcParams.</span></span>
<span id="cb17-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># A nossa modificação será da entrada figure.figsize</span></span>
<span id="cb17-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Este parâmetro recebe uma tupla com largura e altura em polegadas</span></span>
<span id="cb17-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O valor padrão é 6.4 de largura e 4.8 de altura em polegadas</span></span>
<span id="cb17-7">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.figsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb17-8"></span>
<span id="cb17-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Ajustando qualidade da imagem</span></span>
<span id="cb17-10">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb17-11">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb17-12">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.format"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"svg"</span></span>
<span id="cb17-13"></span>
<span id="cb17-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para remover parte do box da imagem, fazemos isso:</span></span>
<span id="cb17-15">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.right"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb17-16">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.top"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb17-17">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.bottom"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb17-18"></span>
<span id="cb17-19">plt.ticklabel_format(style<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plain"</span>, useLocale<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb17-20"></span>
<span id="cb17-21">sns.barplot(brics_us, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Country'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Year'</span>)</span>
<span id="cb17-22"></span>
<span id="cb17-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Aqui buscamos os valores que foram adicionados no eixo e os modificamos </span></span>
<span id="cb17-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># com a formatação adequada</span></span>
<span id="cb17-25">current_values <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.gca().get_yticks()</span>
<span id="cb17-26">plt.gca().set_yticklabels([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{:,.1f}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(x) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> x <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> current_values<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000000</span>])<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb17-27"></span>
<span id="cb17-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Esta função adiciona um título no gráfico</span></span>
<span id="cb17-29">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Crescimento Populacional no BRICS (1970 - 2020)'</span>)</span>
<span id="cb17-30"></span>
<span id="cb17-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Estas funções nos permitem alterar o títulos nos eixos</span></span>
<span id="cb17-32">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>)</span>
<span id="cb17-33">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'População (bilhões)'</span>)</span>
<span id="cb17-34"></span>
<span id="cb17-35">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/fc/hns7cg2j2xg_05kdl6cbxkw40000gn/T/ipykernel_47418/1234354454.py:26: UserWarning: FixedFormatter should only be used together with FixedLocator
  plt.gca().set_yticklabels(['{:,.1f}'.format(x) for x in current_values/1000000000]);</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-110/index_files/figure-html/cell-15-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="alinhar-o-titulo-e-diminuir-fontes" class="level4">
<h4 class="anchored" data-anchor-id="alinhar-o-titulo-e-diminuir-fontes">Alinhar o Titulo e Diminuir fontes</h4>
<div id="cell-51" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># É aconselhavel mudar o tamanho da imagem antes de plotar</span></span>
<span id="cb19-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para tanto, o MatPlotLib nos permite modificar entradas </span></span>
<span id="cb19-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># em um dicionário de parâmetros chamado rcParams.</span></span>
<span id="cb19-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># A nossa modificação será da entrada figure.figsize</span></span>
<span id="cb19-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Este parâmetro recebe uma tupla com largura e altura em polegadas</span></span>
<span id="cb19-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O valor padrão é 6.4 de largura e 4.8 de altura em polegadas</span></span>
<span id="cb19-7">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.figsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb19-8"></span>
<span id="cb19-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Ajustando qualidade da imagem</span></span>
<span id="cb19-10">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb19-11">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb19-12">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.format"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"svg"</span></span>
<span id="cb19-13"></span>
<span id="cb19-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para remover parte do box da imagem, fazemos isso:</span></span>
<span id="cb19-15">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.right"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb19-16">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.top"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb19-17">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.bottom"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb19-18"></span>
<span id="cb19-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Fontes</span></span>
<span id="cb19-20">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend.fontsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb19-21">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend.title_fontsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span></span>
<span id="cb19-22">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend.frameon"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb19-23"></span>
<span id="cb19-24">plt.ticklabel_format(style<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plain"</span>, useLocale<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb19-25">plt.tick_params(axis<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'both'</span>, which<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'major'</span>, labelsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>)</span>
<span id="cb19-26"></span>
<span id="cb19-27">sns.barplot(brics_us, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Country'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Year'</span>)</span>
<span id="cb19-28"></span>
<span id="cb19-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Aqui buscamos os valores que foram adicionados no eixo e os modificamos </span></span>
<span id="cb19-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># com a formatação adequada</span></span>
<span id="cb19-31">current_values <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.gca().get_yticks()</span>
<span id="cb19-32">plt.gca().set_yticklabels([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{:,.1f}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(x) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> x <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> current_values<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000000</span>])<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb19-33"></span>
<span id="cb19-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Esta função adiciona um título no gráfico</span></span>
<span id="cb19-35">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Crescimento Populacional no BRICS (1970 - 2020)'</span>, fontsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, loc<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'left'</span>)</span>
<span id="cb19-36"></span>
<span id="cb19-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Estas funções nos permitem alterar o títulos nos eixos</span></span>
<span id="cb19-38">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>)</span>
<span id="cb19-39">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'População (bilhões)'</span>)</span>
<span id="cb19-40"></span>
<span id="cb19-41">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/fc/hns7cg2j2xg_05kdl6cbxkw40000gn/T/ipykernel_47418/1419233821.py:32: UserWarning: FixedFormatter should only be used together with FixedLocator
  plt.gca().set_yticklabels(['{:,.1f}'.format(x) for x in current_values/1000000000]);</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-110/index_files/figure-html/cell-16-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="removendo-o-eixo-y-e-adicionando-os-valores-nas-barras" class="level4">
<h4 class="anchored" data-anchor-id="removendo-o-eixo-y-e-adicionando-os-valores-nas-barras">Removendo o eixo Y e adicionando os valores nas barras</h4>
<div id="cell-53" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># É aconselhavel mudar o tamanho da imagem antes de plotar</span></span>
<span id="cb21-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para tanto, o MatPlotLib nos permite modificar entradas </span></span>
<span id="cb21-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># em um dicionário de parâmetros chamado rcParams.</span></span>
<span id="cb21-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># A nossa modificação será da entrada figure.figsize</span></span>
<span id="cb21-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Este parâmetro recebe uma tupla com largura e altura em polegadas</span></span>
<span id="cb21-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O valor padrão é 6.4 de largura e 4.8 de altura em polegadas</span></span>
<span id="cb21-7">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.figsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb21-8"></span>
<span id="cb21-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Ajustando qualidade da imagem</span></span>
<span id="cb21-10">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb21-11">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb21-12">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.format"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"svg"</span></span>
<span id="cb21-13"></span>
<span id="cb21-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para remover parte do box da imagem, fazemos isso:</span></span>
<span id="cb21-15">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.left"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb21-16">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.right"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb21-17">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.top"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb21-18">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.bottom"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb21-19"></span>
<span id="cb21-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Fontes</span></span>
<span id="cb21-21">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend.fontsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb21-22">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend.title_fontsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span></span>
<span id="cb21-23">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend.frameon"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb21-24"></span>
<span id="cb21-25">plt.ticklabel_format(style<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plain"</span>, useLocale<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb21-26">plt.tick_params(axis<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'both'</span>, which<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'major'</span>, labelsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>)</span>
<span id="cb21-27"></span>
<span id="cb21-28">sx <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sns.barplot(brics_us, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Country'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Year'</span>)</span>
<span id="cb21-29"></span>
<span id="cb21-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Aqui buscamos os valores que foram adicionados no eixo e os modificamos </span></span>
<span id="cb21-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># com a formatação adequada</span></span>
<span id="cb21-32">current_values <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.gca().get_yticks()</span>
<span id="cb21-33">plt.gca().set_yticklabels([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{:,.1f}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(x) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> x <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> current_values<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000000</span>])<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb21-34"></span>
<span id="cb21-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Esta função adiciona um título no gráfico</span></span>
<span id="cb21-36">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Crescimento Populacional no BRICS (1970 - 2020)'</span>, fontsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, loc<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'left'</span>)</span>
<span id="cb21-37"></span>
<span id="cb21-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Estas funções nos permitem alterar o títulos nos eixos</span></span>
<span id="cb21-39">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>)</span>
<span id="cb21-40"></span>
<span id="cb21-41"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Removendo todo o eixo Y</span></span>
<span id="cb21-42">sx.get_yaxis().set_visible(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span>
<span id="cb21-43"></span>
<span id="cb21-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O Objeto patches contém todos os elementos (neste caso barras) que foram plotados no gráfico</span></span>
<span id="cb21-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Então percorremos eles e fazemos os seguintes calculos:</span></span>
<span id="cb21-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># a coordenada x para posicionar o texto = Coordenada X do canto superior da barra + largura da barra / 2</span></span>
<span id="cb21-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># a coordenada Y para posicionar o texto = Coordenada Y do canto superior da barra + 1% desta altura</span></span>
<span id="cb21-48"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> p <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> sx.patches:</span>
<span id="cb21-49">  _x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (p.get_x() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p.get_width() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb21-50">  _y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> p.get_y() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p.get_height() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (p.get_height()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.01</span>)</span>
<span id="cb21-51">  value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{:.2f}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(p.get_height()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000000</span>)</span>
<span id="cb21-52">  sx.text(_x, _y, value, ha<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"center"</span>, size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) </span>
<span id="cb21-53"></span>
<span id="cb21-54">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/fc/hns7cg2j2xg_05kdl6cbxkw40000gn/T/ipykernel_47418/1997790246.py:33: UserWarning: FixedFormatter should only be used together with FixedLocator
  plt.gca().set_yticklabels(['{:,.1f}'.format(x) for x in current_values/1000000000]);</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-110/index_files/figure-html/cell-17-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="acertando-as-cores" class="level4">
<h4 class="anchored" data-anchor-id="acertando-as-cores">Acertando as cores</h4>
<p>A paleta de cores precisa ser ajustada para respeitar as cores da empresa.</p>
<div id="cell-56" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># É aconselhavel mudar o tamanho da imagem antes de plotar</span></span>
<span id="cb23-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para tanto, o MatPlotLib nos permite modificar entradas </span></span>
<span id="cb23-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># em um dicionário de parâmetros chamado rcParams.</span></span>
<span id="cb23-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># A nossa modificação será da entrada figure.figsize</span></span>
<span id="cb23-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Este parâmetro recebe uma tupla com largura e altura em polegadas</span></span>
<span id="cb23-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O valor padrão é 6.4 de largura e 4.8 de altura em polegadas</span></span>
<span id="cb23-7">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.figsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb23-8"></span>
<span id="cb23-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Definindo a paleta de cores</span></span>
<span id="cb23-10">cores <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#0c4f6a"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#177498"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#0a8faa"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#bfdce5"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#82bd4a"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#b8d67a"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#b2b3b6"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#58585a"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#edb634"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#d97933"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#f1bdb1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#eca091"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#e26c54"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#b0391e"</span>]</span>
<span id="cb23-11">sns.set_palette(sns.color_palette(cores))</span>
<span id="cb23-12"></span>
<span id="cb23-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Ajustando qualidade da imagem</span></span>
<span id="cb23-14">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb23-15">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb23-16">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.format"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"svg"</span></span>
<span id="cb23-17"></span>
<span id="cb23-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para remover parte do box da imagem, fazemos isso:</span></span>
<span id="cb23-19">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.left"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb23-20">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.right"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb23-21">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.top"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb23-22">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.bottom"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb23-23"></span>
<span id="cb23-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Fontes</span></span>
<span id="cb23-25">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend.fontsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb23-26">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend.title_fontsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span></span>
<span id="cb23-27">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend.frameon"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb23-28"></span>
<span id="cb23-29">plt.ticklabel_format(style<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plain"</span>, useLocale<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb23-30">plt.tick_params(axis<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'both'</span>, which<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'major'</span>, labelsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>)</span>
<span id="cb23-31"></span>
<span id="cb23-32">sx <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sns.barplot(brics_us, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Country'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Year'</span>)</span>
<span id="cb23-33"></span>
<span id="cb23-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Aqui buscamos os valores que foram adicionados no eixo e os modificamos </span></span>
<span id="cb23-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># com a formatação adequada</span></span>
<span id="cb23-36">current_values <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.gca().get_yticks().tolo</span>
<span id="cb23-37">formatted_values <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{:,.1f}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000000</span>) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> x <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> current_values]</span>
<span id="cb23-38">plt.gca().set_yticklabels(formatted_values)</span>
<span id="cb23-39"></span>
<span id="cb23-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Esta função adiciona um título no gráfico</span></span>
<span id="cb23-41">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Crescimento Populacional no BRICS (1970 - 2020)'</span>, fontsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, loc<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'left'</span>)</span>
<span id="cb23-42"></span>
<span id="cb23-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Estas funções nos permitem alterar o títulos nos eixos</span></span>
<span id="cb23-44">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>)</span>
<span id="cb23-45"></span>
<span id="cb23-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Removendo todo o eixo Y</span></span>
<span id="cb23-47">sx.get_yaxis().set_visible(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span>
<span id="cb23-48"></span>
<span id="cb23-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O Objeto patches contém todos os elementos (neste caso barras) que foram plotados no gráfico</span></span>
<span id="cb23-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Então percorremos eles e fazemos os seguintes calculos:</span></span>
<span id="cb23-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># a coordenada x para posicionar o texto = Coordenada X do canto superior da barra + largura da barra / 2</span></span>
<span id="cb23-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># a coordenada Y para posicionar o texto = Coordenada Y do canto superior da barra + 1% desta altura</span></span>
<span id="cb23-53"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> p <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> sx.patches:</span>
<span id="cb23-54">  _x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (p.get_x() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p.get_width() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb23-55">  _y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> p.get_y() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p.get_height() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (p.get_height()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.01</span>)</span>
<span id="cb23-56">  value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{:.2f}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(p.get_height()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000000</span>)</span>
<span id="cb23-57">  sx.text(_x, _y, value, ha<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"center"</span>, size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) </span>
<span id="cb23-58"></span>
<span id="cb23-59">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/fc/hns7cg2j2xg_05kdl6cbxkw40000gn/T/ipykernel_47418/4070811810.py:38: UserWarning: FixedFormatter should only be used together with FixedLocator
  plt.gca().set_yticklabels(formatted_values)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-110/index_files/figure-html/cell-18-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>E aí está o nosso gráfico, com suas cores modificadas. Para este gráfico ficar realmente bom, faltam apenas duas correções: deixar nossas barras um pouco mais largas para que possamos aumentar a fonte dos valores.</p>
<div id="cell-58" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># É aconselhavel mudar o tamanho da imagem antes de plotar</span></span>
<span id="cb25-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para tanto, o MatPlotLib nos permite modificar entradas </span></span>
<span id="cb25-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># em um dicionário de parâmetros chamado rcParams.</span></span>
<span id="cb25-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># A nossa modificação será da entrada figure.figsize</span></span>
<span id="cb25-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Este parâmetro recebe uma tupla com largura e altura em polegadas</span></span>
<span id="cb25-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O valor padrão é 6.4 de largura e 4.8 de altura em polegadas</span></span>
<span id="cb25-7">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.figsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb25-8"></span>
<span id="cb25-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Definindo a paleta de cores</span></span>
<span id="cb25-10">cores <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#0c4f6a"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#177498"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#0a8faa"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#bfdce5"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#82bd4a"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#b8d67a"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#b2b3b6"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#58585a"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#edb634"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#d97933"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#f1bdb1"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#eca091"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#e26c54"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#b0391e"</span>]</span>
<span id="cb25-11">sns.set_palette(sns.color_palette(cores))</span>
<span id="cb25-12"></span>
<span id="cb25-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Ajustando qualidade da imagem</span></span>
<span id="cb25-14">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"figure.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb25-15">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.dpi"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb25-16">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"savefig.format"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"svg"</span></span>
<span id="cb25-17"></span>
<span id="cb25-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para remover parte do box da imagem, fazemos isso:</span></span>
<span id="cb25-19">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.left"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb25-20">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.right"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb25-21">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.top"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb25-22">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"axes.spines.bottom"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb25-23"></span>
<span id="cb25-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#Fontes</span></span>
<span id="cb25-25">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend.fontsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb25-26">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend.title_fontsize"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span></span>
<span id="cb25-27">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"legend.frameon"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span>
<span id="cb25-28"></span>
<span id="cb25-29">plt.ticklabel_format(style<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plain"</span>, useLocale<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb25-30">plt.tick_params(axis<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'both'</span>, which<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'major'</span>, labelsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>)</span>
<span id="cb25-31"></span>
<span id="cb25-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O padrão para tamanho das barras é 0.8. Quando colocamos 1, as barras se encostam. </span></span>
<span id="cb25-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Portanto, aumentamos para 0.95 para que não se encostem, mas fiquem mais largas.</span></span>
<span id="cb25-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># A nossa outra alteração foi na rotina que imprime os valores, onde pudemos ajustar</span></span>
<span id="cb25-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># o tamanho da fonte de 3 para 4</span></span>
<span id="cb25-36">sx <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sns.barplot(brics_us, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Country'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Year'</span>, width<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.95</span>)</span>
<span id="cb25-37"></span>
<span id="cb25-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Aqui buscamos os valores que foram adicionados no eixo e os modificamos </span></span>
<span id="cb25-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># com a formatação adequada</span></span>
<span id="cb25-40">current_values <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.gca().get_yticks().tolist()</span>
<span id="cb25-41">formatted_values <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{:,.1f}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000000</span>) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> x <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> current_values]</span>
<span id="cb25-42">plt.gca().set_yticklabels(formatted_values)</span>
<span id="cb25-43"></span>
<span id="cb25-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Esta função adiciona um título no gráfico</span></span>
<span id="cb25-45">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Crescimento Populacional no BRICS (1970 - 2020)'</span>, fontsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, loc<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'left'</span>)</span>
<span id="cb25-46"></span>
<span id="cb25-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Estas funções nos permitem alterar o títulos nos eixos</span></span>
<span id="cb25-48">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>)</span>
<span id="cb25-49"></span>
<span id="cb25-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Removendo todo o eixo Y</span></span>
<span id="cb25-51">sx.get_yaxis().set_visible(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span>
<span id="cb25-52"></span>
<span id="cb25-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O Objeto patches contém todos os elementos (neste caso barras) que foram plotados no gráfico</span></span>
<span id="cb25-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Então percorremos eles e fazemos os seguintes calculos:</span></span>
<span id="cb25-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># a coordenada x para posicionar o texto = Coordenada X do canto superior da barra + largura da barra / 2</span></span>
<span id="cb25-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># a coordenada Y para posicionar o texto = Coordenada Y do canto superior da barra + 1% desta altura</span></span>
<span id="cb25-57"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> p <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> sx.patches:</span>
<span id="cb25-58">  _x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (p.get_x() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p.get_width() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb25-59">  _y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> p.get_y() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p.get_height() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> (p.get_height()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.01</span>)</span>
<span id="cb25-60">  value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{:.2f}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(p.get_height()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000000</span>)</span>
<span id="cb25-61">  sx.text(_x, _y, value, ha<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"center"</span>, size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) </span>
<span id="cb25-62"></span>
<span id="cb25-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Essa alteração foi no improviso, pois estava dizendo Year, ou seja,</span></span>
<span id="cb25-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># uma parte do gráfico utilizava um idioma diferente.</span></span>
<span id="cb25-65">plt.legend(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Ano'</span>)</span>
<span id="cb25-66"></span>
<span id="cb25-67">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/fc/hns7cg2j2xg_05kdl6cbxkw40000gn/T/ipykernel_47418/1546591451.py:42: UserWarning: FixedFormatter should only be used together with FixedLocator
  plt.gca().set_yticklabels(formatted_values)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-110/index_files/figure-html/cell-19-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Acho que agora, estamos prontos para enviar esse belo gráfico para quem vai usá-lo!</p>
</section>
</section>
</section>
<section id="conclusão" class="level2">
<h2 class="anchored" data-anchor-id="conclusão">Conclusão</h2>
<p>Nesta aula, aprendemos sobre como configurar nossos gráficos para que fiquem com uma aparência mais profissional e respeitem as boas práticas da área de Visualização de Dados. Vamos deixar também os links para as documentações das bibliotecas que utilizamos: - <a href="https://seaborn.pydata.org/">Seaborn</a> - <a href="https://matplotlib.org/stable/index.html">Matplotlib</a></p>
<section id="navegação" class="level3">
<h3 class="anchored" data-anchor-id="navegação">Navegação</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th><a href="../../posts/data-109/index.html">&lt; Anterior</a></th>
<th>|</th>
<th style="text-align: right;"><a href="../../posts/data-111/index.html">Próximo &gt;</a></th>
</tr>
</thead>

</table>


</section>
</section>

 ]]></description>
  <category>Visualização</category>
  <category>Python</category>
  <category>Pandas</category>
  <category>Seaborn</category>
  <category>MatPlotLib</category>
  <category>Boas Práticas</category>
  <guid>https://blog.wvcode.com.br/posts/data-110/</guid>
  <pubDate>Sun, 12 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/library/concepts/programming_practice.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>[VDP] Aula 09 - Seaborn - Tudo acaba em Pizza</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-109/</link>
  <description><![CDATA[ 





<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Olá Cientista de Dados!</p>
<p>Dentro da área de Visualização de Dados existe uma grande polêmica em relação a um tipo de gráfico: o gráfico de pizza ou torta. E a polêmica não é quanto ao nome, mas a quando devemos utilizar este tipo de gráfico.</p>
<p>Nesta aula, iremos aprender um pouco sobre essa polêmica e depois, vamos ver como podemos criar este gráfico usando as bibliotecas python seaborn, matplotlib e pandas!</p>
</section>
<section id="definindo-gráfico-de-pizza-ou-será-torta" class="level2">
<h2 class="anchored" data-anchor-id="definindo-gráfico-de-pizza-ou-será-torta">Definindo Gráfico de Pizza… ou será Torta?</h2>
<p>O gráfico de pizza (ou torta) é um gráfico que tem por objetivo representar as categorias ou dimensões como parte de um todo.</p>
<section id="exemplo" class="level3">
<h3 class="anchored" data-anchor-id="exemplo">Exemplo</h3>
<p>Considere o seguinte cenário: você realizou uma votação sobre qual sabor de pizza é o mais popular. Essa votação foi feita junto aos clientes da pizzaria onde você trabalha, durante o curso de 1 semana. Hoje haverá uma reunião com o dono da pizzaria, onde vocês discutirão quais são os sabores que entrarão na próxima grande promoção da loja. Para isso, você vai apresentar os resultados da votação. E (piada interna) você decidiu que nada melhor que usar um gráfico de pizza para esta tarefa!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-109/pizza.jpg" class="img-fluid figure-img"></p>
<figcaption>Um gráfico de pizza!</figcaption>
</figure>
</div>
<p>Como vocês podem ver pela deliciosa imagem acima, o gráfico de pizza é composto por um círculo, que irá representar a totalidade dos votos que foram coletados. Então, cada sabor que foi votado irá representar uma fatia desta pizza. Se olharmos os valores representados no gráfico (que são porcentagens), conseguimos ter uma idéia do quanto cada fatia representa em relação ao todo.</p>
<p>E, olhando essa imagem, você pode se perguntar: está tudo tão claro, onde está a polêmica? Para isso, vamos ver outra imagem:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-109/badpizza001.jpg" class="img-fluid figure-img"></p>
<figcaption>Exemplo de Gráfico Ruim</figcaption>
</figure>
</div>
<p>Esse gráfico, que visa demonstrar os tweeters mais ativos, representa o principal problema dos gráficos de pizza: quanto mais categorias você tem, menos cada uma representa do todo, deixando mais díficil para o público entender essa representação. A próxima imagem ilustra o outro problema que geralmente encontramos em gráficos de pizza:</p>
<p><img src="https://blog.wvcode.com.br/posts/data-109/badpizza002.jpg" class="img-fluid"></p>
<p>Por algum motivo estranho, gráficos de pizza também tem uma perspectiva diferente. E essa mudança de perspectiva torna ainda pior a capacidade do público de perceber a diferença entre cada ‘fatia’.</p>
</section>
<section id="características-de-uma-boa-pizza-gráfico-de-pizza" class="level3">
<h3 class="anchored" data-anchor-id="características-de-uma-boa-pizza-gráfico-de-pizza">Características de uma boa Pizza (Gráfico de Pizza)</h3>
<p>Então, devemos usar gráficos de pizza ou não? A resposta mais simples é - depende. Baseado em inúmeros especialistas da área de visualização, você pode usar gráficos de pizza quando tem poucas categorias para serem representados. Outra recomendação é evitar mostrar o gráfico em perspectiva, além de utilizar rótulos informativos e bem simples para cada fatia.</p>
<p>Então, antes de ver como montar esse tipo de gráfico, vamos ficar com uma imagem que reforça o aprendizado até aqui:</p>
<p><img src="https://blog.wvcode.com.br/posts/data-109/goodpie-badpie.png" class="img-fluid"></p>
</section>
</section>
<section id="utilização-básica" class="level2">
<h2 class="anchored" data-anchor-id="utilização-básica">Utilização básica</h2>
<p>Para criar o gráfico de pizza teremos que abandonar um pouco o seaborn, e nos concentrarmos em utilizar apenas o matplotlib. Já estamos usando parte do matplotlib para colocarmos títulos no gráfico e nos eixos, acertarmos faixas de valores nos eixos e mais alguns detalhes. Agora, iremos utiliza-lo também para plotar o gráfico. Em primeiro lugar, vamos inicializar o ambiente e carregar os dados.</p>
<div id="cell-17" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb1-3"></span>
<span id="cb1-4">pokemons <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pokemons.csv'</span>)</span></code></pre></div>
</div>
<p>Depois, fazemos a agregação dos dados no nível da categoria que vamos plotar. Para criarmos um gráfico de pizza bom, vamos plotar o número de pokemons por geração. Isso nos dará poucas categorias (8), e faz sentido ver a distribuição do número de pokemons. Se quiséssemos plotar qualquer outro atributo, como ataque, defesa, etc…, provavelmente um gráfico de pizza não seria indicado, pois não faz sentido representar a soma dos poderes de ataque dos pokemons como um todo.</p>
<div id="cell-19" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1">pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation Desc'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">apply</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">lambda</span> gen: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Gen '</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">int</span>(gen)))</span>
<span id="cb2-2"></span>
<span id="cb2-3">pokemons_gen <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pokemons.groupby([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation Desc'</span>])[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Number'</span>]].count().reset_index()</span>
<span id="cb2-4">pokemons_gen.sort_values(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation Desc'</span>, inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb2-5"></span>
<span id="cb2-6">plt.pie(pokemons_gen[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Number'</span>], labels<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>pokemons_gen[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation Desc'</span>], autopct<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%.2f%%</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, counterclock<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span>
<span id="cb2-7"></span>
<span id="cb2-8">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-109/index_files/figure-html/cell-3-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>E aí está o nosso gráfico de pizza! Importante observar que novamente, fizemos algumas transformações nos dados, incluindo ordenar os dados, porque caso contrário, as fatias ficarão fora de ordem. Vamos adicionar título e legenda, como em todos os nossos outros gráficos.</p>
<div id="cell-21" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation Desc'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">apply</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">lambda</span> gen: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Gen '</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">int</span>(gen)))</span>
<span id="cb3-2"></span>
<span id="cb3-3">pokemons_gen <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pokemons.groupby([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation Desc'</span>])[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Number'</span>]].count().reset_index()</span>
<span id="cb3-4">pokemons_gen.sort_values(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation Desc'</span>, inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb3-5"></span>
<span id="cb3-6">plt.pie(pokemons_gen[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Number'</span>], labels<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>pokemons_gen[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation Desc'</span>], autopct<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%.2f%%</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, counterclock<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span>
<span id="cb3-7"></span>
<span id="cb3-8">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pokemons por Geração'</span>)</span>
<span id="cb3-9">plt.legend(loc<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'upper right'</span>, bbox_to_anchor<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.40</span>,<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.02</span>))</span>
<span id="cb3-10"></span>
<span id="cb3-11">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-109/index_files/figure-html/cell-4-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Pronto, aí está o polêmico gráfico de pizza!</p>
<section id="conclusão" class="level3">
<h3 class="anchored" data-anchor-id="conclusão">Conclusão</h3>
<p>Nesta aula, aprendemos como criar gráficos que nos ajudam a entender como nossas variáveis categóricas se relacionam enquanto partes de um todo. E para isto utilizamos o tão famoso gráfico de Pizza. Também aprendemos em quais casos este tipo de gráfico faz sentido e quando sua utilização prejudica a compreensão dos dados. Se quiser saber mais sobre gráficos de pizza, <a href="https://ibpad.com.br/ciencia-dados/sete-erros-classicos-em-graficos-de-pizza/">clique aqui</a>.</p>
</section>
<section id="navegação" class="level3">
<h3 class="anchored" data-anchor-id="navegação">Navegação</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th><a href="../../posts/data-108/index.html">&lt; Anterior</a></th>
<th>|</th>
<th style="text-align: right;"><a href="../../posts/data-110/index.html">Próximo &gt;</a></th>
</tr>
</thead>

</table>


</section>
</section>

 ]]></description>
  <category>Visualização</category>
  <category>Python</category>
  <category>Pandas</category>
  <category>MatPlotLib</category>
  <category>Gráfico de Pizza</category>
  <guid>https://blog.wvcode.com.br/posts/data-109/</guid>
  <pubDate>Sat, 11 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/library/concepts/programming_practice.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>[VDP] Aula 08 - Dispersão e Quadrantes</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-108/</link>
  <description><![CDATA[ 





<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Olá Cientista de Dados!</p>
<p>Nas aulas anteriores aprendemos a criar gráficos que nos permitem realizar comparações entre categorias de uma dimensão, e também observar as variações de uma categoria ao longo de uma dimensão contínua (podendo ser uma dimensão numérica ou a mais popular, o tempo). Outra característica que esses gráficos possuem é que eles demonstram valores agregados no nível das categorias que estão sendo comparadas.</p>
<p>Nesta aula, iremos explorar gráficos que nos permitirão: - analisar a distribuição dos valores ao longo de variáveis contínuas de forma individualizada - analisar a correlação entre variáveis - identificar o que chamamos de outliers, que são os pontos que fogem da distribuição observada (aquele ponto fora da curva).</p>
<p>Para realizar esse tipo de análise, vamos trabalhar com os Gráficos de Dispersão e Pontos.</p>
</section>
<section id="preparação" class="level2">
<h2 class="anchored" data-anchor-id="preparação">Preparação</h2>
<p>Vamos carregar nossa bibliotecas e os dados.</p>
<div id="cell-6" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> seaborn <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sns</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb1-4"></span>
<span id="cb1-5">pokemons <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pokemons.csv'</span>)</span></code></pre></div>
</div>
</section>
<section id="utilização-básica" class="level2">
<h2 class="anchored" data-anchor-id="utilização-básica">Utilização Básica</h2>
<p>Como mencionamos anteriormente, uma das características dos gráficos de dispersão e pontos é que normalmente queremos que cada linha do nosso conjunto de dados esteja representado, com seus valores individualizados, ao contrário dos gráficos de barras, onde as informações estão agregadas através de cálculos de média, soma, …</p>
<p>Outra notada diferença é que neste tipo de gráfico, os eixos não utilizam categorias discretas. O que vemos é representação do domínio contínuo de variáveis, e os pontos correspondem a uma ocorrência.</p>
<p>Trazendo para a realidade do nosso conjunto de dados: os gráficos de dispersão não terão em seus eixos valores como Tipo ou Geração - o que iremos colocar nos eixos serão Ataque e Defesa, e os pontos plotados no gráfico representarão cada um dos pokemons no nosso conjunto de dados.</p>
<p>Para fazer isso, utilizaremos a função <code>scatterplot()</code> do seaborn.</p>
<p>Vamos ver na prática?</p>
<div id="cell-9" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1">sns.scatterplot(pokemons, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Att'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Def'</span>)</span>
<span id="cb2-2">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Análise de Pontos de Ataque X Defesa'</span>)</span>
<span id="cb2-3">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pontos de Ataque'</span>)</span>
<span id="cb2-4">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pontos de Defesa'</span>)</span>
<span id="cb2-5">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-108/index_files/figure-html/cell-3-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>É bem simples, não é mesmo? Escolhemos a variável do eixo X e a variável do eixo Y e é isso, vemos cada um dos nossos pokemons plotados no gráfico.</p>
<p>Esse tipo de gráfico serve para mostrarmos a relação que existe entre as duas variáveis. No gráfico acima, podemos perceber que existe uma maior concentração de pokemons na faixa de 50-100 pontos de ataque e defesa. Também percebemos outras informações, tais como: - pelo menos 1 pokemon tem um alto valor de pontos de defesa, mas quase nada de pontos de ataque - pelo menos 1 pokemon tem um alto valor de pontos de ataque, mas quase nada de pontos de defesa.</p>
<p>Isso são o que chamamos de outliers, pois fogem da distribuição que percebemos como padrão.</p>
<p>Mas podemos melhorar um pouco nosso gráfico. Por exemplo, podemos colorir nossos pontos de acordo com a geração, assim podemos entender qual é a distribuição de cada geração.</p>
<div id="cell-11" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">sns.scatterplot(pokemons, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Att'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Def'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>)</span>
<span id="cb3-2">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Análise de Pontos de Ataque X Defesa'</span>)</span>
<span id="cb3-3">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pontos de Ataque'</span>)</span>
<span id="cb3-4">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pontos de Defesa'</span>)</span>
<span id="cb3-5">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-108/index_files/figure-html/cell-4-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Melhorou um pouco, agora temos noção das gerações, mas a distribuição náo é uniforme, pois como o valor é numérico ele criou faixas de valores. Se quisermos ver cada geração individualmente, teremos que trabalhar nossos dados.</p>
<section id="adicionando-uma-coluna-em-nossos-dados" class="level3">
<h3 class="anchored" data-anchor-id="adicionando-uma-coluna-em-nossos-dados">Adicionando uma coluna em nossos dados</h3>
<p>Adicionar uma nova coluna em um DataFrame pandas é bem simples:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation Desc'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span></span></code></pre></div>
<p>Isso criará uma nova coluna chamada ‘Generation Desc’ que terá cada linha populada com o valor “” (vazio). Isso é um bom início, mas precisamos atribuir um valor a esta coluna, preferencialmente baseado no valor do campo ‘Generation’ original. Para isso, iremos utilizar a função <code>apply()</code> do DataFrame. Vamos ao comando.</p>
<div id="cell-15" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1">pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation Desc'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">apply</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">lambda</span> gen: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Gen '</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">int</span>(gen)))</span></code></pre></div>
</div>
<p>A função <code>apply()</code> nos permite aplicar uma função (aqui utilizamos uma função lambda) que transforma o valor do campo Generation em um valor inteiro sem casas decimais para depois transforma-lo em texto, de forma que consigamos juntar com a string ‘Gen’. Assim, temos uma descrição textual da geração. Com isso, podemos agora, tentar novamente o plot do gráfico.</p>
<div id="cell-17" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1">sns.scatterplot(pokemons, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Att'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Def'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation Desc'</span>)</span>
<span id="cb6-2">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Análise de Pontos de Ataque X Defesa'</span>)</span>
<span id="cb6-3">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pontos de Ataque'</span>)</span>
<span id="cb6-4">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pontos de Defesa'</span>)</span>
<span id="cb6-5">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-108/index_files/figure-html/cell-6-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>As cores ficaram bem melhores, mas a posição da legenda ficou bem ruim. Vamos arrumar?</p>
<div id="cell-19" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1">sns.scatterplot(pokemons, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Att'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Def'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation Desc'</span>)</span>
<span id="cb7-2">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Análise de Pontos de Ataque X Defesa'</span>)</span>
<span id="cb7-3">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pontos de Ataque'</span>)</span>
<span id="cb7-4">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pontos de Defesa'</span>)</span>
<span id="cb7-5">plt.legend(loc<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'upper right'</span>, bbox_to_anchor<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.21</span>,<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.02</span>))</span>
<span id="cb7-6">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-108/index_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Agora temos nosso gráfico de dispersão pronto. Na próxima seção, vamos discutir um caso específico de gráfico de dispersão, chamado de Gráfico de Quadrantes.</p>
</section>
<section id="gráfico-de-quadrantes" class="level3">
<h3 class="anchored" data-anchor-id="gráfico-de-quadrantes">Gráfico de Quadrantes</h3>
<p>O gráfico de quadrantes é um caso específico de um gráfico de dispersão, onde dividimos a área do gráfico em quadrantes - superior esquerdo, superior direito, inferior esquerdo e inferior direito - e a presença de um ponto nesses quadrantes tem um significado especial. O maior exemplo deste tipo de gráfico é o “Quadrante Mágico” do Grupo Gartner, que publica todos os anos neste formato quais as empresas ou produtos que se posicionam como líderes do mercado em cada setor. Veja o exemplo abaixo, que representa O Quadrante Mágico de 2022 para a área de Business Intelligence.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-108/gmq-2022-bi.png" class="img-fluid figure-img"></p>
<figcaption>Quadrante Mágico 2022 - BI</figcaption>
</figure>
</div>
<p>Neste formato do Gartner, os pontos que estiverem no quadrante superior direito são considerados os líderes do mercado, levando em conta as variáveis completude da visão e capacidade de execução, que são dois scores calculados e ficam em uma escala de 1 a 10 pontos.</p>
<p>Então, levando em consideração que o nosso gráfico de dispersão utiliza os atributos de Ataque e Defesa, vamos imaginar como transformar esse gráfico em um ‘Quadrante Mágico’ que nos permitirá saber quais são os pokemons mais capazes e que possuem a melhor relação entre pontos de ataque e defesa.</p>
<p>As mudanças que iremos aplicar no nosso gráfico original de dispersão são: - deixar os eixos com a mesma faixa de valores. Agora eles estão levemente desencontrados - plotar os eixos que dividem os quadrantes - plotar um texto descritivo para cada quadrante - se possível, poder nomear cada ponto no gráfico, com o nome do pokemon.</p>
<p>Acompanhe os comentários no código para entender o que foi feito!</p>
<div id="cell-25" class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># gera o gráfico original</span></span>
<span id="cb8-2">sns.scatterplot(pokemons, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Att'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Def'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation Desc'</span>)</span>
<span id="cb8-3"></span>
<span id="cb8-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># adiciona os títulos</span></span>
<span id="cb8-5">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Análise de Pontos de Ataque X Defesa'</span>)</span>
<span id="cb8-6">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pontos de Ataque'</span>)</span>
<span id="cb8-7">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pontos de Defesa'</span>)</span>
<span id="cb8-8"></span>
<span id="cb8-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># adiciona e posiciona a legenda</span></span>
<span id="cb8-10">plt.legend(loc<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'upper right'</span>, bbox_to_anchor<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.21</span>,<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.02</span>))</span>
<span id="cb8-11"></span>
<span id="cb8-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ajusta a faixa de valores para os dois eixos</span></span>
<span id="cb8-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># observe que utilizamos valores fixos. O ideal seria utilizar alguma</span></span>
<span id="cb8-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># fórmula ou função para dinamizar, mas vamos deixar simples</span></span>
<span id="cb8-15">plt.xlim(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">225</span>)</span>
<span id="cb8-16">plt.ylim(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">225</span>)</span>
<span id="cb8-17"></span>
<span id="cb8-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># traçamos as linhas de divisão dos quadrantes</span></span>
<span id="cb8-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># observe que a posição delas é na exata metade do </span></span>
<span id="cb8-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># valor máximo de cada eixo</span></span>
<span id="cb8-21">plt.axhline(y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">112.5</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'blue'</span>, linestyle<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'--'</span>, linewidth<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)           </span>
<span id="cb8-22">plt.axvline(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">112.5</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'blue'</span>,linestyle<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'--'</span>, linewidth<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) </span>
<span id="cb8-23"></span>
<span id="cb8-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># criamos o label que identifica cada quadrante e o seu significado</span></span>
<span id="cb8-25">plt.text(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, s<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fracos"</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'blue'</span>)</span>
<span id="cb8-26">plt.text(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">145</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, s<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Atacantes"</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'blue'</span>)</span>
<span id="cb8-27">plt.text(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">155</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">210</span>, s<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fortes"</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'blue'</span>)</span>
<span id="cb8-28">plt.text(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">210</span>, s<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Defensivos"</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'blue'</span>)</span>
<span id="cb8-29"></span>
<span id="cb8-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># mostra o gráfico</span></span>
<span id="cb8-31">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-108/index_files/figure-html/cell-8-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Ficou bem bonito o nosso quadrante! A única coisa que não fizemos foi adicionar um “tooltip” a cada ponto para sabermos que pokemon é aquele. Para isso, precisamos que o gráfico seja do tipo interativo, o que requer utilizar outra biblioteca. Em uma das próximas aulas iremos explorar uma biblioteca que permite esse tipo de interação.</p>
</section>
</section>
<section id="conclusão" class="level2">
<h2 class="anchored" data-anchor-id="conclusão">Conclusão</h2>
<p>Nesta aula exercitamos ainda mais nossa capacidade de criar gráficos, expandido nosso conhecimento para a aplicação de mais uma função, chamada <code>scatterplot()</code> que nos permite criar gráficos de dispersão e os populares quadrantes mágicos. Também aprendemos mais algumas funções que nos ajudam a melhor formatar os nossos gráficos.</p>
<p>Na próxima aula, vamos aprender a criar o mais polêmico dos gráficos: o gráfico de pizza!!!</p>
<section id="navegação" class="level3">
<h3 class="anchored" data-anchor-id="navegação">Navegação</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th><a href="../../posts/data-107/index.html">&lt; Anterior</a></th>
<th>|</th>
<th style="text-align: right;"><a href="../../posts/data-109/index.html">Próximo &gt;</a></th>
</tr>
</thead>

</table>


</section>
</section>

 ]]></description>
  <category>Visualização</category>
  <category>Python</category>
  <category>Pandas</category>
  <category>Seaborn</category>
  <category>Gráfico de Dispersão</category>
  <category>Quadrante Mágico</category>
  <guid>https://blog.wvcode.com.br/posts/data-108/</guid>
  <pubDate>Fri, 10 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/library/concepts/programming_practice.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>[VDP] Aula 07 - Linhas e Áreas</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-107/</link>
  <description><![CDATA[ 





<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Olá Cientista de Dados!</p>
<p>Na última aula, começamos de maneira efetiva o nosso aprendizado da biblioteca seaborn, para a criação de gráficos utilizando a linguagem Python, e tecnologias interativas como o Google Colab.</p>
<p>Mais especificamente, aprendemos a criar gráficos de barras e suas variações como o gráfico de colunas, barras agrupadas ou até mesmo empilhadas (stacked). Esses gráficos correspondem com certeza à maior parte da nossa necessidade em termos de gráficos, mas ainda temos outra categoria que é muito importante: os gráficos de Linhas e Áreas.</p>
<section id="gráficos-de-linhas-e-áreas" class="level3">
<h3 class="anchored" data-anchor-id="gráficos-de-linhas-e-áreas">Gráficos de Linhas e Áreas</h3>
<p>Os gráficos de Linhas e Áreas são utilizados quando precisamos representar a distribuição de métrica ao longo de um eixo de valores categóricos mas contínuos. O exemplo mais clássico é representar a distribuição de valores ao longo da dimensão do tempo. Mas também é possível utilizar qualquer outra dimensão numérica e contínua.</p>
<p>Então, estão preparados para mais uma dose de conhecimento?</p>
</section>
</section>
<section id="preparação" class="level2">
<h2 class="anchored" data-anchor-id="preparação">Preparação</h2>
<p>A primeira coisa que iremos fazer no nosso notebook é carregar todas as bibliotecas que iremos utilizar e também o nosso conjunto de dados.</p>
<div id="cell-5" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> seaborn <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sns</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb1-4"></span>
<span id="cb1-5">pokemons <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pokemons.csv'</span>)</span></code></pre></div>
</div>
</section>
<section id="utilização-básica" class="level2">
<h2 class="anchored" data-anchor-id="utilização-básica">Utilização Básica</h2>
<p>A utilização básica aqui não é muito diferente do que fizemos para os gráficos de barra: temos uma função que deve poder gerar a visualização, através da passagem de alguns parâmetros básicos: fonte de dados, eixo X, Y, …</p>
<p>Neste caso, a função em questão é a <code>lineplot()</code>. Vamos tentar?</p>
<div id="cell-8" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1">sns.lineplot(pokemons, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Spe'</span>)</span>
<span id="cb2-2">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Variação de Velocidade de acordo com as Gerações'</span>)</span>
<span id="cb2-3">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Geração'</span>)</span>
<span id="cb2-4">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Velocidade'</span>)</span>
<span id="cb2-5">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-107/index_files/figure-html/cell-3-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Padronização é uma maravilha, não é mesmo? Pegamos o nosso código para gráficos de barras e trocamos a função e tudo funcionou! Podemos perceber, no entanto, que a nossa linha representando está envolta por um delimitador azulado. Para resolver isso, vamos dar uma analisada nos parâmetros específicos da função <code>lineplot()</code>.</p>
<p>Por padrão, o gráfico de linhas também plota o que chamamos de error band, ou margem de erro. Se não for interessante, podemos eliminar essa error band.</p>
<div id="cell-10" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">sns.lineplot(pokemons, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Spe'</span>, errorbar<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>)</span>
<span id="cb3-2">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Variação de Velocidade de acordo com as Gerações'</span>)</span>
<span id="cb3-3">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Geração'</span>)</span>
<span id="cb3-4">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Velocidade'</span>)</span>
<span id="cb3-5">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-107/index_files/figure-html/cell-4-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>E, assim como no gráfico de barras, temos a necessidade de plotar mais de uma série no nosso gráfico de linhas. Como fazemos isso? É simples:</p>
<div id="cell-12" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">pokemons_sb <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pokemons[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Spa'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Spd'</span>]] <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Primeiro selecionamos apenas as colunas que queremos trabalhar</span></span>
<span id="cb4-2">tidy <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pokemons_sb.melt(id_vars<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>).rename(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>.title)</span>
<span id="cb4-3"></span>
<span id="cb4-4">sns.lineplot(tidy, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Value'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Variable'</span>, errorbar<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>)</span>
<span id="cb4-5">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Análise das Gerações'</span>)</span>
<span id="cb4-6">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Geração'</span>)</span>
<span id="cb4-7">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Atributos'</span>)</span>
<span id="cb4-8">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-107/index_files/figure-html/cell-5-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Basicamente, tivemos que fazer a mesma operação que fizemos para as múltiplas barras. E o resto do código já é bem conhecido.</p>
<p>O outro tipo de gráfico baseado em linhas é o popular gráfico de área. Mas somente conseguimos gerar esse gráfico utilizando a função <code>stackplot()</code> do MatplotLib. Veja o exemplo abaixo:</p>
<div id="cell-15" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1">pokemons_gb <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pokemons.groupby([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>])[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Spa'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Spd'</span>]].mean().reset_index()</span>
<span id="cb5-2"></span>
<span id="cb5-3">plt.stackplot(pokemons_gb[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>], pokemons_gb[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Spa'</span>], pokemons_gb[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Spd'</span>], labels<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Special Attack'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Special Defense'</span>])</span>
<span id="cb5-4">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Análise das Gerações'</span>)</span>
<span id="cb5-5">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Geração'</span>)</span>
<span id="cb5-6">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Atributos'</span>)</span>
<span id="cb5-7">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-107/index_files/figure-html/cell-6-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>E aí está o nosso gráfico de área! Mais uma vez, recorremos a matplotlib para concluir a plotagem.</p>
</section>
<section id="conclusão" class="level2">
<h2 class="anchored" data-anchor-id="conclusão">Conclusão</h2>
<p>Nesta aula, aprendemos a criar mais dois tipos de gráfico: linha e área, revisamos a utilização de pandas para transformar os dados e acrescentamos mais uma ferramenta no nosso cinto de utilidades.</p>
<p>Se você quiser aprender mais sobre gráficos de linha e área em seaborn, seguem alguns links: - <a href="https://seaborn.pydata.org/introduction.html#introduction">Documentação oficial do Seaborn em português</a>: A documentação oficial do Seaborn tem uma versão em português que fornece uma visão geral da biblioteca, exemplos de uso, informações sobre os diferentes tipos de gráficos, e muito mais - <a href="https://morioh.com/p/4eda0350366b">Gráficos de Linha em Seaborn</a></p>
<p>Na próxima aula, iremos explorar os gráficos de dispersão e pontos.</p>
<section id="navegação" class="level3">
<h3 class="anchored" data-anchor-id="navegação">Navegação</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th><a href="../../posts/data-106/index.html">&lt; Anterior</a></th>
<th>|</th>
<th style="text-align: right;"><a href="../../posts/data-108/index.html">Próximo &gt;</a></th>
</tr>
</thead>

</table>


</section>
</section>

 ]]></description>
  <category>Visualização</category>
  <category>Python</category>
  <category>Pandas</category>
  <category>Seaborn</category>
  <category>MatPlotLib</category>
  <category>Gráfico de Linhas</category>
  <category>Gráfico de Áreas</category>
  <guid>https://blog.wvcode.com.br/posts/data-107/</guid>
  <pubDate>Thu, 09 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/library/concepts/programming_practice.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>[VDP] Aula 06 - Iniciando com Seaborn</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-106/</link>
  <description><![CDATA[ 





<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Olá Cientista de Dados!</p>
<p>Bem-vindo de volta! Na última aula aprendemos como utilizar a biblioteca Pandas para carregar no notebook os dados que pretendemos trabalhar. Também aprendemos a utilizar algumas funções mais avançadas que nos permitem filtrar ou agregar informações em nosso conjunto de dados.</p>
<p>A linguagem Python possui inúmeras bibliotecas não-nativas para gerar visualizações de dados. A biblioteca mais famosa e que muitas vezes serve de base para as outras se chama <strong>matplotlib</strong>. Por uma questão de conveniência e facilidade de uso, utilizaremos no curso a biblioteca <strong>seaborn</strong>.</p>
<p>As principais vantagens do seaborn são: - <strong>interface alto nível</strong> - existe uma função para cada tipo de gráfico, e permite fazer chaining de chamadas - <strong>facilidade de configuração</strong> - possui objetos de configuração globais e locais (em cada gráfico).</p>
<p>Nesta aula, vamos passar pelo processo de instalação e utilização dos tipos de gráficos mais básicos no seaborn.</p>
</section>
<section id="instalação" class="level2">
<h2 class="anchored" data-anchor-id="instalação">Instalação</h2>
<p>Assim como na aula de Pandas, tenho uma boa notícia: no Google Colab o seaborn já vem instalado no nosso ambiente! Mas caso você esteja também se aventurando em fazer este curso no VS Code, PyCharm, Sublime ou até mesmo Notepad, o comando para instalar a biblioteca seaborn é o seguinte:</p>
<pre class="shell"><code>(venv) $ pip install seaborn</code></pre>
</section>
<section id="visualizando-com-seaborn" class="level2">
<h2 class="anchored" data-anchor-id="visualizando-com-seaborn">Visualizando com seaborn</h2>
<p>Agora vamos ver na prática como o seaborn funciona. Nesta aula, veremos os tipos de gráficos mais comuns, indicando sua utilização e dando exemplos. Se você quiser mais detalhes, sempre pode consultar a documentação do seaborn em <a href="https://seaborn.pydata.org/index.html">Seaborn Docs</a>.</p>
<p>Nesta aula, vamos aprender a gerar gráficos de barras ou colunas, baseados nas funções: <code>countplot()</code> e <code>barplot()</code>. Nas aulas seguintes, iremos explorar outros tipos de gráficos, que são um pouco mais avançados.</p>
<section id="inicializando-o-seaborn" class="level3">
<h3 class="anchored" data-anchor-id="inicializando-o-seaborn">Inicializando o seaborn</h3>
<p>Como toda a biblioteca python, precisamos indicar em nosso script quando queremos utilizar a biblioteca seaborn. Fazemos isso através do comando <code>import</code>.</p>
<div id="cell-10" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> seaborn <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sns</span></code></pre></div>
</div>
<p>Da mesma forma que falamos na aula de Pandas, o import do seaborn geralmente utiliza o apelido de sns, que pode ser encontrado em muitos artigos na internet. Vamos manter essa convenção para que vocês se acostumem ao procurar material de apoio.</p>
<p>Por falar de Pandas, precisamos carregar ele também, afinal, precisamos dos nossos dados!</p>
<div id="cell-12" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span></code></pre></div>
</div>
</section>
<section id="carregando-os-dados" class="level3">
<h3 class="anchored" data-anchor-id="carregando-os-dados">Carregando os dados</h3>
<p>E vamos continuar nossas demonstrações com o conjunto de dados de pokemons:</p>
<div id="cell-15" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">pokemons <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pokemons.csv'</span>)</span></code></pre></div>
</div>
</section>
<section id="gráficos-de-barras-ou-colunas" class="level3">
<h3 class="anchored" data-anchor-id="gráficos-de-barras-ou-colunas">Gráficos de barras ou colunas</h3>
<p>Um gráfico de barras ou colunas é uma representação gráfica de dados em que as informações são exibidas em barras verticais ou horizontais de comprimentos variáveis. Cada barra ou coluna representa uma categoria ou conjunto de dados diferentes, e a altura ou comprimento da barra é proporcional à quantidade ou valor correspondente.</p>
<p>Os gráficos de barras são frequentemente usados para comparar quantidades ou valores entre diferentes categorias, enquanto os gráficos de colunas são mais adequados para exibir uma série temporal de dados. Ambos os tipos de gráficos podem ser usados para exibir dados discretos ou contínuos, e podem ser personalizados para incluir rótulos, legendas e outras informações relevantes. Os gráficos de barras e colunas são comumente usados em relatórios, apresentações e em análises de dados.</p>
<section id="countplot" class="level4">
<h4 class="anchored" data-anchor-id="countplot"><code>countplot()</code></h4>
<p>A primeira função que iremos aprender a utilizar é a função <code>countplot()</code>. Ela é indicada quando queremos realizar a contagem de uma categoria, ou seja, escolhemos um campo categórico em nossos dados e indicamos quantas ocorrências encontramos em nossos dados. Nos próximos blocos de código, veremos vários exemplos de como fazer isso.</p>
<div id="cell-20" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># contando o número de pokemons por geração</span></span>
<span id="cb5-2"></span>
<span id="cb5-3">plot <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sns.countplot(pokemons, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Generation"</span>)</span>
<span id="cb5-4"></span>
<span id="cb5-5">plot</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-106/index_files/figure-html/cell-5-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Olha só, parece bem fácil, não? Está ali o nosso gráfico, com o número de pokemons por geração. No entanto, temos algumas melhorias que podem ser feitas:</p>
<ul>
<li>adicionar um título</li>
<li>corrigir os títulos dos eixos.</li>
</ul>
<p>Para realizar esses ajustes, vamos precisar de uma nova biblioteca, chamada <code>matplotlib</code>. Na verdade, essa biblioteca é a base de muitas outras bibliotecas de visualização, tais como seaborn, plotly e por aí vai.</p>
<p>Neste cenário, <code>matplotlib</code> é utilizada para preparar o que chamamos de área de plotagem, que é o retângulo branco onde nosso gráfico será exibido.</p>
<div id="cell-22" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb6-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># contando o número de pokemons por geração</span></span>
<span id="cb6-3"></span>
<span id="cb6-4">sns.countplot(pokemons, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Generation"</span>)</span>
<span id="cb6-5">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pokemons por Geração'</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># título do gráfico</span></span>
<span id="cb6-6">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Geração'</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># eixo X</span></span>
<span id="cb6-7">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Número de Pokemons'</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># eixo Y</span></span>
<span id="cb6-8"></span>
<span id="cb6-9">plt.show() <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># mostra o gráfico</span></span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-106/index_files/figure-html/cell-6-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Agora sim, temos um gráfico bem desenhado!</p>
<p>Este gráfico é um <strong>Gráfico de Colunas</strong>, de acordo com as definições, pois as barras são verticais. Para transformar em um gráfico de barras, na função <code>countplot()</code> precisamos apenas trocar o x pelo y no segundo parâmetro, além de trocar os títulos na funções xlabel e ylabel. Vamos ver como fica:</p>
<div id="cell-24" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1">sns.countplot(pokemons, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Generation"</span>)</span>
<span id="cb7-2">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pokemons por Geração'</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># título do gráfico</span></span>
<span id="cb7-3">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Geração'</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># eixo Y</span></span>
<span id="cb7-4">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Número de Pokemons'</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># eixo X</span></span>
<span id="cb7-5"></span>
<span id="cb7-6">plt.show() <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># mostra o gráfico</span></span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-106/index_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="barplot" class="level4">
<h4 class="anchored" data-anchor-id="barplot"><code>barplot()</code></h4>
<p>Nos gráficos utilizando <code>countplot()</code> podemos apenas exibir a contagem de elementos para cada valor categórico da coluna que escolhemos. Não temos como, por exemplo, apresentar a média dos pontos de vida dos pokemons. Para isso, precisamos de mais controle sobre os dados que iremos mostrar. Entra em cena a função <code>barplot()</code>:</p>
<div id="cell-27" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb8-2"></span>
<span id="cb8-3">sns.barplot(pokemons, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'HP'</span>, estimator<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>np.mean)</span>
<span id="cb8-4">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Média dos pontos de vida de Pokemons por Geração'</span>)</span>
<span id="cb8-5">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Geração'</span>)</span>
<span id="cb8-6">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Média dos pontos de vida'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>Text(0, 0.5, 'Média dos pontos de vida')</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-106/index_files/figure-html/cell-8-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>E aí está o nosso gráfico. Algumas observações:</p>
<ul>
<li>Precisamos trazer mais uma biblioteca para o nosso script, a biblioteca numpy, para podermos especificar que nosso gráfico de barras iria calcular a média do campo especificado</li>
<li>Além de definirmos o eixo X, definimos também o eixo Y e qual o tipo de cálculo a ser realizado</li>
<li>Cada barra tem um risco preto. Esse risco se refere a margem de erro. Se você não quiser ver essa informação, apenas adicionamos mais um parâmetro a função e ela desaparece.</li>
</ul>
<div id="cell-29" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1">sns.barplot(pokemons, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'HP'</span>, estimator<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>np.mean, errwidth<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb10-2">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Média dos pontos de vida de Pokemons por Geração'</span>)</span>
<span id="cb10-3">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Geração'</span>)</span>
<span id="cb10-4">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Média dos pontos de vida'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>Text(0, 0.5, 'Média dos pontos de vida')</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-106/index_files/figure-html/cell-9-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>E aí está o nosso gráfico de colunas. Outra coisa que podemos explorar é ter mais de uma métrica sendo analisada pela categoria selecionada. Por exemplo, vamos analisar a média dos pontos de ataque e defesa através das gerações.</p>
<div id="cell-31" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Precisamos fazer ajustes no conjunto de dados</span></span>
<span id="cb12-2">pokemons_sb <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pokemons[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Att'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Def'</span>]] <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Primeiro selecionamos apenas as colunas que queremos trabalhar</span></span>
<span id="cb12-3">tidy <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pokemons_sb.melt(id_vars<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>).rename(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>.title)</span>
<span id="cb12-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># A função melt()  recebe como parâmetro a coluna categórica e pega todas as colunas de métricas e transformam em uma </span></span>
<span id="cb12-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># única coluna, em uma nova linha para cada coluna. Para identificar cada nova linha, outra coluna é adicionada, com</span></span>
<span id="cb12-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># a descrição. Ou seja, realizamos uma transposição do nosso conjunto de dados.</span></span>
<span id="cb12-7"></span>
<span id="cb12-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Gráfico</span></span>
<span id="cb12-9">sns.barplot(tidy, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Value'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Variable'</span>, estimator<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>np.mean, errwidth<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb12-10">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Média dos pontos de ataque e defesa de Pokemons por Geração'</span>)</span>
<span id="cb12-11">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Geração'</span>)</span>
<span id="cb12-12">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Média dos pontos de ataque e defesa'</span>)</span>
<span id="cb12-13">plt.legend()</span>
<span id="cb12-14"></span>
<span id="cb12-15">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-106/index_files/figure-html/cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>No código acima, a parte que faz a plotagem do gráfico continua a mesma, mas temos as duas linhas iniciais que servem para fazer um ajuste nos dados. Quanto mais complexo os gráficos que queremos plotar, mais necessário se torna entender como formatar os dados. Então, aprenda principalmente Pandas e SQL e mantenha todos os seus gráficos fáceis de plotar!</p>
<p>Agora, vamos ver mais um subtipo de gráfico de barras ou colunas: o gráfico de colunas “stacked” ou empilhadas.</p>
<div id="cell-33" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1">pokemons_gb <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pokemons.groupby([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>])[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Att'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Def'</span>]].mean()</span>
<span id="cb13-2"></span>
<span id="cb13-3">plt.bar(pokemons_gb[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>], pokemons_gb[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Att'</span>], color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'blue'</span>, edgecolor<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'white'</span>, width<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb13-4">plt.bar(pokemons_gb[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>], pokemons_gb[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Def'</span>], bottom<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>pokemons_gb[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Att'</span>], color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'red'</span>, edgecolor<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'white'</span>, width<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb13-5">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Média dos pontos de ataque e defesa de Pokemons por Geração'</span>)</span>
<span id="cb13-6">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Geração'</span>)</span>
<span id="cb13-7">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Média dos pontos de ataque e defesa'</span>)</span>
<span id="cb13-8"></span>
<span id="cb13-9">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-106/index_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Nesta versão de stacked bar chart, como podemos perceber pelo código, foi necessária uma nova transformação nos dados, desta vez com as funções <code>groupby()</code> e <code>mean()</code>. Além disso, desenhamos as barras com o matplotlib direto, não chegamos a utilizar o seaborn.</p>
<p>A transformação nos dados foi necessária para agruparmos os valores de ataque e defensa por geração e calcular a média. A opção de utilizar matplotlib direto produziu um gráfico com a aparência bem diferente, e sinceramente, feia se comparada aos outros gráficos que criamos. E existe uma alternativa! Podemos usar o seaborn através do próprio DataFrame, garantindo uma aparência alinhada com o que geramos anteriormente.</p>
<div id="cell-36" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1">pokemons_gb.plot(kind<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bar'</span>, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>, stacked<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb14-2">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Média dos pontos de ataque e defesa de Pokemons por Geração'</span>)</span>
<span id="cb14-3">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Geração'</span>)</span>
<span id="cb14-4">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Média dos pontos de ataque e defesa'</span>)</span>
<span id="cb14-5">plt.legend()</span>
<span id="cb14-6"></span>
<span id="cb14-7">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-106/index_files/figure-html/cell-12-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="concluindo" class="level2">
<h2 class="anchored" data-anchor-id="concluindo">Concluindo</h2>
<p>E isso nos leva ao final desta aula! Conseguimos ver como gerar um dos gráficos mais utilizados na área de Visualização de Dados, o gráfico de barras e suas variações utilizando a biblioteca seaborn. Também aprendemos que para gerar certos tipos de gráficos, é necessário fazer algumas transformações nos dados, o que conecta esta aula a aula de Pandas.</p>
<p>Se você quiser aprender mais sobre seaborn, seguem alguns links: - <a href="https://seaborn.pydata.org/introduction.html#introduction">Documentação oficial do Seaborn em português</a>: A documentação oficial do Seaborn tem uma versão em português que fornece uma visão geral da biblioteca, exemplos de uso, informações sobre os diferentes tipos de gráficos, e muito mais - <a href="https://towardsdatascience.com/data-visualization-with-python-and-seaborn-part-1-29c8d54a854f">Tutorial de visualização de dados com Python e Seaborn</a>: Este tutorial do Towards Data Science fornece uma introdução prática à visualização de dados com Seaborn, incluindo exemplos de código e gráficos. O tutorial abrange tópicos como gráficos de barras, gráficos de dispersão, heatmap e muito mais.</p>
<p>Na próxima aula, iremos continuar vendo outros tipos de gráficos e nos tornando mais familiares com seaborn, matplotilb e pandas.</p>
<section id="navegação" class="level3">
<h3 class="anchored" data-anchor-id="navegação">Navegação</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th><a href="../../posts/data-105/index.html">&lt; Anterior</a></th>
<th>|</th>
<th style="text-align: right;"><a href="../../posts/data-107/index.html">Próximo &gt;</a></th>
</tr>
</thead>

</table>


</section>
</section>

 ]]></description>
  <category>Visualização</category>
  <category>Python</category>
  <category>Pandas</category>
  <category>MatPlotLib</category>
  <category>Seaborn</category>
  <category>Gráfico de Barras</category>
  <category>Gráfico de Colunas</category>
  <guid>https://blog.wvcode.com.br/posts/data-106/</guid>
  <pubDate>Wed, 08 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/library/concepts/programming_practice.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>[VDP] Aula 05 - Pandas</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-105/</link>
  <description><![CDATA[ 





<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Olá Cientista de Dados!</p>
<p>Se você chegou até aqui, significa que já deve ter aprendido como carregar os dados no Google Colab utilizando as bibliotecas padrão do python. E deve ter percebido que a tarefa não é simples, e requer muitas linhas de código (Rapadura é doce mas não é mole não, diria o Yusuke Urameshi).</p>
<p>Justamente com a intenção de simplificar o trabalho dos cientistas e engenheiros de dados é que a biblioteca <strong>Pandas</strong> foi criada. Com a biblioteca Pandas, todo o trabalho de manipulação dos dados fica simplificado, rápido e mais organizado.</p>
</section>
<section id="instalando-pandas" class="level2">
<h2 class="anchored" data-anchor-id="instalando-pandas">Instalando Pandas</h2>
<p>Tenho uma boa notícia: como estamos utilizando o Google Colab para nossas aulas, ele já vem instalado no nosso ambiente! Mas caso você esteja também se aventurando em fazer este curso no VS Code, PyCharm, Sublime ou até mesmo Notepad, o comando para instalar a biblioteca Pandas é o seguinte:</p>
<pre class="shell"><code>(venv) $ pip install pandas</code></pre>
<p>Este comando irá instalar a biblioteca Pandas e todos as bibliotecas dependentes.</p>
</section>
<section id="utilizando-pandas" class="level2">
<h2 class="anchored" data-anchor-id="utilizando-pandas">Utilizando Pandas</h2>
<p>Iremos ver, passo a passo, como utilizar a biblioteca Pandas em nosso notebook Google Colab, passando pelos seus principais conceitos.</p>
<section id="carregando-pandas-no-notebook" class="level3">
<h3 class="anchored" data-anchor-id="carregando-pandas-no-notebook">Carregando Pandas no notebook</h3>
<p>A primeira coisa que devemos fazer é carregar a biblioteca em nosso notebook. Fazemos isso com o comando <code>import</code>.</p>
<div id="cell-11" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span></code></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>É considerado uma boa prática ao carregar a biblioteca sempre utilizar o alias <code>pd</code>. Observe que todos os artigos na internet se utilizam essa mesma referência.</p>
</div>
</div>
</section>
<section id="carregando-os-dados" class="level3">
<h3 class="anchored" data-anchor-id="carregando-os-dados">Carregando os dados</h3>
<p>Na aula 3, aprendemos que uma maneira de carregar os dados em um notebook on Google Colab é a seguinte:</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> csv</span>
<span id="cb3-2"></span>
<span id="cb3-3">pokemons <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {}</span>
<span id="cb3-4"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pokemons.csv'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'r'</span>, encoding<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'utf-8'</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> arquivo:</span>
<span id="cb3-5">  dados <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> csv.DictReader(arquivo)</span>
<span id="cb3-6"></span>
<span id="cb3-7">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> pokemon <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> dados:</span>
<span id="cb3-8">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> key, value <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> pokemon.items():</span>
<span id="cb3-9">      pokemons.setdefault(key,[]).append(value)</span></code></pre></div>
<p>Utilizando pandas, isso será substituído por uma única linha:</p>
<div id="cell-16" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">pokemons <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pokemons.csv'</span>)</span></code></pre></div>
</div>
<p>Ficou bem mais fácil, não é mesmo? Da mesma forma, verificar o conteúdo que foi carregado também se simplifica - vai disso aqui:</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> indice <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>):    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># executa um loop dos dois primeiros elementos do array</span></span>
<span id="cb5-2">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(pokemons[indice])     <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># imprime o elemento</span></span></code></pre></div>
<p>para isso aqui:</p>
<div id="cell-18" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1">pokemons.head(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Number</th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Type 1</th>
<th data-quarto-table-cell-role="th">Type 2</th>
<th data-quarto-table-cell-role="th">Abilities</th>
<th data-quarto-table-cell-role="th">HP</th>
<th data-quarto-table-cell-role="th">Att</th>
<th data-quarto-table-cell-role="th">Def</th>
<th data-quarto-table-cell-role="th">Spa</th>
<th data-quarto-table-cell-role="th">Spd</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Against Bug</th>
<th data-quarto-table-cell-role="th">Against Rock</th>
<th data-quarto-table-cell-role="th">Against Ghost</th>
<th data-quarto-table-cell-role="th">Against Dragon</th>
<th data-quarto-table-cell-role="th">Against Dark</th>
<th data-quarto-table-cell-role="th">Against Steel</th>
<th data-quarto-table-cell-role="th">Against Fairy</th>
<th data-quarto-table-cell-role="th">Height</th>
<th data-quarto-table-cell-role="th">Weight</th>
<th data-quarto-table-cell-role="th">BMI</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>Bulbasaur</td>
<td>Grass</td>
<td>Poison</td>
<td>['Chlorophyll', 'Overgrow']</td>
<td>45</td>
<td>49</td>
<td>49</td>
<td>65</td>
<td>65</td>
<td>...</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>0.7</td>
<td>6.9</td>
<td>14.1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2</td>
<td>Ivysaur</td>
<td>Grass</td>
<td>Poison</td>
<td>['Chlorophyll', 'Overgrow']</td>
<td>60</td>
<td>62</td>
<td>63</td>
<td>80</td>
<td>80</td>
<td>...</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>1.0</td>
<td>13.0</td>
<td>13.0</td>
</tr>
</tbody>
</table>

<p>2 rows × 44 columns</p>
</div>
</div>
</div>
</section>
<section id="mas-não-é-só-isso" class="level3">
<h3 class="anchored" data-anchor-id="mas-não-é-só-isso">Mas não é só isso…</h3>
<p>Outra grande vantagem de se utilizar pandas é que temos a nossa disposição um grande número de opções para carregar dados. Além do <code>read_csv</code>, temos readers especializados: <code>read_json</code>, <code>read_excel</code>, e por aí vai… Aconselho a dar uma olhada no manual do pandas <a href="https://pandas.pydata.org/docs/user_guide/io.html">aqui</a>.</p>
</section>
<section id="inspecionando-os-dados" class="level3">
<h3 class="anchored" data-anchor-id="inspecionando-os-dados">Inspecionando os dados</h3>
<p>Após termos os dados carregados, a nossa próxima atividade é inspecionar os dados. Além do comando que vimos acima <code>head()</code>, que pode nos mostrar as primeiras linhas do DataFrame, temos outras funções, como:</p>
<ul>
<li><code>tail()</code> - mostra as últimas linhas do DataFrame</li>
<li><code>sample()</code> - mostra linhas aleatórias do DataFrame</li>
<li><code>describe()</code> - mostra os valores de diversas medidas</li>
<li><code>info()</code> - mostra os campos do DataFrame com seus tipos</li>
<li><code>shape</code> - dá as dimensões (coluna, linha) do DataFrame</li>
</ul>
<p>Vamos ver em detalhes cada uma destas funções.</p>
<section id="head" class="level4">
<h4 class="anchored" data-anchor-id="head"><code>head()</code></h4>
<p>Esta função lista as primeiras linhas de dados. O pârametro é opcional, o que fará com que a função liste 10 linhas de dados.</p>
<div id="cell-25" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1">pokemons.head(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Number</th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Type 1</th>
<th data-quarto-table-cell-role="th">Type 2</th>
<th data-quarto-table-cell-role="th">Abilities</th>
<th data-quarto-table-cell-role="th">HP</th>
<th data-quarto-table-cell-role="th">Att</th>
<th data-quarto-table-cell-role="th">Def</th>
<th data-quarto-table-cell-role="th">Spa</th>
<th data-quarto-table-cell-role="th">Spd</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Against Bug</th>
<th data-quarto-table-cell-role="th">Against Rock</th>
<th data-quarto-table-cell-role="th">Against Ghost</th>
<th data-quarto-table-cell-role="th">Against Dragon</th>
<th data-quarto-table-cell-role="th">Against Dark</th>
<th data-quarto-table-cell-role="th">Against Steel</th>
<th data-quarto-table-cell-role="th">Against Fairy</th>
<th data-quarto-table-cell-role="th">Height</th>
<th data-quarto-table-cell-role="th">Weight</th>
<th data-quarto-table-cell-role="th">BMI</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>Bulbasaur</td>
<td>Grass</td>
<td>Poison</td>
<td>['Chlorophyll', 'Overgrow']</td>
<td>45</td>
<td>49</td>
<td>49</td>
<td>65</td>
<td>65</td>
<td>...</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>0.7</td>
<td>6.9</td>
<td>14.1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2</td>
<td>Ivysaur</td>
<td>Grass</td>
<td>Poison</td>
<td>['Chlorophyll', 'Overgrow']</td>
<td>60</td>
<td>62</td>
<td>63</td>
<td>80</td>
<td>80</td>
<td>...</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>1.0</td>
<td>13.0</td>
<td>13.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>3</td>
<td>Venusaur</td>
<td>Grass</td>
<td>Poison</td>
<td>['Chlorophyll', 'Overgrow']</td>
<td>80</td>
<td>82</td>
<td>83</td>
<td>100</td>
<td>100</td>
<td>...</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>2.0</td>
<td>100.0</td>
<td>25.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>3</td>
<td>Mega Venusaur</td>
<td>Grass</td>
<td>Poison</td>
<td>['Thick Fat']</td>
<td>80</td>
<td>100</td>
<td>123</td>
<td>122</td>
<td>120</td>
<td>...</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>2.4</td>
<td>155.5</td>
<td>27.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>4</td>
<td>Charmander</td>
<td>Fire</td>
<td>NaN</td>
<td>['Blaze', 'Solar Power']</td>
<td>39</td>
<td>52</td>
<td>43</td>
<td>60</td>
<td>50</td>
<td>...</td>
<td>0.5</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>0.5</td>
<td>0.6</td>
<td>8.5</td>
<td>23.6</td>
</tr>
</tbody>
</table>

<p>5 rows × 44 columns</p>
</div>
</div>
</div>
</section>
<section id="tail" class="level4">
<h4 class="anchored" data-anchor-id="tail"><code>tail()</code></h4>
<p>Esta função lista as últimas linhas de dados. O pârametro é opcional, o que fará com que a função liste 10 linhas de dados.</p>
<div id="cell-28" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1">pokemons.tail(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Number</th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Type 1</th>
<th data-quarto-table-cell-role="th">Type 2</th>
<th data-quarto-table-cell-role="th">Abilities</th>
<th data-quarto-table-cell-role="th">HP</th>
<th data-quarto-table-cell-role="th">Att</th>
<th data-quarto-table-cell-role="th">Def</th>
<th data-quarto-table-cell-role="th">Spa</th>
<th data-quarto-table-cell-role="th">Spd</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Against Bug</th>
<th data-quarto-table-cell-role="th">Against Rock</th>
<th data-quarto-table-cell-role="th">Against Ghost</th>
<th data-quarto-table-cell-role="th">Against Dragon</th>
<th data-quarto-table-cell-role="th">Against Dark</th>
<th data-quarto-table-cell-role="th">Against Steel</th>
<th data-quarto-table-cell-role="th">Against Fairy</th>
<th data-quarto-table-cell-role="th">Height</th>
<th data-quarto-table-cell-role="th">Weight</th>
<th data-quarto-table-cell-role="th">BMI</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1027</td>
<td>896</td>
<td>Glastrier</td>
<td>Ice</td>
<td>NaN</td>
<td>['Chilling Neigh']</td>
<td>100</td>
<td>145</td>
<td>130</td>
<td>65</td>
<td>110</td>
<td>...</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>2.2</td>
<td>800.0</td>
<td>165.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1028</td>
<td>897</td>
<td>Spectrier</td>
<td>Ghost</td>
<td>NaN</td>
<td>['Grim Neigh']</td>
<td>100</td>
<td>65</td>
<td>60</td>
<td>145</td>
<td>80</td>
<td>...</td>
<td>0.5</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>2.0</td>
<td>44.5</td>
<td>11.1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1029</td>
<td>898</td>
<td>Calyrex</td>
<td>Psychic</td>
<td>Grass</td>
<td>['Unnerve']</td>
<td>100</td>
<td>80</td>
<td>80</td>
<td>80</td>
<td>80</td>
<td>...</td>
<td>4.0</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.1</td>
<td>7.7</td>
<td>6.4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1030</td>
<td>898</td>
<td>Calyrex Ice Rider</td>
<td>Psychic</td>
<td>Ice</td>
<td>['As One']</td>
<td>100</td>
<td>165</td>
<td>150</td>
<td>85</td>
<td>130</td>
<td>...</td>
<td>2.0</td>
<td>2.0</td>
<td>2.0</td>
<td>1.0</td>
<td>2.0</td>
<td>2.0</td>
<td>1.0</td>
<td>2.4</td>
<td>809.1</td>
<td>140.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1031</td>
<td>898</td>
<td>Calyrex Shadow Rider</td>
<td>Psychic</td>
<td>Ghost</td>
<td>['As One']</td>
<td>100</td>
<td>85</td>
<td>80</td>
<td>165</td>
<td>100</td>
<td>...</td>
<td>1.0</td>
<td>1.0</td>
<td>4.0</td>
<td>1.0</td>
<td>4.0</td>
<td>1.0</td>
<td>1.0</td>
<td>2.4</td>
<td>53.6</td>
<td>9.3</td>
</tr>
</tbody>
</table>

<p>5 rows × 44 columns</p>
</div>
</div>
</div>
</section>
<section id="sample" class="level4">
<h4 class="anchored" data-anchor-id="sample"><code>sample()</code></h4>
<p>Enquanto <code>head()</code> e <code>tail()</code> mostra o início e o fim do conjunto de dados, o <code>sample()</code> traz linhas aleatórias do conjunto, o que pode ser bem interessante.</p>
<div id="cell-31" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1">pokemons.sample(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Number</th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Type 1</th>
<th data-quarto-table-cell-role="th">Type 2</th>
<th data-quarto-table-cell-role="th">Abilities</th>
<th data-quarto-table-cell-role="th">HP</th>
<th data-quarto-table-cell-role="th">Att</th>
<th data-quarto-table-cell-role="th">Def</th>
<th data-quarto-table-cell-role="th">Spa</th>
<th data-quarto-table-cell-role="th">Spd</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Against Bug</th>
<th data-quarto-table-cell-role="th">Against Rock</th>
<th data-quarto-table-cell-role="th">Against Ghost</th>
<th data-quarto-table-cell-role="th">Against Dragon</th>
<th data-quarto-table-cell-role="th">Against Dark</th>
<th data-quarto-table-cell-role="th">Against Steel</th>
<th data-quarto-table-cell-role="th">Against Fairy</th>
<th data-quarto-table-cell-role="th">Height</th>
<th data-quarto-table-cell-role="th">Weight</th>
<th data-quarto-table-cell-role="th">BMI</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">327</td>
<td>271</td>
<td>Lombre</td>
<td>Water</td>
<td>Grass</td>
<td>['Own Tempo', 'Rain Dish', 'Swift Swim']</td>
<td>60</td>
<td>50</td>
<td>50</td>
<td>60</td>
<td>70</td>
<td>...</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>1.0</td>
<td>1.2</td>
<td>32.5</td>
<td>22.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">514</td>
<td>433</td>
<td>Chingling</td>
<td>Psychic</td>
<td>NaN</td>
<td>['Levitate']</td>
<td>45</td>
<td>30</td>
<td>50</td>
<td>65</td>
<td>50</td>
<td>...</td>
<td>2.0</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.2</td>
<td>0.6</td>
<td>15.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">230</td>
<td>186</td>
<td>Politoed</td>
<td>Water</td>
<td>NaN</td>
<td>['Damp', 'Drizzle', 'Water Absorb']</td>
<td>90</td>
<td>75</td>
<td>75</td>
<td>90</td>
<td>100</td>
<td>...</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>1.0</td>
<td>1.1</td>
<td>33.9</td>
<td>28.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">849</td>
<td>732</td>
<td>Trumbeak</td>
<td>Normal</td>
<td>Flying</td>
<td>['Keen Eye', 'Pickup', 'Skill Link']</td>
<td>55</td>
<td>85</td>
<td>50</td>
<td>40</td>
<td>50</td>
<td>...</td>
<td>0.5</td>
<td>2.0</td>
<td>0.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.6</td>
<td>14.8</td>
<td>41.1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">598</td>
<td>506</td>
<td>Lillipup</td>
<td>Normal</td>
<td>NaN</td>
<td>['Pickup', 'Run Away', 'Vital Spirit']</td>
<td>45</td>
<td>60</td>
<td>45</td>
<td>25</td>
<td>45</td>
<td>...</td>
<td>1.0</td>
<td>1.0</td>
<td>0.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.4</td>
<td>4.1</td>
<td>25.6</td>
</tr>
</tbody>
</table>

<p>5 rows × 44 columns</p>
</div>
</div>
</div>
</section>
<section id="describe" class="level4">
<h4 class="anchored" data-anchor-id="describe"><code>describe()</code></h4>
<p>Esta função nos ajuda a ter uma idéia dos valores que temos em nosso conjunto de dados. A função lista todas as colunas numéricas e apresenta os resultados para os seguintes cálculos estatísticos: média, desvio padrão, valor mínimo, percentil 25%, 50%, 75% e valor máximo.</p>
<p>Isso nos dá uma idéia da variabilidade dos nossos dados, bem como permite uma análise de correlação superficial entre os valores numéricos.</p>
<div id="cell-34" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1">pokemons.describe()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Number</th>
<th data-quarto-table-cell-role="th">HP</th>
<th data-quarto-table-cell-role="th">Att</th>
<th data-quarto-table-cell-role="th">Def</th>
<th data-quarto-table-cell-role="th">Spa</th>
<th data-quarto-table-cell-role="th">Spd</th>
<th data-quarto-table-cell-role="th">Spe</th>
<th data-quarto-table-cell-role="th">BST</th>
<th data-quarto-table-cell-role="th">Mean</th>
<th data-quarto-table-cell-role="th">Standard Deviation</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Against Bug</th>
<th data-quarto-table-cell-role="th">Against Rock</th>
<th data-quarto-table-cell-role="th">Against Ghost</th>
<th data-quarto-table-cell-role="th">Against Dragon</th>
<th data-quarto-table-cell-role="th">Against Dark</th>
<th data-quarto-table-cell-role="th">Against Steel</th>
<th data-quarto-table-cell-role="th">Against Fairy</th>
<th data-quarto-table-cell-role="th">Height</th>
<th data-quarto-table-cell-role="th">Weight</th>
<th data-quarto-table-cell-role="th">BMI</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>...</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
<td>1032.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>439.226744</td>
<td>69.906008</td>
<td>80.526163</td>
<td>74.609496</td>
<td>72.918605</td>
<td>72.139535</td>
<td>68.548450</td>
<td>438.648256</td>
<td>73.108043</td>
<td>20.028104</td>
<td>...</td>
<td>1.002180</td>
<td>1.239826</td>
<td>1.025678</td>
<td>0.974806</td>
<td>1.074855</td>
<td>0.992006</td>
<td>1.094234</td>
<td>1.286822</td>
<td>71.879845</td>
<td>136.735756</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>261.871350</td>
<td>26.189155</td>
<td>32.542374</td>
<td>30.905972</td>
<td>32.773495</td>
<td>27.625876</td>
<td>30.219526</td>
<td>120.675545</td>
<td>20.112591</td>
<td>10.830298</td>
<td>...</td>
<td>0.613111</td>
<td>0.699361</td>
<td>0.577269</td>
<td>0.378040</td>
<td>0.475292</td>
<td>0.511859</td>
<td>0.535159</td>
<td>1.391501</td>
<td>132.872741</td>
<td>3111.666658</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>1.000000</td>
<td>1.000000</td>
<td>5.000000</td>
<td>5.000000</td>
<td>10.000000</td>
<td>20.000000</td>
<td>5.000000</td>
<td>175.000000</td>
<td>29.166667</td>
<td>0.000000</td>
<td>...</td>
<td>0.250000</td>
<td>0.250000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.250000</td>
<td>0.250000</td>
<td>0.250000</td>
<td>0.100000</td>
<td>0.100000</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>211.750000</td>
<td>50.000000</td>
<td>55.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>45.000000</td>
<td>330.000000</td>
<td>55.000000</td>
<td>12.801910</td>
<td>...</td>
<td>0.500000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>0.500000</td>
<td>1.000000</td>
<td>0.600000</td>
<td>9.000000</td>
<td>18.600000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>434.500000</td>
<td>67.000000</td>
<td>78.000000</td>
<td>70.000000</td>
<td>65.000000</td>
<td>70.000000</td>
<td>65.000000</td>
<td>459.000000</td>
<td>76.500000</td>
<td>18.484228</td>
<td>...</td>
<td>1.000000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>29.750000</td>
<td>28.350000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>667.250000</td>
<td>83.000000</td>
<td>100.000000</td>
<td>90.000000</td>
<td>95.000000</td>
<td>90.000000</td>
<td>90.000000</td>
<td>515.000000</td>
<td>85.833333</td>
<td>24.835709</td>
<td>...</td>
<td>1.000000</td>
<td>2.000000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>1.600000</td>
<td>71.275000</td>
<td>42.200000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>898.000000</td>
<td>255.000000</td>
<td>190.000000</td>
<td>230.000000</td>
<td>194.000000</td>
<td>230.000000</td>
<td>200.000000</td>
<td>780.000000</td>
<td>130.000000</td>
<td>103.215659</td>
<td>...</td>
<td>4.000000</td>
<td>4.000000</td>
<td>4.000000</td>
<td>2.000000</td>
<td>4.000000</td>
<td>4.000000</td>
<td>4.000000</td>
<td>20.000000</td>
<td>999.900000</td>
<td>99990.000000</td>
</tr>
</tbody>
</table>

<p>8 rows × 39 columns</p>
</div>
</div>
</div>
</section>
<section id="info" class="level4">
<h4 class="anchored" data-anchor-id="info"><code>info()</code></h4>
<p>Outra função útil é a função <code>info()</code> que traz a descrição da estrutura do DataFrame. Com esta função, você pode verificar os seguintes dados:</p>
<ul>
<li>lista colunas do DataFrame</li>
<li>para cada coluna, quantos elementos não-nulos ela possui</li>
<li>para cada coluna, seu tipo</li>
<li>E ainda o número total de linhas e colunas no DataFrame</li>
</ul>
<div id="cell-37" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1">pokemons.info()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 1032 entries, 0 to 1031
Data columns (total 44 columns):
 #   Column                   Non-Null Count  Dtype  
---  ------                   --------------  -----  
 0   Number                   1032 non-null   int64  
 1   Name                     1032 non-null   object 
 2   Type 1                   1032 non-null   object 
 3   Type 2                   548 non-null    object 
 4   Abilities                1032 non-null   object 
 5   HP                       1032 non-null   int64  
 6   Att                      1032 non-null   int64  
 7   Def                      1032 non-null   int64  
 8   Spa                      1032 non-null   int64  
 9   Spd                      1032 non-null   int64  
 10  Spe                      1032 non-null   int64  
 11  BST                      1032 non-null   int64  
 12  Mean                     1032 non-null   float64
 13  Standard Deviation       1032 non-null   float64
 14  Generation               1032 non-null   float64
 15  Experience type          1032 non-null   object 
 16  Experience to level 100  1032 non-null   int64  
 17  Final Evolution          1032 non-null   float64
 18  Catch Rate               1032 non-null   int64  
 19  Legendary                1032 non-null   float64
 20  Mega Evolution           1032 non-null   float64
 21  Alolan Form              1032 non-null   float64
 22  Galarian Form            1032 non-null   float64
 23  Against Normal           1032 non-null   float64
 24  Against Fire             1032 non-null   float64
 25  Against Water            1032 non-null   float64
 26  Against Electric         1032 non-null   float64
 27  Against Grass            1032 non-null   float64
 28  Against Ice              1032 non-null   float64
 29  Against Fighting         1032 non-null   float64
 30  Against Poison           1032 non-null   float64
 31  Against Ground           1032 non-null   float64
 32  Against Flying           1032 non-null   float64
 33  Against Psychic          1032 non-null   float64
 34  Against Bug              1032 non-null   float64
 35  Against Rock             1032 non-null   float64
 36  Against Ghost            1032 non-null   float64
 37  Against Dragon           1032 non-null   float64
 38  Against Dark             1032 non-null   float64
 39  Against Steel            1032 non-null   float64
 40  Against Fairy            1032 non-null   float64
 41  Height                   1032 non-null   float64
 42  Weight                   1032 non-null   float64
 43  BMI                      1032 non-null   float64
dtypes: float64(29), int64(10), object(5)
memory usage: 354.9+ KB</code></pre>
</div>
</div>
</section>
<section id="shape" class="level4">
<h4 class="anchored" data-anchor-id="shape"><code>shape</code></h4>
<p>Esta não é uma função, mas sim uma propriedade, que retorna uma tupla com as dimensões de linha e coluna do DataFrame.</p>
<div id="cell-40" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1">pokemons.shape</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>(1032, 44)</code></pre>
</div>
</div>
</section>
</section>
<section id="filtrando-os-dados" class="level3">
<h3 class="anchored" data-anchor-id="filtrando-os-dados">Filtrando os dados</h3>
<p>Agora vamos aprender como executar uma das tarefas mais comuns de manipular DataFrames com o objetivo de realizar análises: filtragem dos dados. A versão atual do pandas trouxe algumas funções que nos facilitam enormemente o processo. Mas, com o objetivo de equipa-los com o máximo de informação possível, vamos também aprender os métodos mais conhecidos.</p>
<p>Mas, antes de mostrarmos como realizar os filtros, vamos explicar alguns conceitos básicos, mas bem relevantes para a operação de filtragem dos dados.</p>
<section id="acessando-uma-coluna-do-dataframe" class="level4">
<h4 class="anchored" data-anchor-id="acessando-uma-coluna-do-dataframe"><em>Acessando uma coluna do DataFrame</em></h4>
<p>Pode parecer óbvio, mas para acessar a coluna de um DataFrame, basta fazer o seguinte:</p>
<div id="cell-46" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1">tipos <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Type 1"</span>]</span></code></pre></div>
</div>
<p>Assim, a variável tipos conterá o que chamamos de uma Series, que é um array <code>numpy</code> (biblioteca especializada para criação de arrays numéricos) que contém todas as linhas daquela coluna. Para comprovar isso, vamos imprimir o conteúdo.</p>
<div id="cell-48" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1">tipos</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>0         Grass
1         Grass
2         Grass
3         Grass
4          Fire
         ...   
1027        Ice
1028      Ghost
1029    Psychic
1030    Psychic
1031    Psychic
Name: Type 1, Length: 1032, dtype: object</code></pre>
</div>
</div>
<p>Parece interessante. Mas e se quisessemos criar um novo DataFrame apenas com as colunas Number, Name e Type 1? Parece simples, basta enviar ao DataFrame um array com o nome das colunas que quero extrair.</p>
<div id="cell-50" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1">sub_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pokemons[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Number"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Name"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Type 1"</span>]]</span>
<span id="cb18-2"></span>
<span id="cb18-3">sub_df</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Number</th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Type 1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>Bulbasaur</td>
<td>Grass</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2</td>
<td>Ivysaur</td>
<td>Grass</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>3</td>
<td>Venusaur</td>
<td>Grass</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>3</td>
<td>Mega Venusaur</td>
<td>Grass</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>4</td>
<td>Charmander</td>
<td>Fire</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1027</td>
<td>896</td>
<td>Glastrier</td>
<td>Ice</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1028</td>
<td>897</td>
<td>Spectrier</td>
<td>Ghost</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1029</td>
<td>898</td>
<td>Calyrex</td>
<td>Psychic</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1030</td>
<td>898</td>
<td>Calyrex Ice Rider</td>
<td>Psychic</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1031</td>
<td>898</td>
<td>Calyrex Shadow Rider</td>
<td>Psychic</td>
</tr>
</tbody>
</table>

<p>1032 rows × 3 columns</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Observe a questão da sintaxe de array: quando queremos apenas uma coluna a sintaxe de array não é necessária, ela se aplica apenas a múltiplos campos.</p>
</div>
</div>
<p>Mas, e como podemos acessar uma linha específica de um DataFrame? Se você está seguindo a linha de raciocínio, já imaginou que não é da maneira tradicional. Na verdade, é exatamente ao contrário do que estamos acostumados. Primeiro acessamos a coluna, e depois a linha, enquanto que em conjuntos de dados em formato tabular largo, primeiro acessamos a linha e depois a coluna.</p>
<div id="cell-53" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1">pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Name"</span>][<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>'Bulbasaur'</code></pre>
</div>
</div>
</section>
<section id="percorrendo-um-dataframe" class="level4">
<h4 class="anchored" data-anchor-id="percorrendo-um-dataframe">Percorrendo um DataFrame</h4>
<p>Interessante, certo? Mas isso levanta o seguinte questionamento: quando vou manipular os dados, como filtra-los ou fazer alguma modificação? Nos conjuntos de dados mais tradicionais, eu geralmente percorro o meu conjunto de dados linha a linha e faço os filtros e então altero as colunas. Como fazer isso em pandas?</p>
<div id="cell-56" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> index, pokemon <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> pokemons.iterrows():</span>
<span id="cb21-2">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> index <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>:</span>
<span id="cb21-3">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(pokemon[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Name"</span>])</span>
<span id="cb21-4">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb21-5">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">break</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Bulbasaur
Ivysaur
Venusaur</code></pre>
</div>
</div>
<p>Como pode ser visto no código acima, basta usarmos a função <code>iterrows()</code> e iremos manipular o DataFrame como uma estrutura de dados mais tradicional, como um array de dicionário de dados. No código acima, fizemos um filtro que pega apenas as linhas com index menor ou igual 2, e mostra apenas o nome. Se DataFrames fossem estruturas de dados tradicionais, isso seria a maneira mais lógica de executar esse comando. Mas com pandas, podemos fazer isso:</p>
<div id="cell-58" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1">pokemons[pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Number"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>][<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Name"</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>0        Bulbasaur
1          Ivysaur
2         Venusaur
3    Mega Venusaur
Name: Name, dtype: object</code></pre>
</div>
</div>
<p>Wow, em uma única linha fizemos o filtro de linha e a seleção de coluna, e a principal vantagem sendo que este comando continuou retornando um DataFrame, o que ainda nos permite continuar trabalhando de forma eficiente com os dados que eu escolhi!</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Embora a utilização da função iterrows() pareça ser a forma mais natural e fácil de se trabalhar com Dataframes Pandas, é com a certeza a que apresenta a pior performance. Então, faça um esforço e aprenda muito bem os métodos mais “pandônicos” de manipular Dataframes, Cientista de Dados!</p>
</div>
</div>
<p>Esta linha também nos introduz ao primeiro jeito de realizar filtros de linha: adicionando a expressão lógica nos primeiros parenteses. Parece simples, embora para referenciar ao campo que será utilizado no filtro, eu ainda precise referenciar o próprio DataFrame. E esse foi apenas um filtro simples. Como seria utilizar mais de um campo no filtro? Vamos ver agora mesmo.</p>
<div id="cell-62" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1">pokemons[(pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Number"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> (pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Type 1"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bug"</span>)][<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Name"</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>13    Caterpie
Name: Name, dtype: object</code></pre>
</div>
</div>
<p>Podemos perceber duas coisas: cada condição de filtro deve estar envolta em parenteses (vá em frente, se remover, teremos um erro), e em vez de usar o conector lógico tradicional AND ou OR, utilizamos &amp; (AND) ou | (OR). E quanto mais condições, pior será para lermos com clareza nosso código.</p>
<p>Uma variação deste tipo de filtragem é a utilização da propriedade <code>loc</code>. Ela nos permite acessar linhas diretamente, e utilizando a notação de manipulação de arrays, filtrar rapidamente o DataFrame. Vamos a um exemplo: gostaria de extrair 10 linhas do DataFrame, iniciando na linha 10.</p>
<div id="cell-64" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1">pokemons.loc[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">19</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Number</th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Type 1</th>
<th data-quarto-table-cell-role="th">Type 2</th>
<th data-quarto-table-cell-role="th">Abilities</th>
<th data-quarto-table-cell-role="th">HP</th>
<th data-quarto-table-cell-role="th">Att</th>
<th data-quarto-table-cell-role="th">Def</th>
<th data-quarto-table-cell-role="th">Spa</th>
<th data-quarto-table-cell-role="th">Spd</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Against Bug</th>
<th data-quarto-table-cell-role="th">Against Rock</th>
<th data-quarto-table-cell-role="th">Against Ghost</th>
<th data-quarto-table-cell-role="th">Against Dragon</th>
<th data-quarto-table-cell-role="th">Against Dark</th>
<th data-quarto-table-cell-role="th">Against Steel</th>
<th data-quarto-table-cell-role="th">Against Fairy</th>
<th data-quarto-table-cell-role="th">Height</th>
<th data-quarto-table-cell-role="th">Weight</th>
<th data-quarto-table-cell-role="th">BMI</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>8</td>
<td>Wartortle</td>
<td>Water</td>
<td>NaN</td>
<td>['Rain Dish', 'Torrent']</td>
<td>59</td>
<td>63</td>
<td>80</td>
<td>65</td>
<td>80</td>
<td>...</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>1.0</td>
<td>1.0</td>
<td>22.5</td>
<td>22.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>9</td>
<td>Blastoise</td>
<td>Water</td>
<td>NaN</td>
<td>['Rain Dish', 'Torrent']</td>
<td>79</td>
<td>83</td>
<td>100</td>
<td>85</td>
<td>105</td>
<td>...</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>1.0</td>
<td>1.6</td>
<td>85.5</td>
<td>33.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>9</td>
<td>Mega Blastoise</td>
<td>Water</td>
<td>NaN</td>
<td>['Mega Launcher']</td>
<td>79</td>
<td>103</td>
<td>120</td>
<td>135</td>
<td>115</td>
<td>...</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>1.0</td>
<td>1.6</td>
<td>101.1</td>
<td>39.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>10</td>
<td>Caterpie</td>
<td>Bug</td>
<td>NaN</td>
<td>['Run Away', 'Shield Dust']</td>
<td>45</td>
<td>30</td>
<td>35</td>
<td>20</td>
<td>20</td>
<td>...</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.3</td>
<td>2.9</td>
<td>32.2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>11</td>
<td>Metapod</td>
<td>Bug</td>
<td>NaN</td>
<td>['Shed Skin']</td>
<td>50</td>
<td>20</td>
<td>55</td>
<td>25</td>
<td>25</td>
<td>...</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.7</td>
<td>9.9</td>
<td>20.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>12</td>
<td>Butterfree</td>
<td>Bug</td>
<td>Flying</td>
<td>['Tinted Lens']</td>
<td>60</td>
<td>45</td>
<td>50</td>
<td>90</td>
<td>80</td>
<td>...</td>
<td>0.5</td>
<td>4.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.1</td>
<td>32.0</td>
<td>26.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>13</td>
<td>Weedle</td>
<td>Bug</td>
<td>Poison</td>
<td>['Run Away', 'Shield Dust']</td>
<td>40</td>
<td>35</td>
<td>30</td>
<td>20</td>
<td>20</td>
<td>...</td>
<td>0.5</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>0.3</td>
<td>3.2</td>
<td>35.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>14</td>
<td>Kakuna</td>
<td>Bug</td>
<td>Poison</td>
<td>['Shed Skin']</td>
<td>45</td>
<td>25</td>
<td>50</td>
<td>25</td>
<td>25</td>
<td>...</td>
<td>0.5</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>0.6</td>
<td>10.0</td>
<td>27.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>15</td>
<td>Beedrill</td>
<td>Bug</td>
<td>Poison</td>
<td>['Sniper', 'Swarm']</td>
<td>65</td>
<td>90</td>
<td>40</td>
<td>45</td>
<td>80</td>
<td>...</td>
<td>0.5</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>1.0</td>
<td>29.5</td>
<td>29.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>15</td>
<td>Mega Beedrill</td>
<td>Bug</td>
<td>Poison</td>
<td>['Adaptability']</td>
<td>65</td>
<td>150</td>
<td>40</td>
<td>15</td>
<td>80</td>
<td>...</td>
<td>0.5</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.5</td>
<td>1.4</td>
<td>40.5</td>
<td>20.7</td>
</tr>
</tbody>
</table>

<p>10 rows × 44 columns</p>
</div>
</div>
</div>
<p>Bem prático. A propriedade <code>loc</code> também pode entender o filtro anterior.</p>
<p>E agora, a última maneira pela qual podemos realizar filtros em nossos DataFrames e a mais recomendada devido a legibilidade do código gerado: vamos utilizar a função <code>query()</code>. Esta função permite que escrevamos filtros para o DataFrame como se o mesmo fosse um banco de dados, deixando o código mais limpo, pois eliminamos a necessidade de referenciar o DataFrame a cada filtro, bem como parênteses redundantes. Vamos ver um exemplo:</p>
<div id="cell-66" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1">pokemons.query(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Number &lt; 11 and `Type 1` == 'Bug'"</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Number</th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Type 1</th>
<th data-quarto-table-cell-role="th">Type 2</th>
<th data-quarto-table-cell-role="th">Abilities</th>
<th data-quarto-table-cell-role="th">HP</th>
<th data-quarto-table-cell-role="th">Att</th>
<th data-quarto-table-cell-role="th">Def</th>
<th data-quarto-table-cell-role="th">Spa</th>
<th data-quarto-table-cell-role="th">Spd</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">Against Bug</th>
<th data-quarto-table-cell-role="th">Against Rock</th>
<th data-quarto-table-cell-role="th">Against Ghost</th>
<th data-quarto-table-cell-role="th">Against Dragon</th>
<th data-quarto-table-cell-role="th">Against Dark</th>
<th data-quarto-table-cell-role="th">Against Steel</th>
<th data-quarto-table-cell-role="th">Against Fairy</th>
<th data-quarto-table-cell-role="th">Height</th>
<th data-quarto-table-cell-role="th">Weight</th>
<th data-quarto-table-cell-role="th">BMI</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>10</td>
<td>Caterpie</td>
<td>Bug</td>
<td>NaN</td>
<td>['Run Away', 'Shield Dust']</td>
<td>45</td>
<td>30</td>
<td>35</td>
<td>20</td>
<td>20</td>
<td>...</td>
<td>1.0</td>
<td>2.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.3</td>
<td>2.9</td>
<td>32.2</td>
</tr>
</tbody>
</table>

<p>1 rows × 44 columns</p>
</div>
</div>
</div>
<p>Assim ficou bem mais limpo. Uma única observação é quanto ao uso do caracter “`” para campos com nomes compostos.</p>
</section>
</section>
<section id="agregando-os-dados" class="level3">
<h3 class="anchored" data-anchor-id="agregando-os-dados">Agregando os dados</h3>
<p>Em muitos casos, não queremos apenas filtrar os dados, mas também realizar totalizações, calcular valores médios, ou até mesmo cálculos mais complexos, de dados que devem ser agregados em um ou mais níveis.</p>
<p>Como exemplo, vamos supor que quisessemos totalizar o número de pokemons de acordo com o seu tipo.</p>
<div id="cell-70" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1">pokemons.groupby([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Type 1'</span>])[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Name"</span>].count().reset_index(name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Pokemons"</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Type 1</th>
<th data-quarto-table-cell-role="th">Pokemons</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Bug</td>
<td>81</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Dark</td>
<td>46</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Dragon</td>
<td>42</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Electric</td>
<td>59</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Fairy</td>
<td>22</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Fighting</td>
<td>42</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Fire</td>
<td>64</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Flying</td>
<td>8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Ghost</td>
<td>41</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Grass</td>
<td>91</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>Ground</td>
<td>41</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>Ice</td>
<td>38</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>Normal</td>
<td>114</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>Poison</td>
<td>40</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>Psychic</td>
<td>77</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>Rock</td>
<td>59</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>Steel</td>
<td>36</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>Water</td>
<td>131</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Mas quanta coisa nova naquela linha, não é mesmo? Vamos explicar passo a passo:</p>
<ul>
<li>A primeira função é o groupby, onde especificamos por qual coluna ou colunas iremos fazer o agrupamento. No nosso exemplo, utilizamos a coluna ‘Type 1’</li>
<li>Em seguida, especificamos que, além da coluna ‘Type 1’, queremos apenas a coluna ‘Name’ nos nossos resultados</li>
<li>Logo após, indicamos que o valor original da coluna ‘Name’ será substituído pelo resultado da contagem de quantas linhas do DataFrame tem aquele valor específico da coluna ‘Type 1’</li>
<li>E por último, utilizamos uma função que irá trocar o nome da coluna ‘Name’ por um nome mais significativo</li>
</ul>
<p>Ufa, e tudo isso em apenas uma linha!</p>
<p>A fórmula para a agregação é sempre a mesma: groupby() e tipo de calculo (sum, count, mean, …). Por exemplo, no código abaixo, vamos agrupar também pela geração.</p>
<div id="cell-72" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1">pokemons.groupby([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Type 1'</span>])[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Name'</span>].count().reset_index(name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pokemons'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Generation</th>
<th data-quarto-table-cell-role="th">Type 1</th>
<th data-quarto-table-cell-role="th">Pokemons</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1.0</td>
<td>Bug</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1.0</td>
<td>Dragon</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1.0</td>
<td>Electric</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1.0</td>
<td>Fairy</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1.0</td>
<td>Fighting</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">129</td>
<td>8.0</td>
<td>Poison</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">130</td>
<td>8.0</td>
<td>Psychic</td>
<td>11</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">131</td>
<td>8.0</td>
<td>Rock</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">132</td>
<td>8.0</td>
<td>Steel</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">133</td>
<td>8.0</td>
<td>Water</td>
<td>9</td>
</tr>
</tbody>
</table>

<p>134 rows × 3 columns</p>
</div>
</div>
</div>
<p>E se quisermos saber a média de pontos de vida por geração de pokemon? Parece simples…</p>
<div id="cell-74" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1">pokemons.groupby([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Generation'</span>])[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'HP'</span>].mean().reset_index(name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Average HP'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Generation</th>
<th data-quarto-table-cell-role="th">Average HP</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1.0</td>
<td>64.211921</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2.0</td>
<td>70.980000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>3.0</td>
<td>65.326087</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>4.0</td>
<td>72.775862</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>5.0</td>
<td>71.601227</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>6.0</td>
<td>73.323308</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>7.0</td>
<td>69.793103</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>8.0</td>
<td>72.808696</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="encerrando" class="level2">
<h2 class="anchored" data-anchor-id="encerrando">Encerrando</h2>
<p>Nesta aula, conhecemos um pouco mais a respeito da biblioteca Pandas e como ela pode nos ajudar a carregar e analisar conjuntos de dados que podem ser utilizados em nossas visualizações, de forma simplificada e eficiente.</p>
<p>Dentro do processo de utilização de Pandas, aprendemos as executar as principais tarefas:</p>
<ul>
<li>aprender sobre os metadados do conjunto de dados, utilizando: describe, info e shape</li>
<li>listar conteúdo com head, tail, sample e iterrows</li>
<li>acessar células diretamente</li>
<li>realizar filtros em cima do DataFrame utilizando o método colunar, utilizando loc ou utilizando a função query</li>
<li>agregar os dados para sumarizar a informação e facilitar a análise.</li>
</ul>
<p>Se você quiser saber mais sobre Pandas, eis aqui alguns links que podem ajudar:</p>
<ul>
<li><a href="https://pandas.pydata.org/docs/#">Pandas - Documentação Oficial</a></li>
<li><a href="https://www.w3schools.com/python/pandas/default.asp">Tutorial Pandas - W3 Schools</a></li>
<li><a href="https://www.kaggle.com/learn/pandas">Tutorial Pandas - Kaggle</a></li>
<li><a href="https://www.hashtagtreinamentos.com/introducao-pandas-python?gclid=Cj0KCQjwk7ugBhDIARIsAGuvgPbJfKDsQ2lVfj8ndsjjYq81gRiEuGbzVacfpmT03P6BhDCQVFX1EYAaAo2FEALw_wcB">Vídeo sobre Pandas - Hashtag Treinamentos</a></li>
</ul>
<section id="navegação" class="level3">
<h3 class="anchored" data-anchor-id="navegação">Navegação</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th><a href="../../posts/data-104/index.html">&lt; Anterior</a></th>
<th>|</th>
<th style="text-align: right;"><a href="../../posts/data-106/index.html">Próximo &gt;</a></th>
</tr>
</thead>

</table>


</section>
</section>

 ]]></description>
  <category>Visualização</category>
  <category>Python</category>
  <category>Pandas</category>
  <guid>https://blog.wvcode.com.br/posts/data-105/</guid>
  <pubDate>Tue, 07 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/library/concepts/programming_practice.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>[VDP] Aula 04 - Prática Aulas 2 e 3</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-104/</link>
  <description><![CDATA[ 





<p>Olá Cientista de Dados!</p>
<p>Nesta aula vamos por em prática o que aprendemos até aqui:</p>
<ul>
<li>Criar um notebook no Google Colab</li>
<li>Salvar no Google Drive</li>
<li>Fazer upload de arquivos de dados no sistema de arquivos local do notebook</li>
<li>Fazer upload de arquivos de dados no Google Drive e montar seu Google Drive no notebook</li>
<li>Criar script para carregar dados</li>
<li>Transformar os dados carregados do formato largo para o formato longo.</li>
</ul>
<section id="criando-um-notebook-no-google-colab" class="level2">
<h2 class="anchored" data-anchor-id="criando-um-notebook-no-google-colab">Criando um notebook no Google Colab</h2>
<p>Siga o passo a passo para criar um novo notebook no Google Colab.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-104/colab-001.png" class="img-fluid figure-img"></p>
<figcaption>Acessar o site do Google Colab: https://colab.research.google.com/</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-104/colab-002.png" class="img-fluid figure-img"></p>
<figcaption>Clicar em “Novo notebook”. Será aberta uma nova página com um notebook em branco</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-104/colab-003.png" class="img-fluid figure-img"></p>
<figcaption>Para modificar o nome do notebook para “PrimeiroNotebook”, clicar em “Arquivo &gt; Salvar uma cópia no Drive” no menu superior. Na janela que aparece, modificar o nome para “PrimeiroNotebook” e clicar em “OK”.</figcaption>
</figure>
</div>
<p>Agora, vamos aprender como escrever um código em Python e executa-lo no notebook.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-104/colab-004.png" class="img-fluid figure-img"></p>
<figcaption>No notebook aberto, criar uma nova célula clicando no botão “+ Célula” acima do menu superior ou utilizando o atalho “Ctrl+M B” no teclado</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-104/colab-005.png" class="img-fluid figure-img"></p>
<figcaption>Na nova célula, digitar o código <code>print('Hello World')</code></figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-104/colab-006.png" class="img-fluid figure-img"></p>
<figcaption>Clicar em “Executar” na célula, ou utilizar o atalho “Shift+Enter”. O resultado “Hello World” será exibido abaixo da célula</figcaption>
</figure>
</div>
<p>Dessa forma, o notebook “PrimeiroNotebook” estará pronto para ser utilizado. Lembrando que o Google Colab é uma ferramenta gratuita e muito útil para desenvolvimento de projetos de análise de dados, aprendizado de máquina e outros projetos de programação em Python.</p>
</section>
<section id="carregando-dados-em-um-notebook" class="level2">
<h2 class="anchored" data-anchor-id="carregando-dados-em-um-notebook">Carregando dados em um notebook</h2>
<p>Agora que temos nosso notebook inicial, vamos exercitar o princípio mais básico de toda a visualização de dados: a carga dos dados que serão visualizados.</p>
<p>Para fazer isso, precisamos primeiro de uma fonte de dados. Uma fonte de dados pode ter formatos bem comuns e conhecidos como CSV, Excel e JSON, até outros formatos especializados como Feather, Arrow, Parquet,…Quanto à origem da fonte de dados, elas podem ser um arquivo local no seu computador ou no servidor onde a rotina executará ou até mesmo uma URL. Por questões de performance, o arquivo local tem uma certa preferência.</p>
<p>Quando utilizamos o Google Colab, o nosso notebook tem duas possibilidades para poder ler arquivos de forma local: - os arquivos podem ser armazenados no sistema de arquivos local do notebook, que é temporário, ou - podemos deixar nossos arquivos no Google Drive e conectamos o Google Drive ao nosso notebook</p>
<p>Vamos ver esses dois cenários em detalhe nas próximas seções.</p>
<section id="disponibilizando-arquivos-a-partir-do-sistema-local-do-notebook" class="level3">
<h3 class="anchored" data-anchor-id="disponibilizando-arquivos-a-partir-do-sistema-local-do-notebook">Disponibilizando arquivos a partir do sistema local do notebook</h3>
<p>O sistema de arquivos local do notebook (<em>session storage</em>) é uma maneira muito conveniente de manter de forma local alguns arquivos de dados que precisamos trabalhar. Em termos de performance, seria a mesma coisa que executar tudo no seu próprio computador. O incoveninente desse método é que o session storage é destruído quando fechamos o notebook ou ele fica inativo por muito tempo. Ele é recriado quando reabrimos o notebook, mas vem vazio.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Para o restante das aulas, todos os arquivos de dados que iremos utilizar podem ser encontrados em: <a href="https://github.com/labeduc/datasets">LabEduc datasets</a></p>
<p>Você pode fazer o download ou tentar carregar direto da URL (veremos como fazer isso mais adiante).</p>
</div>
</div>
<p>Para utilizar o session storage, siga os passos abaixo:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-104/load-file-001.png" class="img-fluid figure-img"></p>
<figcaption>Clique no botão Arquivos que fica à esquerda</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-104/load-file-002.png" class="img-fluid figure-img"></p>
<figcaption>Clique no botão de fazer upload de arquivos</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-104/load-file-003.png" class="img-fluid figure-img"></p>
<figcaption>Selecione o arquivo que deseja subir e clique no botão Abrir</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-104/load-file-004.png" class="img-fluid figure-img"></p>
<figcaption>Após o término do upload, você deve ver o arquivo no seu sistema de arquivos do notebook</figcaption>
</figure>
</div>
<p>E pronto, temos um arquivo pronto para ser utilizado!</p>
</section>
<section id="disponibilizando-arquivos-a-partir-do-google-drive" class="level3">
<h3 class="anchored" data-anchor-id="disponibilizando-arquivos-a-partir-do-google-drive">Disponibilizando arquivos a partir do Google Drive</h3>
<p>Outra maneira maneira mais permanente utilizar o session storage é montar nosso Google Drive como uma pasta da session storage.</p>
<p>Para fazer isso, vamos colocar no inicio do nosso notebook uma célula com o código abaixo:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> google.colab <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> drive</span>
<span id="cb1-2">drive.mount(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'/content/drive'</span>)</span></code></pre></div>
<p>Vamos executar a célula e o Google Colab deve pedir permissão para se conectar ao Drive e no final emitir a mensagem abaixo. Além disso, na lista de pastas, à esquerda, devemos ver a pasta que indicamos que receberia o mount do Google Drive.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-104/map-drive-002.png" class="img-fluid figure-img"></p>
<figcaption>Google Drive mapeado após a execução do código</figcaption>
</figure>
</div>
<p>A próxima etapa é realizar a carga de um arquivo com nosso script, para que possamos realizar nossas análises.</p>
</section>
<section id="carregar-um-arquivo-de-dados-no-notebook" class="level3">
<h3 class="anchored" data-anchor-id="carregar-um-arquivo-de-dados-no-notebook">Carregar um arquivo de dados no notebook</h3>
<p>Para esse etapa, vamos utilizar a função nativa do Python para abrir arquivos <strong>open</strong> em conjunto com a biblioteca <strong>csv</strong> para carregar o conteúdo do nosso arquivo em um objeto que será posteriormente utilizado pela biblioteca de visualização. Você pode copiar e colar o código abaixo em seu próprio notebook e testar. Não esqueça que antes, você deve fazer o upload do arquivo <code>pokemons.csv</code> no sistema de arquivos local do notebook.</p>
<div id="cell-25" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> csv                                                   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># importa a biblioteca nativa csv</span></span>
<span id="cb2-2"></span>
<span id="cb2-3">pokemons <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []                                                <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># cria a lista de pokemons vazia</span></span>
<span id="cb2-4"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pokemons.csv'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'r'</span>, encoding<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'utf-8'</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> arquivo: <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># abre o arquivo</span></span>
<span id="cb2-5">  dados <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> csv.DictReader(arquivo)                            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># utiliza a biblioteca csv para ler cada linha do arquivo </span></span>
<span id="cb2-6">                                                             <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># e carrega-la em um dicionário de dados</span></span>
<span id="cb2-7">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> pokemon <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> dados:                                      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># percorre o arquivo linha a linha</span></span>
<span id="cb2-8">    pokemons.append(pokemon)                                 <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># adiciona cada linha na nova lista</span></span></code></pre></div>
</div>
<p>Para verificar se o conteúdo foi carregado na lista de pokemons, podemos executar o código abaixo:</p>
<div id="cell-27" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> indice <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>):    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># executa um loop dos dois primeiros elementos do array</span></span>
<span id="cb3-2">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(pokemons[indice])     <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># imprime o elemento</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'Number': '1', 'Name': 'Bulbasaur', 'Type 1': 'Grass', 'Type 2': 'Poison', 'Abilities': "['Chlorophyll', 'Overgrow']", 'HP': '45', 'Att': '49', 'Def': '49', 'Spa': '65', 'Spd': '65', 'Spe': '45', 'BST': '318', 'Mean': '53.0', 'Standard Deviation': '8.640987597877146', 'Generation': '1.0', 'Experience type': 'Medium Slow', 'Experience to level 100': '1059860', 'Final Evolution': '0.0', 'Catch Rate': '45', 'Legendary': '0.0', 'Mega Evolution': '0.0', 'Alolan Form': '0.0', 'Galarian Form': '0.0', 'Against Normal': '1.0', 'Against Fire': '2.0', 'Against Water': '0.5', 'Against Electric': '0.5', 'Against Grass': '0.25', 'Against Ice': '2.0', 'Against Fighting': '0.5', 'Against Poison': '1.0', 'Against Ground': '1.0', 'Against Flying': '2.0', 'Against Psychic': '2.0', 'Against Bug': '1.0', 'Against Rock': '1.0', 'Against Ghost': '1.0', 'Against Dragon': '1.0', 'Against Dark': '1.0', 'Against Steel': '1.0', 'Against Fairy': '0.5', 'Height': '0.7', 'Weight': '6.9', 'BMI': '14.1'}
{'Number': '2', 'Name': 'Ivysaur', 'Type 1': 'Grass', 'Type 2': 'Poison', 'Abilities': "['Chlorophyll', 'Overgrow']", 'HP': '60', 'Att': '62', 'Def': '63', 'Spa': '80', 'Spd': '80', 'Spe': '60', 'BST': '405', 'Mean': '67.5', 'Standard Deviation': '8.902246907382429', 'Generation': '1.0', 'Experience type': 'Medium Slow', 'Experience to level 100': '1059860', 'Final Evolution': '0.0', 'Catch Rate': '45', 'Legendary': '0.0', 'Mega Evolution': '0.0', 'Alolan Form': '0.0', 'Galarian Form': '0.0', 'Against Normal': '1.0', 'Against Fire': '2.0', 'Against Water': '0.5', 'Against Electric': '0.5', 'Against Grass': '0.25', 'Against Ice': '2.0', 'Against Fighting': '0.5', 'Against Poison': '1.0', 'Against Ground': '1.0', 'Against Flying': '2.0', 'Against Psychic': '2.0', 'Against Bug': '1.0', 'Against Rock': '1.0', 'Against Ghost': '1.0', 'Against Dragon': '1.0', 'Against Dark': '1.0', 'Against Steel': '1.0', 'Against Fairy': '0.5', 'Height': '1.0', 'Weight': '13.0', 'BMI': '13.0'}</code></pre>
</div>
</div>
<p>Podemos ver no resultado da célula de código que aquele <code>for</code> imprimiu o conteúdo de duas linhas do arquivo de pokemons.</p>
</section>
</section>
<section id="transformando-do-formato-largo-para-o-longo" class="level2">
<h2 class="anchored" data-anchor-id="transformando-do-formato-largo-para-o-longo">Transformando do formato Largo para o Longo</h2>
<p>Certo, se você chegou até aqui, então: - Criamos um notebook - Demos um nome para ele - Fizemos o upload de um arquivo de dados para o session storage do notebook - Carregamos os dados em uma lista na memória do notebook.</p>
<p>O que vem a seguir? Vamos começar a utilizar estes dados.</p>
<section id="utilizando-os-dados-na-memória" class="level3">
<h3 class="anchored" data-anchor-id="utilizando-os-dados-na-memória">Utilizando os dados na memória</h3>
<p>Em um cenário real, um Cientista de Dados iniciaria agora a etapa de exploração dos dados. Essa etapa envolve trabalhar com a correlação entre as diversas variáveis contidas nos dados, totalizações de quantidade de registros por qualquer uma dessas variáveis, e, também plotando gráficos.</p>
<p>Vamos a um exemplo? Digamos que eu quero totalizar a quantidade pokemons de acordo com seu tipo. Essa totalização poderia ser utilizada para criar um gráfico de barras, mostrando a distribuição dos pokemons entre os tipos, mostrando qual tipo é mais frequente. É importante aqui ressaltar que temos no conjunto de dados duas colunas que especificam o tipo: <code>Type 1</code> e <code>Type 2</code>.</p>
<p>O código para fazer isso está logo abaixo.</p>
<div id="cell-33" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1">tipos_dict <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {}</span>
<span id="cb5-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> pokemons:</span>
<span id="cb5-3">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Type 1'</span>]:</span>
<span id="cb5-4">      tipos_dict[item[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Type 1'</span>]] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> tipos_dict.get(item[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Type 1'</span>], <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb5-5">  </span>
<span id="cb5-6">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> item[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Type 2'</span>]:</span>
<span id="cb5-7">      tipos_dict[item[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Type 2'</span>]] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> tipos_dict.get(item[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Type 2'</span>], <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb5-8"></span>
<span id="cb5-9">tipos <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb5-10"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> key, value <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> tipos_dict.items():</span>
<span id="cb5-11">  tipos.append({<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tipo"</span>: key, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Valor"</span>: value})</span>
<span id="cb5-12"></span>
<span id="cb5-13"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> tipos:</span>
<span id="cb5-14">   <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(item)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'Tipo': 'Grass', 'Valor': 119}
{'Tipo': 'Poison', 'Valor': 77}
{'Tipo': 'Fire', 'Valor': 81}
{'Tipo': 'Flying', 'Valor': 120}
{'Tipo': 'Dragon', 'Valor': 72}
{'Tipo': 'Water', 'Valor': 151}
{'Tipo': 'Bug', 'Valor': 90}
{'Tipo': 'Normal', 'Valor': 124}
{'Tipo': 'Dark', 'Valor': 72}
{'Tipo': 'Electric', 'Valor': 70}
{'Tipo': 'Psychic', 'Valor': 119}
{'Tipo': 'Ground', 'Valor': 80}
{'Tipo': 'Ice', 'Valor': 56}
{'Tipo': 'Steel', 'Valor': 71}
{'Tipo': 'Fairy', 'Valor': 63}
{'Tipo': 'Fighting', 'Valor': 73}
{'Tipo': 'Rock', 'Valor': 74}
{'Tipo': 'Ghost', 'Valor': 68}</code></pre>
</div>
</div>
<p>Esse código tem como objetivo contar a quantidade de ocorrências de cada tipo de Pokémon e imprimir os resultados. Ele faz isso utilizando um dicionário (tipos_dict) para armazenar a contagem de cada tipo e uma lista de dicionários (tipos) para armazenar os resultados finais.</p>
<p>A primeira parte do código cria um dicionário vazio chamado tipos_dict. Em seguida, itera sobre uma lista de dicionários chamada pokemons. Para cada dicionário na lista, verifica se o valor da chave ‘Type 1’ e ‘Type 2’ é diferente de None. Se pelo menos um desses valores existir, a chave correspondente no dicionário tipos_dict é incrementada em 1.</p>
<p>A segunda parte do código cria uma lista vazia chamada tipos e itera sobre os pares de chave-valor no dicionário tipos_dict. Para cada par de chave-valor, cria um novo dicionário com as chaves “Tipo” e “Valor”, e adiciona esse dicionário à lista tipos. A última parte é apenas para nosso benefício: ela imprime o conteúdo da lista tipos.</p>
<p>Voltando ao nosso cenário real, utilizaríamos a lista tipos para plotar um gráfico, por exemplo. Vamos tentar?</p>
<div id="cell-35" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb7-2"></span>
<span id="cb7-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cria o gráfico de barras</span></span>
<span id="cb7-4"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> tipos:</span>
<span id="cb7-5">  plt.bar(item[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Tipo'</span>], item[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Valor'</span>])</span>
<span id="cb7-6"></span>
<span id="cb7-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Configura o título do gráfico e dos eixos</span></span>
<span id="cb7-8">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pokemons por Tipo'</span>)</span>
<span id="cb7-9">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Tipos'</span>)</span>
<span id="cb7-10">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Número de Pokemons'</span>)</span>
<span id="cb7-11"></span>
<span id="cb7-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Exibe o gráfico na tela</span></span>
<span id="cb7-13">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-104/index_files/figure-html/cell-5-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Olha só, conseguimos! Temos claramente um problema de formatação ocorrendo (o eixo do X está pequeno e a descrição dos tipos estão se sobrepondo), mas com alguns ajustes é um resultado correto. Mas ainda existem alguns problemas que precisam ser discutidos.</p>
</section>
<section id="transformando-o-formato-dos-dados" class="level3">
<h3 class="anchored" data-anchor-id="transformando-o-formato-dos-dados">Transformando o formato dos dados</h3>
<p>O nosso script, embora correto, sob o ponto de vista de Cientistas de Dados, deixa um pouco a desejar sob o ponto de vista da engenharia de software. Por exemplo, utilizamos muito mais memória que o necessário para realizar a totalização, porque tinhamos que analisar o registro completo que tem mais de 50 colunas, mesmo que precisassemos apenas de duas. Para obter os dados que funcionassem com a visualização, tivemos que fazer duas transformações. E ainda, na parte onde fazemos o plot do gráfico, tivemos que recorrer a um <code>for loop</code> para conseguir adicionar todas a barras no gráfico.</p>
<p>E esses problema ocorrem porque os dados acima estão no formato largo. Quando estamos iniciando, isso talvez não pareça um grande problema, mas conforme a complexidade das nossas análises aumenta, utilização de memória, redução da quantidade leitura/escrita e a otimização do código se tornarão mais e mais importantes.</p>
<p>Para resolver isso, podemos transformar os nossos dados para o formato longo. Vamos ver como podemos fazer isso no nosso código.</p>
<div id="cell-39" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> csv</span>
<span id="cb8-2"></span>
<span id="cb8-3">pokemons <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {}</span>
<span id="cb8-4"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pokemons.csv'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'r'</span>, encoding<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'utf-8'</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> arquivo:</span>
<span id="cb8-5">  dados <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> csv.DictReader(arquivo)</span>
<span id="cb8-6"></span>
<span id="cb8-7">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> pokemon <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> dados:</span>
<span id="cb8-8">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> key, value <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> pokemon.items():</span>
<span id="cb8-9">      pokemons.setdefault(key,[]).append(value)</span></code></pre></div>
</div>
<p>Este trecho de código em Python é bem parecido com o nosso código inicial, no sentido em que usamos as mesmas bibliotecas e executamos os mesmos primeiros passos. A diferença começa no primeiro <code>for loop</code>.</p>
<p>O <code>for loop</code> que segue itera sobre os dados do arquivo CSV, que são retornados como um dicionário. Para cada dicionário de dados, o código itera sobre as chaves do dicionário (que correspondem às colunas do arquivo CSV) e adiciona os valores correspondentes à lista correspondente no dicionário pokemons.</p>
<p>Por exemplo, se o arquivo CSV tiver uma coluna chamada “Nome” contendo os nomes dos Pokémons, o código adicionará cada nome encontrado à lista pokemons[“Name”]. Essa abordagem permite armazenar os dados dos Pokémons de forma organizada e fácil de manipular.</p>
<p>Ao final da execução desse trecho de código, o dicionário pokemons terá as informações lidas do arquivo CSV. Cada chave do dicionário corresponderá a uma coluna do arquivo CSV, e cada valor corresponderá à lista dos valores encontrados nessa coluna. Por exemplo, se o arquivo CSV tiver uma coluna chamada “Type 1”, a lista pokemons[“Type 1”] conterá os tipos encontrados nessa coluna.</p>
<p>Agora vamos ver como iremos contabilizar os tipos neste novo formato e plotar o gráfico.</p>
<div id="cell-41" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1">total <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> { <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tipo"</span>: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">filter</span>(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>,pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Type 1"</span>])) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">filter</span>(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>,pokemons[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Type 2"</span>]))}</span>
<span id="cb9-2"></span>
<span id="cb9-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> seaborn <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sns</span>
<span id="cb9-4">sns.countplot(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Tipo'</span>, data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>total)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-104/index_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Ficou bem mais fácil fazer o plot deste gráfico, não? Temos basicamente o mesmo resultado com menos linhas. E se observarmos bem, no momento que fazemos o processo na primeira linha, acessamos apenas as colunas que estão envolvidas no cálculo.</p>
</section>
</section>
<section id="usando-bibliotecas-externas-para-facilitar-o-trabalho" class="level2">
<h2 class="anchored" data-anchor-id="usando-bibliotecas-externas-para-facilitar-o-trabalho">Usando bibliotecas externas para facilitar o trabalho</h2>
<p>Estamos chegando ao fim desta aula prática, e o aprendizado obtido acredito ter sido bem relevante. Já sabemos como disponibilizar um arquivo de dados para ser consumido pelo script em nosso notebook, aprendemos a formatar esse arquivo em memória para um processamento mais eficiente, e também mostramos rapidamente como utilizar o dado processado para plotar alguns gráficos.</p>
<p>Se vocês olharam com atenção ao código que escrevemos, verão que utilizamos muita vezes, no início de cada parte do script o comando <code>import</code>. Esse comando é utilizado para deixarmos explicito no script quais bibliotecas externas ao módulo básico da linguagem Python. O objetivo dessas bibliotecas é justamente nos ajudar com a simplificação do código.</p>
<p>Ao longo do restante das aulas, iremos utilizar várias bibliotecas como Pandas, Seaborn, MatplotLib e muitas outras. Ao final de cada aula, deixaremos alguns links que os ajudarão a começar a entender melhor cada uma dessas biblioteca.</p>
<p>E nesta aula, vamos deixar o link para a documentação do Python, a partir de onde poderemos nos informar sobre várias bibliotecas que usamos cotidianamente como <code>csv, json, os, sys, logging, ...</code>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="https://docs.python.org/3/library/index.html">Python Docs - Library Reference</a></p>
</div>
</div>
<section id="navegação" class="level3">
<h3 class="anchored" data-anchor-id="navegação">Navegação</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th><a href="../../posts/data-103/index.html">&lt; Anterior</a></th>
<th>|</th>
<th style="text-align: right;"><a href="../../posts/data-105/index.html">Próximo &gt;</a></th>
</tr>
</thead>

</table>


</section>
</section>

 ]]></description>
  <category>Visualização</category>
  <category>Python</category>
  <category>Notebooks</category>
  <category>Jupyter</category>
  <category>Prática</category>
  <guid>https://blog.wvcode.com.br/posts/data-104/</guid>
  <pubDate>Mon, 06 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/library/concepts/programming_practice.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>[VDP] Aula 03 - Formatos de Dados</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-103/</link>
  <description><![CDATA[ 





<section id="introdução" class="level3">
<h3 class="anchored" data-anchor-id="introdução">Introdução</h3>
<p>Olá Cientista de Dados!</p>
<p>Nesta aula, vamos aprender um pouco mais sobre os formatos utilizados para armazenar dados que nossas visualizações irão consumir.</p>
</section>
<section id="fontes-de-dados-e-seus-formatos" class="level3">
<h3 class="anchored" data-anchor-id="fontes-de-dados-e-seus-formatos">Fontes de dados e seus formatos</h3>
<p>Para realizarmos nossas tarefas como Cientistas de Dados, é necessário que acessemos aquilo que nos é mais caro, o nosso combustível: os dados.</p>
<p>Estes dados vem das mais diversas fontes: websites, dispositivos IoT, bancos de dados, documentos, … Estas diferentes fontes significam que os dados possuem diferentes formatos, e uma de nossas tarefas é transformar este dado em um formato com o qual seja possível trabalhar e gerar os resultados esperados.</p>
<p>Dentro da área de Ciência da Computação, o formato mais utilizado para servir como base para o processamento de informação é o formato tabular.</p>
<section id="formato-tabular" class="level4">
<h4 class="anchored" data-anchor-id="formato-tabular">Formato Tabular</h4>
<p>O formato tabular é utilizado para descrever uma estrutura de dados organizada em linhas e colunas, formando uma tabela. É um formato muito utilizado em bancos de dados relacionais e em arquivos CSV (Comma-Separated Values), onde cada linha representa um registro ou observação e cada coluna representa uma variável ou campo. Esse formato é muito útil para representar dados estruturados de forma clara e organizada, permitindo a fácil manipulação e análise dos dados.</p>
<p>Abaixo, temos um exemplo prático de como podemos utilizar Python para carregar um arquivo CSV em nosso notebook.</p>
<div id="cell-7" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> csv</span>
<span id="cb1-2"></span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Abre o arquivo CSV em modo leitura</span></span>
<span id="cb1-4"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'exemplo.csv'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'r'</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> arquivo_csv:</span>
<span id="cb1-5">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cria um objeto para ler o arquivo CSV</span></span>
<span id="cb1-6">    leitor_csv <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> csv.reader(arquivo_csv, delimiter<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">','</span>)</span>
<span id="cb1-7"></span>
<span id="cb1-8">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Percorre as linhas do arquivo CSV</span></span>
<span id="cb1-9">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> linha <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> leitor_csv:</span>
<span id="cb1-10">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(linha)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Nome', 'Idade', 'Cidade']
['Maria', '25', 'São Paulo']
['João', '30', 'Rio de Janeiro']
['Ana', '20', 'Belo Horizonte']
['Andre', '23', 'Porto Alegre']</code></pre>
</div>
</div>
<p>Neste exemplo, utilizamos a função open para abrir o arquivo CSV em modo leitura e, em seguida, criamos um objeto csv.reader para ler o arquivo CSV. Utilizamos o parâmetro delimiter para indicar o caractere separador utilizado no arquivo CSV (no caso, a vírgula). Em seguida, utilizamos um loop for para percorrer as linhas do arquivo CSV e imprimir cada uma delas na tela.</p>
<p>Note que, neste exemplo, o resultado é uma lista de listas, onde cada lista interna representa uma linha do arquivo CSV. Para manipular os dados, é necessário fazer a conversão manualmente para o formato desejado.</p>
<p>E, apesar deste formato ser adequado ao processamento dos dados para visualização, ainda precisamos fazer alguns ajustes até chegar ao formato ideal.</p>
</section>
</section>
<section id="otimizando-o-formato-tabular" class="level3">
<h3 class="anchored" data-anchor-id="otimizando-o-formato-tabular">Otimizando o Formato Tabular</h3>
<p>O formato tabular padrão também pode ser referenciado pelo termo ‘Formato Largo’ (Wide format em inglês), por sua característica de organização em linhas e colunas, com a linha sendo uma observação e as colunas sendo as variáveis da observação. Isto pode ser percebido pelo formato que nossos código percorrem os arquivos ou selecionam a informação de um banco de dados: sempre pensando em extrair linhas que depois são usadas em algum tipo de processamento. Isso gera o que chamamos de overhead no processamento, porque por vezes precisamos apenas fazer o processamento de uma coluna de dados, mas somos obrigados a acessar todas as colunas para depois selecionar a coluna que queremos.</p>
<p>Para resolver essa questão, foi criado um caso especial de formato tabular, o chamado ‘Formato Longo’ (Long format em inglês), onde a orientação da organização dos dados é colunas e linhas, ou seja, podemos acessar uma coluna individualmente, com todas as suas linhas.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-103/df_long_x_wide_form.png" class="img-fluid figure-img"></p>
<figcaption>Formato Longo X Formato Largo</figcaption>
</figure>
</div>
<p>Em Python e em muitas outras linguagens de programação que são utilizadas para Ciência de Dados, o formato tabular é representado por estruturas de dados especiais, chamadas de <code>DataFrames</code> e <code>Series</code>.</p>
<p>Mas antes de explicar em mais detalhes essas estruturas, vamos conhecer um pouco das suas origens.</p>
</section>
<section id="dicionários-e-listas" class="level3">
<h3 class="anchored" data-anchor-id="dicionários-e-listas">Dicionários e Listas</h3>
<p>Se você já conhece o básico de Python, já aprendeu que temos os tipos de dados conhecidos como listas e dicionário de dados. Com estes tipos, podemos representar dados mais complexos, como uma sequência ou um objeto, que são compostos de vários tipos simples. Se você quiser aprender mais sobre listas e dicionários, vá para o final deste notebook.</p>
<p>Em Python, a representação de dados no formato tabular, seja longo ou largo, passa pela combinação destes dois tipos de dados.</p>
<section id="representação-em-python-do-formato-largo" class="level4">
<h4 class="anchored" data-anchor-id="representação-em-python-do-formato-largo">Representação em Python do Formato Largo</h4>
<p>Para criar um objeto em Python que represente um conjunto de dados no Formato Largo, é necessário montar uma lista de dicionários.</p>
<div id="cell-17" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">dados_largos <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [</span>
<span id="cb3-2">    {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"codigo"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nome"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Jose"</span>},</span>
<span id="cb3-3">    {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"codigo"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nome"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Maria"</span>},</span>
<span id="cb3-4">    {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"codigo"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nome"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fernandez"</span>}</span>
<span id="cb3-5">]</span></code></pre></div>
</div>
<p>Neste objeto, temos uma lista que contém 3 elementos. Cada elemento é um dicionário com dois campos. Conforme explicamos anteriormente, no formato largo, para acessar o nome de uma pessoa, precisamos identificar em que linha ela está. Para identificar a linha, percorremos nossa lista. Para inspecionar o nome, recuperamos todo o dicionário que está naquela posição da lista.</p>
</section>
<section id="representação-em-python-do-formato-longo" class="level4">
<h4 class="anchored" data-anchor-id="representação-em-python-do-formato-longo">Representação em Python do Formato Longo</h4>
<p>Para criar um objeto em Python que represente um conjunto de dados no Formato Longo, é necessário montar um dicionário de listas.</p>
<div id="cell-21" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">dados_longos <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb4-2">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"codigo"</span>: [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>], </span>
<span id="cb4-3">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nome"</span>: [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Jose"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Maria"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fernandez"</span>]</span>
<span id="cb4-4">               }</span></code></pre></div>
</div>
<p>Neste objeto, temos o dicionário com seus campos, e cada campo é uma lista com os valores para cada linha.</p>
</section>
<section id="entendendo-a-diferença" class="level4">
<h4 class="anchored" data-anchor-id="entendendo-a-diferença">Entendendo a diferença</h4>
<p>Vamos ver um exemplo prático para entender a diferença entre os dois. Acompanhe no código abaixo e leia os comentários.</p>
<div id="cell-25" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Queremos saber o nome do usuário que está na segunda linha do nosso conjunto de dados.</span></span>
<span id="cb5-2"></span>
<span id="cb5-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Formato largo</span></span>
<span id="cb5-4"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(dados_largos[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>][<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nome"</span>]) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># utilizamos o indice 1 porque em Python listas começam no indice 0</span></span>
<span id="cb5-5"></span>
<span id="cb5-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Formato longo</span></span>
<span id="cb5-7"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(dados_longos[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nome"</span>][<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># apenas invertemos a referência - primeiro a coluna, depois a linha</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Maria
Maria</code></pre>
</div>
</div>
<p>A diferença parece pouca, certo? Apenas invertemos como os indices são acessados, onde está a tal otimização?</p>
<p>A otimização está no fato de que, ao acessar a linha de um dado no formato largo, estamos acessando todas as colunas de informação daquela linha.</p>
<div id="cell-27" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(dados_largos[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'codigo': 2, 'nome': 'Maria'}</code></pre>
</div>
</div>
<p>Já no formato longo, antes de especificar a linha, eu preciso referenciar a coluna, portanto, sempre terei apenas um valor.</p>
<div id="cell-29" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(dados_longos[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nome"</span>][<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Maria</code></pre>
</div>
</div>
</section>
</section>
<section id="dataframes-e-series" class="level3">
<h3 class="anchored" data-anchor-id="dataframes-e-series">DataFrames e Series</h3>
<p>O DataFrame e as Series são dois dos principais conceitos utilizados para trabalhar com dados em Python. Ambos estão presentes na biblioteca Pandas, que é uma das ferramentas mais usadas para análise de dados.</p>
<p>O DataFrame é um objeto que tem como base o conceito de dicionário de listas, onde as listas são representadas por Series. O DataFrame adiciona uma série de funcionalidades ao dicionário de listas, simplificando a manipulação dos mesmos.</p>
<p>Exemplo de código:</p>
<div id="cell-32" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd </span>
<span id="cb11-2">df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.DataFrame([[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>], [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>], [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>]]) </span>
<span id="cb11-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(df[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>][<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>9</code></pre>
</div>
</div>
<p>A Series é uma lista com superpoderes. Assim como o DataFrame, a Series acrescenta muitas facilidades para manipular a lista. Exemplo de código:</p>
<div id="cell-34" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd </span>
<span id="cb13-2">s <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.Series([<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]) </span>
<span id="cb13-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(s[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3</code></pre>
</div>
</div>
<p>Além do Pandas existem outras bibliotecas que utilizam esses conceitos para trabalhar com dados como NumPy (Numerical Python), SciPy (Scientific Python) e Scikit-learn (Machine Learning).</p>
</section>
<section id="finalizando" class="level3">
<h3 class="anchored" data-anchor-id="finalizando">Finalizando</h3>
<p>Nesta aula, aprendemos sobre os formatos de dados que podemos utilizar em nossas visualizações e conhecemos mais detalhes dos DataFrames e Series.</p>
<p>Aqui temos alguns links sobre o assunto: - <a href="https://docs.python.org/3/library/stdtypes.html#list">Listas</a> - <a href="https://docs.python.org/3/library/stdtypes.html#mapping-types-dict">Dicionários</a></p>
</section>
<section id="navegação" class="level3">
<h3 class="anchored" data-anchor-id="navegação">Navegação</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th><a href="../../posts/data-102/index.html">&lt; Anterior</a></th>
<th>|</th>
<th style="text-align: right;"><a href="../../posts/data-104/index.html">Próximo &gt;</a></th>
</tr>
</thead>

</table>


</section>

 ]]></description>
  <category>Visualização</category>
  <category>Python</category>
  <category>Dados</category>
  <category>Formato Longo</category>
  <category>Formato Largo</category>
  <guid>https://blog.wvcode.com.br/posts/data-103/</guid>
  <pubDate>Sun, 05 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/posts/data-103/df_long_x_wide_form.png" medium="image" type="image/png" height="99" width="144"/>
</item>
<item>
  <title>Aula 02 - Google Colab</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-102/</link>
  <description><![CDATA[ 





<section id="introdução" class="level3">
<h3 class="anchored" data-anchor-id="introdução">Introdução</h3>
<p>Olá Cientista de Dados!</p>
<p>Nesta aula vamos conhecer o Google Colab, e entender como utiliza-lo em nossas tarefas de Análise e Visualização de Dados.</p>
<p>Vamos lá?</p>
</section>
<section id="o-que-é-o-google-colab" class="level3">
<h3 class="anchored" data-anchor-id="o-que-é-o-google-colab">O que é o Google Colab?</h3>
<p>O Google Colab é uma plataforma de computação em nuvem gratuita baseada no <a href="https://jupyter.org/">Jupyter Notebook</a>. Ele permite que os usuários criem e compartilhem documentos que contenham código executável, equações, visualizações e texto explicativo. O Google Colab oferece suporte a várias linguagens de programação populares, incluindo Python, JavaScript e Swift.</p>
<p>Isto significa que podemos intercalar blocos de texto, imagens e código em um mesmo documento. Como um Cientista de Dados, você vai utilizar muito este recurso tanto nos momentos em que você está trabalhando os dados e construindo o modelo quanto naquele momento em que você precisa comunicar seus achados e resultados para outros cientistas e para o seu público alvo.</p>
</section>
<section id="como-acessamos-o-google-colab" class="level3">
<h3 class="anchored" data-anchor-id="como-acessamos-o-google-colab">Como acessamos o Google Colab?</h3>
<p>Para acessar o Google Colab, você precisa se conectar com uma conta do Google e acessar o site <a href="https://colab.research.google.com">colab.research.google.com</a>. Você verá então, a seguinte tela:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-102/colab-001.png" class="img-fluid figure-img"></p>
<figcaption>Tela Inicial do Colab</figcaption>
</figure>
</div>
<p>Como você pode ver, a primeira atividade que ele sugere é abrir exemplos ou, no meu caso, alguns arquivos mais recentes. O Colab é integrado com o Google Drive, então seus arquivos, que terão sempre a extensão <code>.ipynb</code> estarão sempre salvos lá no seu Drive, em uma pasta específica.</p>
</section>
<section id="iniciando-um-novo-notebook" class="level3">
<h3 class="anchored" data-anchor-id="iniciando-um-novo-notebook">Iniciando um novo notebook!</h3>
<p>Vamos iniciar? Clique no link “new notebook”. Você deve ver sua tela assim:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-102/colab-002.png" class="img-fluid figure-img"></p>
<figcaption>Novo Notebook</figcaption>
</figure>
</div>
<p>Neste momento, vamos destacar três áreas da tela:</p>
<ol type="1">
<li>Onde fica o nome do notebook. Você pode modificar quando quiser</li>
<li>Sistema de arquivos do notebook. Quando iniciamos um novo notebook, temos um sistema de arquivos virtual, onde podemos subir arquivos que serão utilizados durante a execução do código. Esses arquivos são apagados quando o notebook não está ativo.</li>
<li>Esta é uma célula. Um notebook é feito de um conjunto de células que são executadas sequencialmente. As células podem ser de dois tipos: células de código ou células de texto. A célula que estamos marcando é especificamente uma célula de código, pois tem o botão de execução bem a esquerda.</li>
</ol>
<section id="células-de-texto" class="level4">
<h4 class="anchored" data-anchor-id="células-de-texto">Células de Texto</h4>
<p>As células de texto nos permitem escrever texto no formato Markdown, que facilita bastante a formatação. Se quiser aprender mais sobre Markdown, <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">clique aqui</a>. Veja alguns exemplos:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-102/colab-003.png" class="img-fluid figure-img"></p>
<figcaption>Exemplos de célula de texto</figcaption>
</figure>
</div>
</section>
<section id="células-de-código" class="level4">
<h4 class="anchored" data-anchor-id="células-de-código">Células de Código</h4>
<p>Células de código, como o próprio nome diz, servem para escrever código que será executado. Podemos usar algumas linguagens, sendo que a mais comum é Python. Cada célula, ao ser executada, pode imprimir o resultado de sua execução logo abaixo. Veja um exemplo abaixo:</p>
<div id="cell-18" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> json</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> requests</span>
<span id="cb1-4"></span>
<span id="cb1-5">response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> requests.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://dummyjson.com/products"</span>)</span>
<span id="cb1-6">json.dump(json.loads(response.text)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'products'</span>], <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'products.json'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'w'</span>))</span>
<span id="cb1-7">raw_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'products.json'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'r'</span>)</span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># .load("https://dummyjson.com/products")</span></span>
<span id="cb1-9">df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_json(raw_data)</span>
<span id="cb1-10"></span>
<span id="cb1-11">df</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">id</th>
<th data-quarto-table-cell-role="th">title</th>
<th data-quarto-table-cell-role="th">description</th>
<th data-quarto-table-cell-role="th">price</th>
<th data-quarto-table-cell-role="th">discountPercentage</th>
<th data-quarto-table-cell-role="th">rating</th>
<th data-quarto-table-cell-role="th">stock</th>
<th data-quarto-table-cell-role="th">brand</th>
<th data-quarto-table-cell-role="th">category</th>
<th data-quarto-table-cell-role="th">thumbnail</th>
<th data-quarto-table-cell-role="th">images</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>iPhone 9</td>
<td>An apple mobile which is nothing like apple</td>
<td>549</td>
<td>12.96</td>
<td>4.69</td>
<td>94</td>
<td>Apple</td>
<td>smartphones</td>
<td>https://i.dummyjson.com/data/products/1/thumbn...</td>
<td>[https://i.dummyjson.com/data/products/1/1.jpg...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2</td>
<td>iPhone X</td>
<td>SIM-Free, Model A19211 6.5-inch Super Retina H...</td>
<td>899</td>
<td>17.94</td>
<td>4.44</td>
<td>34</td>
<td>Apple</td>
<td>smartphones</td>
<td>https://i.dummyjson.com/data/products/2/thumbn...</td>
<td>[https://i.dummyjson.com/data/products/2/1.jpg...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>3</td>
<td>Samsung Universe 9</td>
<td>Samsung's new variant which goes beyond Galaxy...</td>
<td>1249</td>
<td>15.46</td>
<td>4.09</td>
<td>36</td>
<td>Samsung</td>
<td>smartphones</td>
<td>https://i.dummyjson.com/data/products/3/thumbn...</td>
<td>[https://i.dummyjson.com/data/products/3/1.jpg]</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>4</td>
<td>OPPOF19</td>
<td>OPPO F19 is officially announced on April 2021.</td>
<td>280</td>
<td>17.91</td>
<td>4.30</td>
<td>123</td>
<td>OPPO</td>
<td>smartphones</td>
<td>https://i.dummyjson.com/data/products/4/thumbn...</td>
<td>[https://i.dummyjson.com/data/products/4/1.jpg...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>5</td>
<td>Huawei P30</td>
<td>Huawei’s re-badged P30 Pro New Edition was off...</td>
<td>499</td>
<td>10.58</td>
<td>4.09</td>
<td>32</td>
<td>Huawei</td>
<td>smartphones</td>
<td>https://i.dummyjson.com/data/products/5/thumbn...</td>
<td>[https://i.dummyjson.com/data/products/5/1.jpg...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>6</td>
<td>MacBook Pro</td>
<td>MacBook Pro 2021 with mini-LED display may lau...</td>
<td>1749</td>
<td>11.02</td>
<td>4.57</td>
<td>83</td>
<td>Apple</td>
<td>laptops</td>
<td>https://i.dummyjson.com/data/products/6/thumbn...</td>
<td>[https://i.dummyjson.com/data/products/6/1.png...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>7</td>
<td>Samsung Galaxy Book</td>
<td>Samsung Galaxy Book S (2020) Laptop With Intel...</td>
<td>1499</td>
<td>4.15</td>
<td>4.25</td>
<td>50</td>
<td>Samsung</td>
<td>laptops</td>
<td>https://i.dummyjson.com/data/products/7/thumbn...</td>
<td>[https://i.dummyjson.com/data/products/7/1.jpg...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>8</td>
<td>Microsoft Surface Laptop 4</td>
<td>Style and speed. Stand out on HD video calls b...</td>
<td>1499</td>
<td>10.23</td>
<td>4.43</td>
<td>68</td>
<td>Microsoft Surface</td>
<td>laptops</td>
<td>https://i.dummyjson.com/data/products/8/thumbn...</td>
<td>[https://i.dummyjson.com/data/products/8/1.jpg...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>9</td>
<td>Infinix INBOOK</td>
<td>Infinix Inbook X1 Ci3 10th 8GB 256GB 14 Win10 ...</td>
<td>1099</td>
<td>11.83</td>
<td>4.54</td>
<td>96</td>
<td>Infinix</td>
<td>laptops</td>
<td>https://i.dummyjson.com/data/products/9/thumbn...</td>
<td>[https://i.dummyjson.com/data/products/9/1.jpg...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>10</td>
<td>HP Pavilion 15-DK1056WM</td>
<td>HP Pavilion 15-DK1056WM Gaming Laptop 10th Gen...</td>
<td>1099</td>
<td>6.18</td>
<td>4.43</td>
<td>89</td>
<td>HP Pavilion</td>
<td>laptops</td>
<td>https://i.dummyjson.com/data/products/10/thumb...</td>
<td>[https://i.dummyjson.com/data/products/10/1.jp...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>11</td>
<td>perfume Oil</td>
<td>Mega Discount, Impression of Acqua Di Gio by G...</td>
<td>13</td>
<td>8.40</td>
<td>4.26</td>
<td>65</td>
<td>Impression of Acqua Di Gio</td>
<td>fragrances</td>
<td>https://i.dummyjson.com/data/products/11/thumb...</td>
<td>[https://i.dummyjson.com/data/products/11/1.jp...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>12</td>
<td>Brown Perfume</td>
<td>Royal_Mirage Sport Brown Perfume for Men &amp; Wom...</td>
<td>40</td>
<td>15.66</td>
<td>4.00</td>
<td>52</td>
<td>Royal_Mirage</td>
<td>fragrances</td>
<td>https://i.dummyjson.com/data/products/12/thumb...</td>
<td>[https://i.dummyjson.com/data/products/12/1.jp...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>13</td>
<td>Fog Scent Xpressio Perfume</td>
<td>Product details of Best Fog Scent Xpressio Per...</td>
<td>13</td>
<td>8.14</td>
<td>4.59</td>
<td>61</td>
<td>Fog Scent Xpressio</td>
<td>fragrances</td>
<td>https://i.dummyjson.com/data/products/13/thumb...</td>
<td>[https://i.dummyjson.com/data/products/13/1.jp...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>14</td>
<td>Non-Alcoholic Concentrated Perfume Oil</td>
<td>Original Al Munakh® by Mahal Al Musk | Our Imp...</td>
<td>120</td>
<td>15.60</td>
<td>4.21</td>
<td>114</td>
<td>Al Munakh</td>
<td>fragrances</td>
<td>https://i.dummyjson.com/data/products/14/thumb...</td>
<td>[https://i.dummyjson.com/data/products/14/1.jp...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>15</td>
<td>Eau De Perfume Spray</td>
<td>Genuine Al-Rehab spray perfume from UAE/Saudi...</td>
<td>30</td>
<td>10.99</td>
<td>4.70</td>
<td>105</td>
<td>Lord - Al-Rehab</td>
<td>fragrances</td>
<td>https://i.dummyjson.com/data/products/15/thumb...</td>
<td>[https://i.dummyjson.com/data/products/15/1.jp...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>16</td>
<td>Hyaluronic Acid Serum</td>
<td>L'OrÃ©al Paris introduces Hyaluron Expert Repl...</td>
<td>19</td>
<td>13.31</td>
<td>4.83</td>
<td>110</td>
<td>L'Oreal Paris</td>
<td>skincare</td>
<td>https://i.dummyjson.com/data/products/16/thumb...</td>
<td>[https://i.dummyjson.com/data/products/16/1.pn...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>17</td>
<td>Tree Oil 30ml</td>
<td>Tea tree oil contains a number of compounds, i...</td>
<td>12</td>
<td>4.09</td>
<td>4.52</td>
<td>78</td>
<td>Hemani Tea</td>
<td>skincare</td>
<td>https://i.dummyjson.com/data/products/17/thumb...</td>
<td>[https://i.dummyjson.com/data/products/17/1.jp...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>18</td>
<td>Oil Free Moisturizer 100ml</td>
<td>Dermive Oil Free Moisturizer with SPF 20 is sp...</td>
<td>40</td>
<td>13.10</td>
<td>4.56</td>
<td>88</td>
<td>Dermive</td>
<td>skincare</td>
<td>https://i.dummyjson.com/data/products/18/thumb...</td>
<td>[https://i.dummyjson.com/data/products/18/1.jp...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>19</td>
<td>Skin Beauty Serum.</td>
<td>Product name: rorec collagen hyaluronic acid w...</td>
<td>46</td>
<td>10.68</td>
<td>4.42</td>
<td>54</td>
<td>ROREC White Rice</td>
<td>skincare</td>
<td>https://i.dummyjson.com/data/products/19/thumb...</td>
<td>[https://i.dummyjson.com/data/products/19/1.jp...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>20</td>
<td>Freckle Treatment Cream- 15gm</td>
<td>Fair &amp; Clear is Pakistan's only pure Freckle c...</td>
<td>70</td>
<td>16.99</td>
<td>4.06</td>
<td>140</td>
<td>Fair &amp; Clear</td>
<td>skincare</td>
<td>https://i.dummyjson.com/data/products/20/thumb...</td>
<td>[https://i.dummyjson.com/data/products/20/1.jp...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">20</td>
<td>21</td>
<td>- Daal Masoor 500 grams</td>
<td>Fine quality Branded Product Keep in a cool an...</td>
<td>20</td>
<td>4.81</td>
<td>4.44</td>
<td>133</td>
<td>Saaf &amp; Khaas</td>
<td>groceries</td>
<td>https://i.dummyjson.com/data/products/21/thumb...</td>
<td>[https://i.dummyjson.com/data/products/21/1.pn...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">21</td>
<td>22</td>
<td>Elbow Macaroni - 400 gm</td>
<td>Product details of Bake Parlor Big Elbow Macar...</td>
<td>14</td>
<td>15.58</td>
<td>4.57</td>
<td>146</td>
<td>Bake Parlor Big</td>
<td>groceries</td>
<td>https://i.dummyjson.com/data/products/22/thumb...</td>
<td>[https://i.dummyjson.com/data/products/22/1.jp...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">22</td>
<td>23</td>
<td>Orange Essence Food Flavou</td>
<td>Specifications of Orange Essence Food Flavour ...</td>
<td>14</td>
<td>8.04</td>
<td>4.85</td>
<td>26</td>
<td>Baking Food Items</td>
<td>groceries</td>
<td>https://i.dummyjson.com/data/products/23/thumb...</td>
<td>[https://i.dummyjson.com/data/products/23/1.jp...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">23</td>
<td>24</td>
<td>cereals muesli fruit nuts</td>
<td>original fauji cereal muesli 250gm box pack or...</td>
<td>46</td>
<td>16.80</td>
<td>4.94</td>
<td>113</td>
<td>fauji</td>
<td>groceries</td>
<td>https://i.dummyjson.com/data/products/24/thumb...</td>
<td>[https://i.dummyjson.com/data/products/24/1.jp...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">24</td>
<td>25</td>
<td>Gulab Powder 50 Gram</td>
<td>Dry Rose Flower Powder Gulab Powder 50 Gram • ...</td>
<td>70</td>
<td>13.58</td>
<td>4.87</td>
<td>47</td>
<td>Dry Rose</td>
<td>groceries</td>
<td>https://i.dummyjson.com/data/products/25/thumb...</td>
<td>[https://i.dummyjson.com/data/products/25/1.pn...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">25</td>
<td>26</td>
<td>Plant Hanger For Home</td>
<td>Boho Decor Plant Hanger For Home Wall Decorati...</td>
<td>41</td>
<td>17.86</td>
<td>4.08</td>
<td>131</td>
<td>Boho Decor</td>
<td>home-decoration</td>
<td>https://i.dummyjson.com/data/products/26/thumb...</td>
<td>[https://i.dummyjson.com/data/products/26/1.jp...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">26</td>
<td>27</td>
<td>Flying Wooden Bird</td>
<td>Package Include 6 Birds with Adhesive Tape Sha...</td>
<td>51</td>
<td>15.58</td>
<td>4.41</td>
<td>17</td>
<td>Flying Wooden</td>
<td>home-decoration</td>
<td>https://i.dummyjson.com/data/products/27/thumb...</td>
<td>[https://i.dummyjson.com/data/products/27/1.jp...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">27</td>
<td>28</td>
<td>3D Embellishment Art Lamp</td>
<td>3D led lamp sticker Wall sticker 3d wall art l...</td>
<td>20</td>
<td>16.49</td>
<td>4.82</td>
<td>54</td>
<td>LED Lights</td>
<td>home-decoration</td>
<td>https://i.dummyjson.com/data/products/28/thumb...</td>
<td>[https://i.dummyjson.com/data/products/28/1.jp...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">28</td>
<td>29</td>
<td>Handcraft Chinese style</td>
<td>Handcraft Chinese style art luxury palace hote...</td>
<td>60</td>
<td>15.34</td>
<td>4.44</td>
<td>7</td>
<td>luxury palace</td>
<td>home-decoration</td>
<td>https://i.dummyjson.com/data/products/29/thumb...</td>
<td>[https://i.dummyjson.com/data/products/29/1.jp...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">29</td>
<td>30</td>
<td>Key Holder</td>
<td>Attractive DesignMetallic materialFour key hoo...</td>
<td>30</td>
<td>2.92</td>
<td>4.92</td>
<td>54</td>
<td>Golden</td>
<td>home-decoration</td>
<td>https://i.dummyjson.com/data/products/30/thumb...</td>
<td>[https://i.dummyjson.com/data/products/30/1.jp...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Esta célula, se executada, irá carregar dados de um site, salvar um arquivo e carrega-lo em um DataFrame que depois será impresso na área de resultados.</p>
</section>
</section>
<section id="utilizando-um-notebook" class="level3">
<h3 class="anchored" data-anchor-id="utilizando-um-notebook">Utilizando um notebook</h3>
<p>Os exemplos acima são bons para mostrar cada parte separadamente, mas vamos a um exemplo que irá ilustrar a utilização típica destes blocos.</p>
<section id="exemplo" class="level4">
<h4 class="anchored" data-anchor-id="exemplo">Exemplo</h4>
<p>Digamos que você precisa entregar um relatório para o professor sobre quais são os primeiros 1000 números primos. Ele também solicita que você explique o que são números primos e como descobrir se um número é primo ou não.</p>
<p>Em um cenário tradicional de programação, provavelmente se faria a entrega de pelo menos dois arquivos: um documento do word, por exemplo, com a parte descritiva e um arquivo de código-fonte com o código. Como o arquivo de código-fonte não guarda o resultado da execução, é muito provável que este resultado fosse adicionado ao documento do word, ou quem sabe, disponibilizado em um terceiro arquivo.</p>
<p>Dá um certo trabalho preparar tudo… Além precisar de um computador com Word e com um editor de código-fonte para fazer todo o relatório. Mas com o Google Colab, você pode fazer tudo em um único lugar: um notebook pode ser editado de qualquer lugar, através do browser!</p>
<p>Veja o resultado abaixo:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://blog.wvcode.com.br/posts/data-102/colab-004.png" class="img-fluid figure-img"></p>
<figcaption>Notebook completo</figcaption>
</figure>
</div>
<p>É bem interessante, não é mesmo? Tudo em um único documento, que eu posso compartilhar com outras pessoas, sem nenhuma complicação. E o melhor, quem abre este notebook, pode executar as partes que são código, quando bem quiserem, sem depender de você para atualizar os resultados.</p>
</section>
</section>
<section id="finalizando" class="level3">
<h3 class="anchored" data-anchor-id="finalizando">Finalizando</h3>
<p>Espero que você tenha gostado de aprender um pouco sobre o ambiente de desenvolvimento que iremos utilizar neste curso. Ao longo do curso, utilizaremos recursos mais avançados, então não perca a oportunidade de aprender mais sobre o Google Colab com estes links abaixo:</p>
<ul>
<li><a href="https://www.alura.com.br/artigos/google-colab-o-que-e-e-como-usar?gclid=CjwKCAiAxvGfBhB-EiwAMPakqjBnFPSyZyay7wg-cefz02KTf52hSDkUZ-sUAXtIgv6x79w8AKjrghoCSAYQAvD_BwE">O que é Google Colab</a></li>
<li><a href="https://www.hashtagtreinamentos.com/programar-online-google-colab-python">Google Colaboratory - Hashtag Treinamentos</a></li>
<li><a href="https://kenzie.com.br/blog/google-colab/">Vantagens de usar o Google Colab</a></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Os artigos citado acima e o conteúdo apresentado nesta aula não são de maneira nenhuma uma revisão extensiva do Google Colab, apresentamos apenas o necessário para você andar com seus próprios pés e no seu ritmo!</p>
</div>
</div>
</section>
<section id="navegação" class="level3">
<h3 class="anchored" data-anchor-id="navegação">Navegação</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th><a href="../../posts/data-101/index.html">&lt; Anterior</a></th>
<th>|</th>
<th style="text-align: right;"><a href="../../posts/data-103/index.html">Próximo &gt;</a></th>
</tr>
</thead>

</table>


</section>

 ]]></description>
  <category>Visualização</category>
  <category>Notebooks</category>
  <category>Jupyter</category>
  <guid>https://blog.wvcode.com.br/posts/data-102/</guid>
  <pubDate>Sat, 04 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/posts/data-102/colab.png" medium="image" type="image/png" height="89" width="144"/>
</item>
<item>
  <title>Parte 01 - Teoria de Visualização de Dados</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-101/</link>
  <description><![CDATA[ 





<section id="introdução" class="level3">
<h3 class="anchored" data-anchor-id="introdução">Introdução</h3>
<p>Olá Devs!</p>
<p>Na primeira parte desta série, vamos aprender um pouco de teoria sobre Visualização e Ciência de Dados, com o objetivo de compreendermos a importância da Visualização de Dados dentro da Ciência de Dados.</p>
</section>
<section id="o-que-é-ciência-de-dados" class="level3">
<h3 class="anchored" data-anchor-id="o-que-é-ciência-de-dados">O que é Ciência de Dados</h3>
<p>A ciência de dados é uma disciplina que usa habilidades matemáticas e técnicas avançadas de análise de dados para transformar grandes quantidades de informações em insights úteis. Ela é usada em diversos setores para tomada de decisão informada e resolução de problemas complexos.</p>
<p>Ciência de dados é como ser um detetive super nerd que desvenda mistérios escondidos nos dados. Os cientistas de dados mergulham em montanhas de informações, usando suas habilidades matemáticas e de programação para desvendar padrões ocultos e responder a perguntas importantes. Eles são os mestres em transformar dados bagunçados em conhecimento valioso, ajudando empresas e pesquisadores a tomar decisões informadas. É como ter um superpoder de números e algoritmos, só que sem a capa e a máscara.</p>
</section>
<section id="o-fluxo-de-trabalho-de-ciência-de-dados" class="level3">
<h3 class="anchored" data-anchor-id="o-fluxo-de-trabalho-de-ciência-de-dados">O Fluxo de Trabalho de Ciência de Dados</h3>
O <strong>Ciclo de Vida de Ciência de Dados</strong> é a formalização das 6 etapas que os cientistas de dados trabalham a cada projeto para chegar ao final com o resultado solicitado pelo cliente, e podemos ver suas fases na imagem abaixo:
<center>
<p><img src="https://blog.wvcode.com.br/posts/data-101/ciclo_vida_ds.png" class="img-fluid"></p>
</center>
<p><strong>1 - Entendendo o problema</strong> - aqui é feito o processo de descoberta, onde o problema que o cliente deseja resolvido é devidamente explicado, quebrado em requisitos e os dados disponíveis (ou a falta deles) são disponibilizados.</p>
<p><strong>2 - Coleta de dados</strong> - nesta fase, os conjuntos de dados iniciais caso existam são validados e se determina que outras fontes podem ser usadas para obter ou enriquecer os dados. Também são escritos os primeiros códigos para realizar a busca e download dos dados.</p>
<p><strong>3 - Processamento de dados</strong> - nesta fase os dados são analisados e transformados para atender ao propósito de negócio. Também é a fase em que começa o processo de criação de modelos de machine learning.</p>
<p><strong>4 - Exploração de dados</strong> - esta fase é caracterizada principalmente por visualização de dados sendo utilizada para compreender os dados gerados pelo modelo. São utilizadas técnicas específicas para essa exploração e todas dependem primariamente do bom entendimento na criação de visualizações de dados.</p>
<p><strong>5 - Comunicação de resultados</strong> - esta fase também reconhecida por fazer uso extensivo de técnicas de visualização de dados aliadas a técnicas de story telling para mostrar ao cliente os resultados obtidos.</p>
<p><strong>6 - Feedback</strong> - na última fase deste ciclo, se coleta as impressões do cliente e se inicia (caso necessário) uma nova iteração do projeto, para o refinamento da solução apresentada e a possibilidade de trabalhar em novos requisitos.</p>
</section>
<section id="o-que-é-visualização-de-dados" class="level3">
<h3 class="anchored" data-anchor-id="o-que-é-visualização-de-dados">O que é Visualização de Dados???</h3>
<center>
<p><img src="https://blog.wvcode.com.br/posts/data-101/definicao_grafico.png" class="img-fluid"></p>
</center>
</section>
<section id="tipos-de-visualização" class="level3">
<h3 class="anchored" data-anchor-id="tipos-de-visualização">Tipos de Visualização</h3>
<p>Existem diversos tipos de visualizações disponíveis. Sua utilização está associada ao tipo de informação e ao objetivo que temos ao mostrar os dados.</p>
<center>
<p><img src="https://blog.wvcode.com.br/posts/data-101/tipos_grafico.png" class="img-fluid"></p>
</center>
<p>Quanto a objetivos, as visualizações são utilizadas com as seguintes finalidades: - <strong>Comparar</strong> valores - Evidenciar a <strong>correlação</strong> entre valores (como os dois valores se comportam em conjunto) - Como um valor se <strong>distribui</strong> em relação a uma dimensão contínua (geralmente o tempo) - Como um valor se distribui especificamente em relação a <strong>posicionamento geográfico</strong> - Como um valor se distribui entre dimensões não continuas que formam <strong>partes de um todo</strong>; o quanto cada valor representa em relação a esse todo - Como um valor se comporta em relação <strong>tempo</strong>.</p>
</section>
<section id="tipos-de-visualização-x-objetivo-de-comunicação" class="level3">
<h3 class="anchored" data-anchor-id="tipos-de-visualização-x-objetivo-de-comunicação">Tipos de Visualização X Objetivo de Comunicação</h3>
<p>Abaixo segue um diagrama com uma indicação de quais gráficos podem ser utilizados de acordo com o seu objetivo.</p>
<center>
<p><img src="https://blog.wvcode.com.br/posts/data-101/visualizacao_x_objetivo.png" class="img-fluid"></p>
</center>
</section>
<section id="como-podemos-criar-visualizações" class="level3">
<h3 class="anchored" data-anchor-id="como-podemos-criar-visualizações">Como podemos criar Visualizações???</h3>
<p>Assim como existem diversos tipos de visualizações, existem diversas ferramentas. Abaixo, colocamos uma lista de ferramentas para visualização de dados: - Excel - Tableau - Power BI - Qlik - Looker (antes chamada de Google Data Studio) - Oracle Analytics - SAP Business Objects - Grafana - Kibana</p>
<p>Estas ferramentas se caracterizam por uma interface de usuário totalmente voltada para a criação de visualizações. Se vocês estivessem em um curso de Análise de Dados, seriam nossa escolha para o curso, pois elas focam na modelagem dos dados e criação das visualizações. Mas vocês estão em um curso para iniciarem na carreira de Cientistas de Dados, certo?</p>
<section id="então-como-um-cientista-de-dados-cria-visualizações" class="level4">
<h4 class="anchored" data-anchor-id="então-como-um-cientista-de-dados-cria-visualizações">Então, como um Cientista de Dados cria visualizações???</h4>
<p>Um Cientista de Dados utiliza a Visualização de Dados de duas formas: 1) Como uma ferramenta de exploração dos dados, durante a fase em que estão procurando respostas 2) Como uma ferramenta de comunicação, para divulgar resultados</p>
<p>Considerando essas duas necessidades, embora o Cientista de Dados pudesse utilizar ferramentas como as citadas anteriormente, a verdade é que ele precisa de uma ferramenta que consiga combinar o poder da programação, com visualização de dados e também com uma estrutura documental organizada para compartilhamento de informação.</p>
<p>Por isso, iremos utilizar uma tecnologia diferente para aprender visualização de dados: vamos aprender a criar visualizações de forma <strong>programática</strong>, ou seja, vamos criar visualizações utilizando programas escritos em Python.</p>
</section>
<section id="porquê-vamos-fazer-isso" class="level4">
<h4 class="anchored" data-anchor-id="porquê-vamos-fazer-isso">Porquê vamos fazer isso?</h4>
<p>Por alguns motivos:</p>
<ol type="1">
<li><p>Como cientistas de dados, a maneira mais comum de entregar os resultados do seu trabalho, além de apresentações em powerpoint é através de <strong>notebooks interativos</strong>, como o Google Colab, ou o Jupyter. São ferramentas que ajudam muito no desenvolvimento de um <strong>story telling</strong> orientado a divulgação dos resultados</p></li>
<li><p>Atualmente Python é a linguagem a se aprender na carreira de Cientista de Dados. Outras linguagens como R, Julia e até Java também são utilizadas, mas por enquanto, Python é a preferida</p></li>
<li><p>As bibliotecas de visualização em Python são muito flexíveis e poderosas, inclusive são utilizadas por algumas das ferramentas citadas acima</p></li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Então, agora que toda a teoria necessária está explicada, bora trabalhar??? Na Parte 02, iremos aprender sobre o Google Colab, a ferramenta que escolhemos para conduzir o restante desta série! <a href="../../posts/data-102/index.html">Parte 02 - Google Colab</a></p>
</div>
</div>


</section>
</section>

 ]]></description>
  <category>Visualização</category>
  <category>Teoria</category>
  <category>Ciência de Dados</category>
  <guid>https://blog.wvcode.com.br/posts/data-101/</guid>
  <pubDate>Fri, 03 Feb 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.wvcode.com.br/posts/data-101/tipos_grafico.png" medium="image" type="image/png" height="161" width="144"/>
</item>
<item>
  <title>[VDP] - Introdução</title>
  <dc:creator>Walter R. Paixão-Côrtes</dc:creator>
  <link>https://blog.wvcode.com.br/posts/data-010/</link>
  <description><![CDATA[ 





<p>Olá Devs!!!</p>
<p>A série de Visualização de Dados com Python tem por objetivo habilita-los a utilizar a linguagem Python para:</p>
<ul>
<li>realizar análises de dados em grandes volumes e nos mais diferentes formatos</li>
<li>criar gráficos que transmitam a informação de maneira agradável e direta</li>
<li>aprender sobre tipos de visualização de dados que vão além dos gráficos de barras, linhas e tortas.</li>
</ul>
<p>Ao longo dos posts você irá aprender a utilizar algumas das bibliotecas Python mais famosas na área de Ciência de Dados: Requests, Pandas, Seaborn, MatplotLib, Plotly e muito mais.</p>
<p>Então, não perca mais tempo e comece a leitura agora mesmo!</p>
<p>Um abraço, Walter.</p>



 ]]></description>
  <category>Visualização</category>
  <category>Python</category>
  <category>Pandas</category>
  <category>Seaborn</category>
  <guid>https://blog.wvcode.com.br/posts/data-010/</guid>
  <pubDate>Thu, 02 Feb 2023 00:00:00 GMT</pubDate>
</item>
</channel>
</rss>
